!function(t){"use strict";var e="ngMaterialDatePicker",a={DATE:0,HOUR:1,MINUTE:2},i=function(t,e){return"jQuery"in window?jQuery(t).css(e):(t=angular.element(t),"getComputedStyle"in window?window.getComputedStyle(t[0])[e]:t.css(e))};angular.module(e,["ngMaterial"]).provider("mdcDatetimePickerDefaultLocale",function(){this.locale="en",this.$get=function(){return this.locale},this.setDefaultLocale=function(t){this.locale=t}}).directive("mdcDatetimePicker",["$mdDialog",function(e){return{restrict:"A",require:"ngModel",scope:{currentDate:"=ngModel",time:"=",date:"=",minDate:"=",maxDate:"=",shortTime:"=",format:"@",cancelText:"@",okText:"@",lang:"@",amText:"@",pmText:"@"},link:function(a,i,n,s){var c=!1;a.format||(a.date&&a.time?a.format="YYYY-MM-DD HH:mm:ss":a.date?a.format="YYYY-MM-DD":a.format="HH:mm"),angular.isString(a.currentDate)&&""!==a.currentDate&&(a.currentDate=t(a.currentDate,a.format)),s&&s.$formatters.push(function(e){var i=t(e);return i.isValid()?i.format(a.format):""}),i.attr("readonly",""),i.on("focus",function(t){if(t.preventDefault(),i.blur(),!c){c=!0;var s={};for(var o in n)a.hasOwnProperty(o)&&!angular.isUndefined(a[o])&&(s[o]=a[o]);s.currentDate=a.currentDate;var l={options:s};e.show({template:'<md-dialog class="dtp" layout="column" style="width: 300px;">    <md-dialog-content class="dtp-content">        <div class="dtp-date-view">            <header class="dtp-header">                <div class="dtp-actual-day" ng-show="picker.dateMode">{{picker.currentDate.format("dddd")}}</div>                <div class="dtp-actual-day" ng-show="picker.timeMode">{{picker.params.shortTime ? picker.currentDate.format("A") : " "}}</div>                <div class="dtp-close text-right">                    <!-- a href="#" mdc-dtp-noclick ng-click="picker.hide()">&times;</a -->                </div>            </header>            <div class="dtp-date" ng-show="picker.params.date">                <div layout="column">                    <div class="dtp-actual-month">{{picker.currentDate.format("MMM") | uppercase}}</div>                </div>                <div class="dtp-actual-num">{{picker.currentDate.format("DD")}}</div>                <div layout="column">                    <div class="dtp-actual-year">{{picker.currentDate.format("YYYY")}}</div>                </div>            </div>            <div class="dtp-time" ng-show="picker.params.time && !picker.params.date">                <div class="dtp-actual-maxtime">{{picker.currentNearest5Minute().format(picker.params.shortTime ? "hh:mm" : "HH:mm")}}</div>            </div>            <div class="dtp-picker">                <mdc-datetime-picker-calendar date="picker.currentDate" picker="picker" class="dtp-picker-calendar" ng-show="picker.currentView === picker.VIEWS.DATE"></mdc-datetime-picker-calendar>                <div class="dtp-picker-datetime" ng-show="picker.currentView !== picker.VIEWS.DATE">                    <div class="dtp-actual-meridien">                        <div class="left p20">                            <a href="#" mdc-dtp-noclick class="dtp-meridien-am" ng-class="{selected: picker.meridien == \'AM\'}" ng-click="picker.selectAM()">{{picker.params.amText}}</a>                        </div>                        <div ng-show="!picker.timeMode" class="dtp-actual-time p60">{{picker.currentNearest5Minute().format(picker.params.shortTime ? "hh:mm" : "HH:mm")}}</div>                        <div class="right p20">                            <a href="#" mdc-dtp-noclick class="dtp-meridien-pm" ng-class="{selected: picker.meridien == \'PM\'}" ng-click="picker.selectPM()">{{picker.params.pmText}}</a>                        </div>                        <div class="clearfix"></div>                    </div>                    <mdc-datetime-picker-clock mode="hours" ng-if="picker.currentView === picker.VIEWS.HOUR"></mdc-datetime-picker-clock>                    <mdc-datetime-picker-clock mode="minutes" ng-if="picker.currentView === picker.VIEWS.MINUTE"></mdc-datetime-picker-clock>                </div>            </div>        </div>    </md-dialog-content>    <md-dialog-actions class="dtp-buttons">            <md-button class="dtp-btn-cancel md-button ng-hide" ng-click="picker.cancel()"> {{picker.params.cancelText}}</md-button>            <md-button class="dtp-btn-ok md-button" ng-click="picker.ok()"> {{picker.params.okText}}</md-button>      </md-dialog-actions></md-dialog>',controller:r,controllerAs:"picker",locals:l,openFrom:i,parent:angular.element(document.body),bindToController:!0,disableParentScroll:!1}).then(function(t){a.currentDate=t?t._d:t,c=!1},function(){c=!1})}})}}}]);var r=function(t,e,i){this.currentView=a.DATE,this._dialog=e,this.minDate,this.maxDate,this._attachedEvents=[],this.VIEWS=a,this.params={date:!0,time:!0,format:"YYYY-MM-DD",minDate:null,maxDate:null,currentDate:null,lang:i,weekStart:0,shortTime:!1,cancelText:"Cancel",okText:"OK",amText:"AM",pmText:"PM"},this.meridien="AM",this.params=angular.extend(this.params,this.options),this.init()};r.$inject=["$scope","$mdDialog","mdcDatetimePickerDefaultLocale"],r.prototype={init:function(){this.timeMode=this.params.time&&!this.params.date,this.dateMode=this.params.date,this.initDates(),this.start()},currentNearest5Minute:function(){var e=this.currentDate||t(),a=5*Math.round(e.minute()/5);return a>=60&&(a=55),t(e).minutes(a)},initDates:function(){var e=this,a=function(a,i){var r=null;if(angular.isDefined(a)&&null!==a&&""!==a)if(angular.isString(a))r=void 0!==e.params.format&&null!==e.params.format?t(a,e.params.format).locale(e.params.lang):t(a).locale(e.params.lang);else if(angular.isDate(a)){var n=a.getTime();r=t(n,"x").locale(e.params.lang)}else a._isAMomentObject&&(r=a);else r=i;return r};this.currentDate=a(this.params.currentDate,t()),this.minDate=a(this.params.minDate),this.maxDate=a(this.params.maxDate),this.selectDate(this.currentDate)},initDate:function(t){this.currentView=a.DATE},initHours:function(){this.currentView=a.HOUR},initMinutes:function(){this.currentView=a.MINUTE},isAfterMinDate:function(e,a,i){var r=!0;if(void 0!==this.minDate&&null!==this.minDate){var n=t(this.minDate),s=t(e);a||i||(n.hour(0),n.minute(0),s.hour(0),s.minute(0)),n.second(0),s.second(0),n.millisecond(0),s.millisecond(0),i?r=parseInt(s.format("X"))>=parseInt(n.format("X")):(s.minute(0),n.minute(0),r=parseInt(s.format("X"))>=parseInt(n.format("X")))}return r},isBeforeMaxDate:function(e,a,i){var r=!0;if(void 0!==this.maxDate&&null!==this.maxDate){var n=t(this.maxDate),s=t(e);a||i||(n.hour(0),n.minute(0),s.hour(0),s.minute(0)),n.second(0),s.second(0),n.millisecond(0),s.millisecond(0),i?r=parseInt(s.format("X"))<=parseInt(n.format("X")):(s.minute(0),n.minute(0),r=parseInt(s.format("X"))<=parseInt(n.format("X")))}return r},selectDate:function(e){e&&(this.currentDate=t(e),this.isAfterMinDate(this.currentDate)||(this.currentDate=t(this.minDate)),this.isBeforeMaxDate(this.currentDate)||(this.currentDate=t(this.maxDate)),this.currentDate.locale(this.params.lang),this.calendarStart=t(this.currentDate),this.meridien=this.currentDate.hour()>=12?"PM":"AM")},setName:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<5;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},isPM:function(){return"PM"===this.meridien},isPreviousMonthVisible:function(){return this.calendarStart&&this.isAfterMinDate(t(this.calendarStart).startOf("month"),!1,!1)},isNextMonthVisible:function(){return this.calendarStart&&this.isBeforeMaxDate(t(this.calendarStart).endOf("month"),!1,!1)},isPreviousYearVisible:function(){return this.calendarStart&&this.isAfterMinDate(t(this.calendarStart).startOf("year"),!1,!1)},isNextYearVisible:function(){return this.calendarStart&&this.isBeforeMaxDate(t(this.calendarStart).endOf("year"),!1,!1)},isHourAvailable:function(e){var a=t(this.currentDate);return a.hour(this.convertHours(e)).minute(0).second(0),this.isAfterMinDate(a,!0,!1)&&this.isBeforeMaxDate(a,!0,!1)},isMinuteAvailable:function(e){var a=t(this.currentDate);return a.minute(e).second(0),this.isAfterMinDate(a,!0,!0)&&this.isBeforeMaxDate(a,!0,!0)},start:function(){this.currentView=a.DATE,this.params.date?this.initDate():this.params.time&&this.initHours()},ok:function(){switch(this.currentView){case a.DATE:this.params.time===!0?this.initHours():this.hide(!0);break;case a.HOUR:this.initMinutes();break;case a.MINUTE:void 0!=this.minDate&&null!=this.minDate&&""!=this.minDate&&(this.isAfterMinDate(this.currentDate,!0,!0)||(this.currentDate=t(this.minDate))),this.hide(!0)}},cancel:function(){if(this.params.time)switch(this.currentView){case a.DATE:this.hide();break;case a.HOUR:this.params.date?this.initDate():this.hide();break;case a.MINUTE:this.initHours()}else this.hide()},selectMonthBefore:function(){this.calendarStart.subtract(1,"months")},selectMonthAfter:function(){this.calendarStart.add(1,"months")},selectYearBefore:function(){this.calendarStart.subtract(1,"years")},selectYearAfter:function(){this.calendarStart.add(1,"years")},selectAM:function(){(this.isHourAvailable(0)||this.isHourAvailable(12))&&(this.currentDate.hour()>=12&&this.selectDate(this.currentDate.subtract(12,"hours")),this.isHourAvailable(this.currentDate.hour())||this.selectDate(this.currentDate.hour(this.minDate.hour())),this.isMinuteAvailable(this.currentDate.minute())||this.selectDate(this.currentDate.minute(this.minDate.minute())))},selectPM:function(){(this.isHourAvailable(13)||this.isHourAvailable(24))&&(this.currentDate.hour()<12&&this.selectDate(this.currentDate.add(12,"hours")),this.isHourAvailable(this.currentDate.hour())||this.selectDate(this.currentDate.hour(this.maxDate.hour())),this.isMinuteAvailable(this.currentDate.minute())||this.selectDate(this.currentDate.minute(this.maxDate.minute())))},convertHours:function(t){var e=t;return t<12&&this.isPM()&&(e+=12),e},hide:function(t){t?this._dialog.hide(this.currentDate):this._dialog.cancel()}},angular.module(e).directive("mdcDatetimePickerCalendar",[function(){for(var e=(t(),1900),a=[],i=0;i<2412;i++)a.push(i);var r=function(t){var a=t.year(),i=t.month();return 12*(a-e)+i-1};return{restrict:"E",scope:{picker:"=",date:"="},bindToController:!0,controllerAs:"cal",controller:["$scope",function(i){for(var n=this,s=this.picker,c=[],o=s.params.weekStart;c.length<7;o++)o>6&&(o=0),c.push(o.toString());if(n.week=c,s.maxDate||s.minDate){var l=s.minDate?r(s.minDate):0,d=s.maxDate?r(s.maxDate)+1:2412;n.months=a.slice(l,d)}else n.months=a;n.getItemAtIndex=function(a){var i=(a+1)%12||12,r=e+Math.floor(a/12),n=t(s.currentDate).year(r).month(i);return u(n)},n.topIndex=r(s.currentDate)-n.months[0];var u=function(e){var a={};if(null!==e){a.name=e.format("MMMM YYYY");var i=t(e).locale(s.params.lang).startOf("month").hour(e.hour()).minute(e.minute()),r=i.format("d");a.days=[];for(var c=i.date();c<=i.daysInMonth();c++){if(c===i.date()){var o=n.week.indexOf(r.toString());if(o>0)for(var l=0;l<o;l++)a.days.push(0)}a.days.push(t(i).locale(s.params.lang).date(c))}for(var d=[],u=Math.ceil(a.days.length/7),m=0;m<u;m++)d.push(a.days.slice(7*m,7*(m+1)));return a.days=d,a}};n.toDay=function(e){return t(parseInt(e),"d").locale(s.params.lang).format("dd").substring(0,1)},n.isInRange=function(e){return s.isAfterMinDate(t(e),!1,!1)&&s.isBeforeMaxDate(t(e),!1,!1)},n.selectDate=function(e){if(e){if(n.isSelectedDay(e))return s.ok();s.selectDate(t(e).hour(n.date.hour()).minute(n.date.minute()))}},n.isSelectedDay=function(t){return t&&n.date.date()===t.date()&&n.date.month()===t.month()&&n.date.year()===t.year()}}],template:'<a ng-click="topindex=topindex-1" ng-hide="topindex==0">left</a><a ng-click="topindex=topindex+1" ng-hide="topindex==cal.months.length">right</a><md-virtual-repeat-container class="months" md-top-index="topindex" ng-init="i=0;topindex=0;"><div md-virtual-repeat="idx in cal.months" md-start-index="cal.topIndex" md-item-size="240" ><div mdc-datetime-picker-calendar-month idx="idx" ></div></div></md-virtual-repeat-container>'}}]).directive("mdcDatetimePickerCalendarMonth",["$compile",function(t){var e=function(e,a){var i=angular.element(e[0].querySelector("tbody")),r=a.cal,n=a.month;i.html(""),n.days.forEach(function(t,e){var a=angular.element("<tr></tr>");t.forEach(function(t,i){var n=angular.element("<td> </td>");if(t){var s;if(r.isInRange(t)){var c='month["days"]['+e+"]["+i+"]";s=angular.element("<a href='#' mdc-dtp-noclick></a>").attr("ng-class","{selected: cal.isSelectedDay("+c+")}").attr("ng-click","cal.selectDate("+c+")")}else s=angular.element("<span></span>");s.addClass("dtp-select-day").html(t.format("D")),n.append(s)}a.append(n)}),i.append(a)}),t(i)(a)};return{scope:{idx:"="},require:"^mdcDatetimePickerCalendar",restrict:"AE",template:'<div class="dtp-picker-month">{{month.name}}</div><table class="table dtp-picker-days">    <thead>    <tr>        <th ng-repeat="day in cal.week">{{cal.toDay(day)}}</th>    </tr>    </thead>    <tbody>    </tbody></table>',link:function(t,a,i,r){t.cal=r,t.month=r.getItemAtIndex(parseInt(t.idx)),e(a,t),t.$watch(function(){return t.idx},function(i,n){i!=n&&(t.month=r.getItemAtIndex(parseInt(t.idx)),e(a,t))})}}}]),angular.module(e).directive("mdcDtpNoclick",function(){return{link:function(t,e){e.on("click",function(t){t.preventDefault()})}}}),angular.module(e).directive("mdcDatetimePickerClock",[function(){return{restrict:"E",template:'<div class="dtp-picker-clock"><span ng-if="!points || points.length < 1">&nbsp;</span><div ng-repeat="point in points" class="dtp-picker-time" style="margin-left: {{point.left}}px; margin-top: {{point.top}}px;">   <a href="#" mdc-dtp-noclick ng-class="{selected: point.value===currentValue}" class="dtp-select-hour" ng-click="setTime(point.value)" ng-if="pointAvailable(point)">{{point.display}}</a>   <a href="#" mdc-dtp-noclick class="disabled dtp-select-hour" ng-if="!pointAvailable(point)">{{point.display}}</a></div><div class="dtp-hand dtp-hour-hand"></div><div class="dtp-hand dtp-minute-hand"></div><div class="dtp-clock-center"></div></div>',link:function(t,e,a){var r="minutes"===a.mode,n=t.picker,s=document.querySelector("md-dialog.dtp"),c=function(){var a=angular.element(e[0].querySelector(".dtp-picker-clock")),c=angular.element(s.querySelector(".dtp-picker")),l=s.querySelector(".dtp-content").offsetWidth,u=parseInt(i(c,"paddingLeft").replace("px",""))||0,m=parseInt(i(c,"paddingRight").replace("px",""))||0,h=parseInt(i(a,"marginLeft").replace("px",""))||0,p=parseInt(i(a,"marginRight").replace("px",""))||0,f=l-(h+p+u+m);a.css("width",f+"px");for(var D=parseInt(i(c,"paddingLeft").replace("px",""))||0,v=parseInt(i(c,"paddingTop").replace("px",""))||0,g=parseInt(i(a,"marginLeft").replace("px",""))||0,k=parseInt(i(a,"marginTop").replace("px",""))||0,M=f/2,x=M/1.2,y=[],b=0;b<12;++b){var A=x*Math.sin(2*Math.PI*(b/12)),T=x*Math.cos(2*Math.PI*(b/12)),I={left:M+A+D/2-(D+g),top:M-T-k/2-(v+k),value:r?5*b:b};r?I.display=I.value<10?"0"+I.value:I.value:n.params.shortTime?I.display=0===b?12:b:I.display=n.isPM()?b+12:b,y.push(I)}t.points=y,d(),a.css("height",f+"px");var S=e[0].querySelector(".dtp-clock-center"),w=S.offsetWidth/2||7.5,H=S.offsetHeight/2||7.5,P=M/1.8,E=M/1.5;angular.element(e[0].querySelector(".dtp-hour-hand")).css({left:M+1.5*g+"px",height:P+"px",marginTop:M-P-D+"px"}).addClass(r?"":"on"),angular.element(e[0].querySelector(".dtp-minute-hand")).css({left:M+1.5*g+"px",height:E+"px",marginTop:M-E-D+"px"}).addClass(r?"on":""),angular.element(S).css({left:M+D+g-w+"px",marginTop:M-g/2-H+"px"}),o()},o=function(){var t=n.currentNearest5Minute(),a=t.hour(),i=t.minute();l(angular.element(e[0].querySelector(".dtp-hour-hand")),30*a);var r=5*Math.round(i/5)*6;l(angular.element(e[0].querySelector(".dtp-minute-hand")),r)},l=function(t,e){angular.element(t).css({WebkitTransform:"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)"})},d=function(){var e=n.currentNearest5Minute();t.currentValue=r?e.minute():e.hour()%12};t.$watch(function(){var t=n.currentNearest5Minute();return t?t.format("HH:mm"):""},function(t){d(),o()});var u=function(t,e){for(var a=0;a<e.length;a++)e[a].display=a,t&&(e[a].display+=12);return e};n.params.shortTime||t.$watch("picker.meridien",function(){if(!r&&t.points){var e=u(n.isPM(),angular.copy(t.points));t.points=e}}),t.setTime=function(e){e===t.currentValue&&n.ok(),r?n.currentDate.minute(e):n.currentDate.hour(n.isPM()?e+12:e),n.currentDate.second(0)},t.pointAvailable=function(t){return r?n.isMinuteAvailable(t.value):n.isHourAvailable(t.value)};var m=t.$watch(function(){return e[0].querySelectorAll("div").length},function(){c(),m()})}}}])}(moment);