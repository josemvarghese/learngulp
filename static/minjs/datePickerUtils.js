angular.module("datePicker").factory("datePickerUtils",function(){"use strict";var t,e,n=function(e,n,r,u,i){var a=Date.UTC(0|e,0|n,0|r,0|u,0|i);return t?moment.tz(a,t):moment(a)};return{getVisibleMinutes:function(t,e){var r,u,i=t.year(),a=t.month(),o=t.date(),s=t.hours(),f=t.utcOffset()/60,c=[];for(u=0;u<60;u+=e)r=n(i,a,o,s-f,u),c.push(r);return c},getVisibleWeeks:function(t){t=moment(t);var n=t.year(),r=t.month();t.date(1);var u=t.day();t.date(e-(u+(e>=u?6:-1)));for(var i=[];i.length<6&&!(t.year()===n&&t.month()>r);)i.push(this.getDaysOfWeek(t)),t.add(7,"d");return i},getVisibleYears:function(t){var e=moment(t),r=e.year();e.year(r-r%10),r=e.year();for(var u,i,a=e.utcOffset()/60,o=[],s=0;s<12;s++)u=n(r,0,1,0-a),i=u.utcOffset()/60,i!==a&&(u=n(r,0,1,0-i),a=i),o.push(u),r++;return o},getDaysOfWeek:function(r){r=r?r:t?moment.tz(t).day(e):moment().day(e);for(var u,i,a=r.year(),o=r.month(),s=r.date(),f=[],c=r.utcOffset()/60,m=0;m<7;m++)u=n(a,o,s,0-c,0),i=u.utcOffset()/60,i!==c&&(u=n(a,o,s,0-i,0)),f.push(u),s++;return f},getVisibleMonths:function(t){for(var e,r,u=t.year(),i=t.utcOffset()/60,a=[],o=0;o<12;o++)e=n(u,o,1,0-i,0),r=e.utcOffset()/60,r!==i&&(e=n(u,o,1,0-r,0)),a.push(e);return a},getVisibleHours:function(t){var e,r,u,i=t.year(),a=t.month(),o=t.date(),s=[],f=t.utcOffset()/60;for(e=0;e<24;e++)r=n(i,a,o,e-f,0),u=r.utcOffset()/60,u!==f&&(r=n(i,a,o,e-u,0)),s.push(r);return s},isAfter:function(t,e){return t&&t.unix()>=e.unix()},isBefore:function(t,e){return t.unix()<=e.unix()},isSameYear:function(t,e){return t&&t.year()===e.year()},isSameMonth:function(t,e){return this.isSameYear(t,e)&&t.month()===e.month()},isSameDay:function(t,e){return this.isSameMonth(t,e)&&t.date()===e.date()},isSameHour:function(t,e){return this.isSameDay(t,e)&&t.hours()===e.hours()},isSameMinutes:function(t,e){return this.isSameHour(t,e)&&t.minutes()===e.minutes()},setParams:function(n,r){t=n,e=r},scopeSearch:function(t,e,n){var r,u,i=t,a=e.split("."),o=a.length;do{for(r=i=i.$parent,u=0;u<o;u++){r=r[a[u]]}if(r&&n(r))return r}while(i.$parent);return!1},findFunction:function(t,e){return this.scopeSearch(t,e,function(t){return angular.isFunction(t)})},findParam:function(t,e){return this.scopeSearch(t,e,function(){return!0})},createMoment:function(e){return t?moment.tz(e,t):moment.isMoment(e)?moment.unix(e.unix()):moment(e)},getDate:function(t,e,n){var r=!1;return e[n]&&(r=this.createMoment(e[n]),r.isValid()||(r=this.findParam(t,e[n]))&&(r=this.createMoment(r))),r},eventIsForPicker:function(t,e){return angular.isArray(t)&&t.indexOf(e)>-1||t===e}}});