var app=angular.module("yara",["vcRecaptcha","ngRoute","Image-Upload","YaraService","YaraDirective","Credentails","ngAnimate","ngAria","ngMaterialDatePicker","mdPickers","ngDroplet","ngLocalize","ngMap"]);app.value("localeConf",{basePath:"/static/dashboard/languages",fileExtension:".lang.json"}),app.config(function(e,t){t.defaults.useXDomain=!0,t.defaults.withCredentials=!0,t.interceptors.push(function(e){return{response:function(e){return null!=e.data&&void 0!=e.data.result&&4==e.data.result?(localStorage.clear(),sessionStorage.clear(),window.location="/session-timeout"):null==e.data||void 0==e.data.result||6!=e.data.result&&7!=e.data.result&&8!=e.data.result||(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",e.data.message),window.location="/session-timeout"),e},responseError:function(t){return null!=t.data&&void 0!=t.data.result&&4==t.data.result?(localStorage.clear(),sessionStorage.clear(),window.location="/session-timeout"):null==t.data||void 0==t.data.result||6!=t.data.result&&7!=t.data.result&&8!=t.data.result||(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",t.data.message),window.location="/session-timeout"),e.reject(t)}}})}),app.run(["$window","$anchorScroll",function(e,t){$("html, body").animate({scrollTop:0}),$(document).ready(function(){if($("body").append('<div id="ads" class="adsbygoogle facebook promote"></div>'),"none"==$("#ads").css("display")){var e='<div class="modal fade" id="myModal-test" tabindex="-1" data-backdrop="static"  role="dialog" aria-labelledby="myModalLabel">';e+='<div class="modal-dialog gatekeeper-popup" role="document" >',e+='<div class="modal-content modal-padding" >',e+='<div class="modal-header-top ">',e+='<h4 class="modal-title modal-heading" id="myModalLabel" >Blocker Enabled</h4>',e+="</div >",e+='<div class="modal-body1">',e+="<div>",e+='<div class="row">',e+='<div class="col-md-12 bg-collaborator text-center" >',e+="Disable the Ad Blocker and refresh the website.",e+="</div>",e+="</div>",e+="</div>",e+="</div> </div> </div></div></div>",$("body").append(e),$("#myModal-test").modal("show")}});var a,n,r,s=(navigator.appVersion,navigator.userAgent),o=navigator.appName,i=""+parseFloat(navigator.appVersion),l=parseInt(navigator.appVersion,10);(n=s.indexOf("OPR/"))!=-1?(o="Opera",i=s.substring(n+4)):(n=s.indexOf("Opera"))!=-1?(o="Opera",i=s.substring(n+6),(n=s.indexOf("Version"))!=-1&&(i=s.substring(n+8))):(n=s.indexOf("MSIE"))!=-1?(o="Microsoft Internet Explorer",i=s.substring(n+5)):(n=s.indexOf("Chrome"))!=-1?(o="Chrome",i=s.substring(n+7)):(n=s.indexOf("Safari"))!=-1?(o="Safari",i=s.substring(n+7),(n=s.indexOf("Version"))!=-1&&(i=s.substring(n+8))):(n=s.indexOf("Firefox"))!=-1?(o="Firefox",i=s.substring(n+8)):(a=s.lastIndexOf(" ")+1)<(n=s.lastIndexOf("/"))&&(o=s.substring(a,n),i=s.substring(n+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),(r=i.indexOf(";"))!=-1&&(i=i.substring(0,r)),(r=i.indexOf(" "))!=-1&&(i=i.substring(0,r)),l=parseInt(""+i,10),isNaN(l)&&(i=""+parseFloat(navigator.appVersion),l=parseInt(navigator.appVersion,10)),"Firefox"!=o&&"Safari"!=o&&"Chrome"!=o&&"Opera"!=o?window.location="/error":"Firefox"==o&&Number(l)<40?window.location="/error":"Safari"==o&&Number(l)<9?window.location="/error":"Chrome"==o&&Number(l)<45?window.location="/error":"Opera"==o&&Number(l)<35&&(window.location="/error"),screen.width<1024&&(window.location="/error"),navigator.userAgent.match(/android/i)&&(window.location="/error"),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(window.location="/error")}]),app.controller("EventCouponController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$mdpTimePicker","$document",function(e,t,a,n,r,s,o,i,l,d){function c(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[a],e[a]=n}return e}e.headerTitle="Coupons";var u=localStorage.getItem("selectedEventId");void 0===u||null===u?window.location.replace("/events"):(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Coupon");var m=s("date")(e.currentval.start_date,"yyyy-MM-dd"),p=s("date")(e.currentval.end_date,"yyyy-MM-dd");e.dayscount=o.dateDiffInDays(new Date(m),new Date(p)),e.dates=o.Dateslist(m,e.dayscount),e.selval=e.EXselval=e.dates[0],e.displaytime=e.expirytime=new Date(m),e.currentdate=new Date,e.s=o,e.subtitle="",e.changeSubtype=function(t){$(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show(),""==t?(e.subtitle=t,$(".subtitle").text("Select Type")):(e.subtitle=t,$(".subtitle").text(s("date")(t,"MMM dd, yyyy")),e.time=new Date(t))},$(document).on("click",".subtype_dropdown .primary_nav_wrap ul li",function(){$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret02"),$(".subtype_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),e.eDatetitle="",e.changeEDate=function(t){$(".eDate_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".eDatetitle").show(),""==t?(e.eDatetitle=t,$(".eDatetitle").text("Select Type")):(e.eDatetitle=t,$(".eDatetitle").text(s("date")(t,"MMM dd, yyyy")),e.Etime=new Date(t))},$(document).on("click",".eDate_dropdown .primary_nav_wrap ul li",function(){$(".eDate_dropdown img").removeClass(),$(".eDate_dropdown img").addClass("caret02"),$(".eDate_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),d.on("click",function(e){var t=$(".subtype_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret01")),(t=$(".eDate_dropdown .primary_nav_wrap ul li"))===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".eDate_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".eDate_dropdown img").removeClass(),$(".eDate_dropdown img").addClass("caret01"))}),e.getTickets=function(){i.getTickets(e.currentval.event_code).then(function(t){1==t.result?e.ticketlist=t.tickets:e.ticketlist=[]})},e.getFoodCoupon=function(){i.getFoodCoupon(e.currentval.event_code).then(function(t){e.FDdate=t.objects})},e.getCustomCoupon=function(){i.getCustomCoupon(e.currentval.event_code).then(function(t){e.CUSTdata=t.objects})},e.getFoodCoupon(),e.getCustomCoupon(),e.getUsers=function(){n({method:"GET",url:"../user_json"}).then(function(t){e.userlist=t.data,e.totalpages=e.numberOfPages()})},e.getUsers(),e.getTickets(),e.FDSession=new Array(e.dayscount);for(var g=0;g<e.FDSession.length;g++)e.FDSession[g]=[];e.foodselect=function(t,a){e.FDSession[t].indexOf(a)>=0?e.FDSession[t].splice(e.FDSession[t].indexOf(a),1):e.FDSession[t].push(a)},e.FDtickets=[],e.foodtickets=function(t){e.FDtickets.indexOf(t)>=0?e.FDtickets.splice(e.FDtickets.indexOf(t),1):e.FDtickets.push(t)},e.Custtickets=[],e.custtickets=function(t){e.Custtickets.indexOf(t)>=0?e.Custtickets.splice(e.Custtickets.indexOf(t),1):e.Custtickets.push(t)},e.Custusers=[],e.custusers=function(t){e.Custusers.indexOf(t)>=0?e.Custusers.splice(e.Custusers.indexOf(t),1):e.Custusers.push(t),v("")},e.currentPage=0,e.pageSize=10,e.numberOfPages=function(){return void 0!=e.userlist?Math.ceil(e.userlist.length/e.pageSize):1};var v=function(t){"selected"==t||"selected"==e.filterlist?(e.currentPage=0,e.totalpages=Math.ceil(e.Custusers.length/e.pageSize)):"unselected"==t||"unselected"==e.filterlist?(e.currentPage=0,e.totalpages=Math.ceil((e.userlist.length-e.Custusers.length)/e.pageSize)):(e.currentPage=0,e.totalpages=e.numberOfPages())};e.genRandom=function(){var t=c(e.getUserCodes());t=t.splice(0,e.rVal),e.Custusers=t},e.getUserCodes=function(){for(var t=[],a=0;a<e.userlist.length;a++)t.push(e.userlist[a].user_code);return t},e.$watchCollection("[filterlist,Custusers]",function(e){v(e[0])}),e.filteruser=function(t){return"selected"==e.filterlist?e.Custusers.indexOf(t.user_code)>=0:"unselected"!=e.filterlist||!(e.Custusers.indexOf(t.user_code)>=0)},e.selectval=function(t){e.selval=t;var a=new Date(t);a.setHours(e.displaytime.getHours()),a.setMinutes(e.displaytime.getMinutes()),e.displaytime=a,e.time=s("date")(a,"hh:mm a")},e.EXselectval=function(t){e.EXselval=t;var a=new Date(t);a.setHours(e.expirytime.getHours()),a.setMinutes(e.expirytime.getMinutes()),e.expirytime=a,e.EXtime=s("date")(a,"hh:mm a")},e.FoodCoupon=function(){var t;t=[];for(var a=0;a<e.FDSession.length;a++)if(e.FDSession[a].length>0){var n={};n.day=e.dates[a],n.breakfast=e.FDSession[a].indexOf("Breakfast")>=0,n.lunch=e.FDSession[a].indexOf("Lunch")>=0,n.coffe=e.FDSession[a].indexOf("Coffe")>=0,n.dinner=e.FDSession[a].indexOf("Dinner")>=0,t.push(n)}1==e.forAll&&(e.FDtickets=[]),console.log(t)},e.errorScroll=function(){e.CPform.$valid&&"ticket"==e.couponfor&&e.Custtickets.length<=0&&o.scrollJquery("ticketError"),e.CPform.$valid&&"users"==e.couponfor&&e.currentval.number_of_attendee<e.attende&&o.scrollJquery("attendeError")},e.CustCoupon=function(){var t=!1;"all"==e.couponfor?(t=!0,e.Custtickets=[],e.attende=0):"ticket"==e.couponfor?e.attende=0:e.Custtickets=[],n({method:"POST",url:a.url+"/custom_coupon/",data:{event_code:e.currentval.event_code,name:e.CPname,coupon_type:e.CPtype,description:e.CPdesc,display_time:s("date")(e.time,"yyyy-MM-dd HH:mm"),for_all:t,random:e.attende,ticket_codes:e.Custtickets,expiry_time:s("date")(e.Etime,"yyyy-MM-dd HH:mm")}}).then(function(e){console.log(e.data)})}}]),app.controller("EventVoteController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$document",function(e,t,a,n,r,s,o,i,l,d){e.headerTitle="Vote";var c=localStorage.getItem("selectedEventId");void 0===c||null===c?window.location.replace("/events"):(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Vote"),$,e.selectval=function(t){e.selval=t;var a=new Date(t),n=new Date;s("date")(a,"dd/MM/yyyy")!=s("date")(n,"dd/MM/yyyy")?(e.mintime=a,e.time=a):e.mintime=e.time=n};var u=s("date")(e.currentval.start_date,"yyyy-MM-dd"),m=s("date")(e.currentval.end_date,"yyyy-MM-dd");e.dayscount=o.dateDiffInDays(new Date(u),new Date(m)),e.dates=o.Dateslist(u,e.dayscount),e.days={},e.service=o,angular.forEach(e.dates,function(t){e.days[t]=e.currentval.days[t]}),e.SelDate="",e.selectDate=function(t){e.SelDate=t},e.voteData=[],e.Smart_delivery=!1,e.SD_show=!1,e.subtitle="",e.timeslots=[],e.time=moment().hours(0).minutes(0),e.changeSubtype=function(t){console.log(t),n.get("http://52.74.132.241:8082/api/yara/web/vote_time_slot/?event_code=76318").success(function(a){console.log(a),console.log(a.vote_time_slots),angular.forEach(a.vote_time_slots,function(a,n){console.log(n),n==t&&(console.log(a.slots),angular.forEach(a.slots,function(t,a){console.log(t,a),e.timeslots.push({time:a})}),console.log(e.timeslots))})}),$(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show(),""==t?(e.subtitle=t,$(".subtitle").text("Select Event Day")):(e.subtitle=t,$(".subtitle").text(s("date")(t,"MMM dd, yyyy")),e.time=moment(t).hours(0).minutes(0))},$(document).on("click",".subtype_dropdown .primary_nav_wrap ul li",function(){$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret02"),$(".subtype_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),d.on("click",function(e){var t=$(".subtype_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret01"))}),e.getVotes=function(){i.getVote(e.currentval.event_code).then(function(t){1==t.result&&(e.voteData=t.votes,e.Smart_delivery=t.smart_delivery,e.SD_show=t.show,l(function(){$(".progressbars").jprogress(),$(".progressbarsone").jprogress({background:"#FF2D55"})},500))})},e.getVotes(),e.vote_scope=e,e.vote_scope.optarray=[],e.optRequired=!0,e.$watch("vote_scope.optarray",function(t){if(t.length>0){var a=0;angular.forEach(t,function(e){void 0!=e&&""!=e&&null!=e&&a++}),e.optRequired=!(a>=3)}else e.optRequired=!0},!0),e.addopt=function(){e.opt=e.opt+1,e.optarray.push(e.opt)},e.errorScroll=function(){e.voteform.$valid&&e.optRequired&&o.scrollJquery("optionError")},e.addpoll=function(t){e.optvalues=[],angular.forEach(e.vote_scope.optarray,function(t){void 0!=t&&""!=t&&null!=t&&e.optvalues.push(t)}),e.displaytime="","time"==e.Dtype&&(console.log(e.time),e.displaytime=s("date")(e.time,"yyyy-MM-dd HH:mm")),n({method:"POST",url:a.url+"/vote/",data:{event_code:e.currentval.event_code,question:e.pollQues,options:e.optvalues,display_time:e.displaytime}}).then(function(t){1==t.data.result&&(e.pollQues="",e.submitted=!1,e.optvalues=[],e.vote_scope.optarray=[],e.vote=!1,e.getVotes())})}}]),app.filter("startFrom",function(){return function(e,t){return void 0==e||(t=+t,e.slice(t))}}),app.controller("TimelineController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$mdpDatePicker","$mdpTimePicker","$interval","$timeout",function(e,t,a,n,r,s,o,i,l,d,c,u){var m=localStorage.getItem("selectedEventId");void 0!==m&&null!==m||window.location.replace("/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.setTitle=function(t){document.title="YARA - "+e.currentval.short_name+" - "+t};var p=s("date")(e.currentval.start_date,"yyyy-MM-dd");s("date")(e.currentval.end_date,"yyyy-MM-dd");e.dates={},e.dayscount=Object.keys(e.currentval.days).length;var g=o.Dateslist(p,e.dayscount);e.service=o,angular.forEach(g,function(t){e.dates[t]=e.currentval.days[t]}),e.sessionData=[],e.exScope=e,i.getSession({event_code:e.currentval.event_code,bs:1}).then(function(t){e.sessionData=t.sessions.concat(t.break_sessions),console.log(e.sessionData)}),e.filterTime=function(t){var a=e.exScope.timedates[t.day].CurrtTime,n=moment(t.day+" "+a),r=moment(t.start_time),s=moment(t.end_time);return n>=r&&n<=s},e.ShowSession=function(t){e.CStarttime=t,e.CEndtime=t,e.CEndtime=new Date(e.CEndtime),e.CEndtime.setHours(e.CEndtime.getHours()+1);var a=e.dates[e.exScope.seltab].endtime;if((a=o.parseDTime(e.exScope.seltab+" "+a))<e.CEndtime){var n=Math.floor((a-e.CStarttime)/1e3/60);e.CEndtime=t,e.CEndtime=new Date(e.CEndtime),e.CEndtime.setMinutes(e.CEndtime.getMinutes()+n)}e.listSession=!0,e.exScope.timedates[moment(t).format("YYYY-MM-DD")].CurrtTime=moment(t).format("HH:mm");var r=s("filter")(s("filter")(e.sessionData,{day:e.exScope.seltab}),e.filterTime);void 0!=r&&r.length>0?e.exScope.SelSession[e.exScope.seltab]=r[0]:e.exScope.SelSession[e.exScope.seltab]={}},e.getTracks=function(){i.getTracks(e.currentval.event_code).then(function(t){1==t.result&&(e.tracks=t.tracks,console.log(e.tracks))})},e.selecttab=function(t){e.exScope.seltab=t,e.initSession()},e.currtab,e.dragStart=function(t){e.DragSession=t,e.currtab=e.exScope.seltab,console.log(e.DragSession)},e.SessionDrop=function(){e.exScope.seltab!=e.currtab&&(e.currtab=e.exScope.seltab,$("#session-change").modal("show"))},e.hover=function(t){e.exScope.seltab=t,e.initSession()},e.hoverleave=function(){e.exScope.seltab=e.currtab,console.log(e.currtab+"dragend")};var v=[];e.leavetab=function(){console.log("stop")},e.tabMovement=function(t){"go-right"==t?($(".slider").diyslider("move","forth"),e.dbutton=e.dbutton-1):(e.dbutton=e.dbutton+1,$(".slider").diyslider("move","back"))},e.movetab=function(t){v.push(c(function(){angular.element(document.querySelector("#"+t)).hasClass("over")?e.tabMovement(t):(angular.forEach(v,function(e,t){c.cancel(e),e=null}),console.log("stop"+e.dbutton))},500)),console.log("start"+e.dbutton)},e.timeline=function(t,a){var n,r=(o.Dateslist(t,a),new Date(t)),s=new Date(t),i=r.getDate()+"-"+(r.getMonth()+1)+"-"+r.getFullYear(),l=angular.fromJson(angular.toJson(e.currentval.days));angular.forEach(l,function(e,t){var a=new Date(t);a=a.getDate()+"-"+(a.getMonth()+1)+"-"+a.getFullYear(),i==a&&(n=e)});var d=n.starttime.split(" ");console.log(n.starttime);var c=d[0].split(":"),u=[],m={};r.setUTCHours(c[0]),r.setUTCMinutes(c[1]);var p=moment(r);m.CurrtTime=p.format("HH:mm");var g=n.endtime.split(" "),v=g[0].split(":");s.setUTCHours(v[0]),s.setUTCMinutes(v[1]);var f,y=moment.duration(moment(s).diff(moment(r))),S=y.asHours();if(S<0){var h=r;r=s,s=h,S*=-1}f=S>0&&S<=1?1:S>1&&S<=3?5:S>3&&S<=6?10:S>6&&S<=9?15:S>9&&S<=20?30:0;for(var k=new Date(r);k<=s;k.setMinutes(k.getMinutes()+1)){var b={};1==f?b.hoverclass="stuff01":5==f?b.hoverclass="stuff05":10==f?b.hoverclass="stuff10":15==f?b.hoverclass="stuff15":30==f?b.hoverclass="stuff30":0==f&&(b.hoverclass="stuff30"),k.getMinutes()%f==0||0==f&&0==k.getMinutes()?(b.show=!0,0==k.getMinutes()?b.class="bar1":30==k.getMinutes()?b.class="bar2":15==k.getMinutes()||45==k.getMinutes()?(b.class="bar3",5!=f&&1!=f||(b.class="bar4")):(b.class="bar4",1==f&&k.getMinutes()%5!=0&&(b.class="min"))):(b.show=!1,b.class=""),b.time=new Date(k),b.interval=f,u.push(b)}return m.hours=S,m.times=u,m},e.exScope.timedates={},angular.forEach(e.dates,function(t,a){e.exScope.timedates[a]=e.timeline(a,2)}),e.exScope.SelSession={},e.initSession=function(){e.CStarttime=o.parseDTime(e.exScope.seltab+" "+e.dates[e.exScope.seltab].starttime),e.CEndtime=o.parseDTime(e.exScope.seltab+" "+e.dates[e.exScope.seltab].starttime),e.CEndtime.setHours(e.CEndtime.getHours()+1);var t=e.dates[e.exScope.seltab].endtime;if((t=o.parseDTime(e.exScope.seltab+" "+t))<e.CEndtime){var a=Math.floor((t-e.CStarttime)/1e3/60);e.CEndtime=o.parseDTime(e.exScope.seltab+" "+e.dates[e.exScope.seltab].starttime),e.CEndtime.setMinutes(e.CEndtime.getMinutes()+a)}if(void 0==e.exScope.SelSession[e.exScope.seltab]){var n=s("filter")(s("filter")(e.sessionData,{date:e.exScope.seltab}),e.filterTime);n.length>0?e.exScope.SelSession[e.exScope.seltab]=n[0]:e.exScope.SelSession[e.exScope.seltab]={}}},e.SessionCrt=!1,e.createSession=function(t){e.CStime=t,e.CEtime=t,e.CEtime=new Date(e.CEtime),e.CEtime.setHours(e.CEtime.getHours()+1);var a=e.dates[e.exScope.seltab].endtime;if((a=o.parseDTime(e.exScope.seltab+" "+a))<e.CEtime){var n=Math.floor((a-e.CStarttime)/1e3/60);e.CEtime=t,e.CEtime=new Date(e.CEtime),e.CEtime.setMinutes(e.CEtime.getMinutes()+n)}e.cSession=function(t){var a={};a.day=e.exScope.seltab,a.Stime=e.CStime,a.Etime=e.CEtime,a.type=t,sessionStorage.setItem("CSession",angular.toJson(a)),window.location.replace("/event/schedule-session")},e.SessionCrt=!0,e.sessiontype="crtsession"},e.resetSession=function(t){e.Ctime="",e.SessionCrt=!1},e.setSession=function(t){e.exScope.SelSession[e.exScope.seltab]=t,e.listSession=!1}}]),app.controller("CreateTimelineCtrl",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$mdpTimePicker","$interval","$timeout","$document",function(e,t,a,n,r,s,o,i,l,d,c,u){var m=localStorage.getItem("selectedEventId");void 0!==m&&null!==m||window.location.replace("/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Schedule-Session";var p=s("date")(e.currentval.start_date,"yyyy-MM-dd");s("date")(e.currentval.end_date,"yyyy-MM-dd");e.dates={},e.dayscount=Object.keys(e.currentval.days).length;var g=o.Dateslist(p,e.dayscount);e.service=o,angular.forEach(g,function(t){e.currentval.days[t].day=t,e.dates[t]=e.currentval.days[t]}),e.EvtStart=o.parseDTime(p+" "+e.dates[p].starttime),e.EvtEnd=o.parseDTime(p+" "+e.dates[p].endtime),e.subtitle="";var v=sessionStorage.getItem("CSession");void 0!=v?(v=angular.fromJson(v),e.sesssionType=v.type,void 0!=v.day&&(e.subtitle=v.day,$(".subtitle").text(e.dates[v.day].day_name),"session"==e.sesssionType?(e.starttime=o.parseDTime(s("date")(v.Stime,"yyyy-MM-dd HH:mm")),e.endtime=o.parseDTime(s("date")(v.Etime,"yyyy-MM-dd HH:mm"))):(e.Bstarttime=o.parseDTime(s("date")(v.Stime,"yyyy-MM-dd HH:mm")),e.Bendtime=o.parseDTime(s("date")(v.Etime,"yyyy-MM-dd HH:mm"))),e.EvtStart=o.parseDTime(v.day+" "+e.dates[v.day].starttime),e.EvtEnd=o.parseDTime(v.day+" "+e.dates[v.day].endtime))):window.location.replace("timeline"),e.getTracks=function(){return i.getTracks(e.currentval.event_code).then(function(t){return 1==t.result&&(e.tracks=t.tracks,!0)})},e.checktrack=function(t){return t.days.indexOf(e.subtitle)>=0},e.SelDaysTrack=[],e.TrackDays=function(t){e.SelDaysTrack.indexOf(t)>=0?e.SelDaysTrack.splice(e.SelDaysTrack.indexOf(t),1):e.SelDaysTrack.push(t)},e.addtrack=function(t){n({method:"POST",url:a.url+"/track/",data:{event_code:e.currentval.event_code,name:e.trackname,days:e.SelDaysTrack}}).then(function(t){e.trackdata=t.data,console.log(e.trackdata),1==e.trackdata.result?(e.trackname="",e.SelDaysTrack=[],e.getTracks(),$("#add-new-track").modal("hide")):0==e.trackdata.result?(e.errormsgtrack=!0,e.data.error=e.trackdata.message):(console.log(t),e.errormsgtrack=!0,e.data.error=i.errorMsg[1])},function(t){e.trackdata={},console.log(t),e.errormsgtrack=!0,t.status==-1||null==t.data?e.trackdata.error=i.errorMsg[0]:e.trackdata.error=i.errorMsg[1]})},e.changeSubtype=function(t){$(".timeline-event-day .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show(),""==t?(e.subtitle=t,$(".subtitle").text("Select Event Day")):(e.subtitle=t.day,e.starttime=e.Bstarttime=o.parseDTime(t.day+" "+t.starttime),e.endtime=e.Bendtime=o.parseDTime(t.day+" "+t.starttime),e.EvtStart=o.parseDTime(t.day+" "+t.starttime),e.EvtEnd=o.parseDTime(t.day+" "+t.endtime),console.log(e.EvtEnd),$(".subtitle").text(t.day_name),e.tracktitle="",$(".tracktitle").text("Select Track"))},$(document).on("click",".timeline-event-day .primary_nav_wrap ul li",function(){$(".timeline-event-day img").removeClass(),$(".timeline-event-day img").addClass("caret02"),$(".timeline-event-day .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),u.on("click",function(e){var t=$(".timeline-event-day .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".timeline-event-day .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".timeline-event-day img").removeClass(),$(".timeline-event-day img").addClass("caret01"))}),e.tracktitle="",e.changeTrack=function(t){$(".timeline-event-track .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".tracktitle").show(),""==t?(e.tracktitle=t,$(".tracktitle").text("Select Track")):(e.tracktitle=t.track_code,$(".tracktitle").text(t.name))},$(document).on("click",".timeline-event-track .primary_nav_wrap ul li",function(){$(".timeline-event-track img").removeClass(),$(".timeline-event-track img").addClass("caret02"),$(".timeline-event-track .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),u.on("click",function(e){var t=$(".timeline-event-track .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||($(".timeline-event-track .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".timeline-event-track img").removeClass(),$(".timeline-event-track img").addClass("caret01"))}),e.speakertitle="",e.SelSpeaker=[],e.changeSpeaker=function(t,a,n){$(".timeline-speaker .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$("#"+a).show(),""==t?(e.speakertitle=t,$("#"+a).text("Search for Speakers")):(void 0!=e.SelSpeaker[n]?e.SelSpeaker[n]=t.speaker_code:e.SelSpeaker.push(t.speaker_code),e.speakertitle=t.speaker_code,$("#"+a).text(t.first_name+" "+t.middle_name+" "+t.last_name))},e.checkSpeaker=function(t){return!(e.SelSpeaker.indexOf(t.speaker_code)>=0)},u.on("click",function(e){var t=$(".timeline-speaker .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||($(".timeline-speaker .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".timeline-speaker img").removeClass(),$(".timeline-speaker img").addClass("caret01"))}),e.setValueSession=function(){var t={};t.day=e.subtitle,t.starttime=e.starttime,t.endtime=e.endtime,t.title=e.stitle,t.loc=e.sloc,t.track=e.tracktitle,t.desc=e.sDesc,sessionStorage.setItem("sessionVal",angular.toJson(t))},e.getValueSession=function(){var t=sessionStorage.getItem("sessionVal");if(void 0!=t&&null!=t&&""!=t){var a=angular.fromJson(t);if(""!=a.day&&(e.subtitle=a.day,$(".subtitle").html(e.dates[e.subtitle].day_name)),e.starttime=new Date(a.starttime),e.endtime=new Date(a.endtime),e.stitle=a.title,e.sloc=a.loc,""!=a.track){e.tracktitle=a.track;var n=s("filter")(e.tracks,{track_code:a.track});$(".tracktitle").html(n[0].name)}e.sDesc=a.desc}sessionStorage.setItem("sessionVal","")},e.getTracks().then(function(t){t&&e.getValueSession()}),e.getSpeakers=function(){e.peopledata=[],i.getSpeakers(e.currentval.event_code).then(function(t){1==t.result&&(e.SpkData=t.data)})},e.getSpeakers(),e.addSpeaker=function(){e.setValueSession(),sessionStorage.setItem("redirect","/event/schedule-session"),window.location.replace("/event/add-speaker")},e.createSession=function(){n({method:"POST",url:a.url+"/session/",data:{event_code:e.currentval.event_code,tittle:e.stitle,day:e.subtitle,start_time:s("date")(e.starttime,"yyyy-MM-dd")+" "+e.starttime.getUTCHours()+":"+e.starttime.getUTCMinutes(),end_time:s("date")(e.endtime,"yyyy-MM-dd")+" "+e.endtime.getUTCHours()+":"+e.endtime.getUTCMinutes(),location:e.sloc,speaker_description:e.sDesc,track:e.tracktitle,speakers:e.SelSpeaker}}).then(function(t){e.data=t.data,console.log(e.data),null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=i.errorMsg[1],console.log(e.data)):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):(console.log(e.data),window.location.replace("/schedule")),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},console.log(t),e.errormsg=!0,t.status==-1||null==t.data?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.breakType="",e.changeBreakType=function(t){$(".timeline-break-type .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".breakType").show(),""==t?(e.breakType=t,$(".breakType").text("Select Track")):(e.breakType=t,$(".breakType").text(t))},$(document).on("click",".timeline-break-type .primary_nav_wrap ul li",function(){$(".timeline-break-type img").removeClass(),$(".timeline-break-type img").addClass("caret02"),$(".timeline-break-type .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),u.on("click",function(e){var t=$(".timeline-break-type .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||($(".timeline-break-type .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".timeline-break-type img").removeClass(),$(".timeline-break-type img").addClass("caret01"))}),e.createBreakSession=function(){n({method:"POST",url:a.url+"/break_session/",data:{event_code:e.currentval.event_code,tittle:e.breakType,day:e.subtitle,start_time:e.Bstarttime.getUTCHours()+":"+e.Bstarttime.getUTCMinutes(),end_time:e.Bendtime.getUTCHours()+":"+e.Bendtime.getUTCMinutes(),location:e.BreakLoc,include_coupon:e.IncludeCP}}).then(function(t){e.data=t.data,console.log(e.data),null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=i.errorMsg[1],console.log(e.data)):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):console.log(e.data),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},console.log(t),e.errormsg=!0,t.status==-1||null==t.data?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})}}]);