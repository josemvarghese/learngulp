var app=angular.module("yara",["vcRecaptcha","ngRoute","Image-Upload","YaraService","YaraDirective","Credentails","ngDroplet","ngLocalize","infinite-scroll"]);app.value("localeConf",{basePath:"/static/dashboard/languages",fileExtension:".lang.json"}),app.directive("ngFocus",function(e){return{link:function(t,a,o){t.$watch(o.ngFocus,function(t){angular.isDefined(t)&&t&&e(function(){a[0].focus()})},!0),a.bind("blur",function(){angular.isDefined(o.ngFocusLost)&&t.$apply(o.ngFocusLost)})}}}),app.run(["$window","$anchorScroll","$rootScope","locale","YaraBaseUrl",function(e,t,a,o,r){if(["/reset-password"].indexOf(window.location.pathname)<0&&window.location.pathname.indexOf("/reset-password-app/")<0){var n,i,l,s=(navigator.appVersion,navigator.userAgent),c=navigator.appName,d=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10);s.indexOf("Edge")!=-1&&(c="Edge",window.location="/error"),(i=s.indexOf("OPR/"))!=-1?(c="Opera",d=s.substring(i+4)):(i=s.indexOf("Opera"))!=-1?(c="Opera",d=s.substring(i+6),(i=s.indexOf("Version"))!=-1&&(d=s.substring(i+8))):(i=s.indexOf("MSIE"))!=-1?(c="Microsoft Internet Explorer",d=s.substring(i+5)):(i=s.indexOf("Chrome"))!=-1?(c="Chrome",d=s.substring(i+7)):(i=s.indexOf("Safari"))!=-1?(c="Safari",d=s.substring(i+7),(i=s.indexOf("Version"))!=-1&&(d=s.substring(i+8))):(i=s.indexOf("Firefox"))!=-1?(c="Firefox",d=s.substring(i+8)):(n=s.lastIndexOf(" ")+1)<(i=s.lastIndexOf("/"))?(c=s.substring(n,i),d=s.substring(i+1),c.toLowerCase()==c.toUpperCase()&&(c=navigator.appName)):(i=s.indexOf("Edge"))!=-1&&(c="Edge"),(l=d.indexOf(";"))!=-1&&(d=d.substring(0,l)),(l=d.indexOf(" "))!=-1&&(d=d.substring(0,l)),m=parseInt(""+d,10),isNaN(m)&&(d=""+parseFloat(navigator.appVersion),m=parseInt(navigator.appVersion,10)),"Firefox"==c&&Number(m)<40?window.location="/error":"Safari"==c&&Number(m)<9?window.location="/error":"Chrome"==c&&Number(m)<45?window.location="/error":"Opera"==c&&Number(m)<35?window.location="/error":"Edge"==c&&(window.location="/error"),screen.width<1024&&(window.location="/error"),navigator.userAgent.match(/android/i)&&(window.location="/error"),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(window.location="/error")}a.browser=c,a.online=navigator.onLine,$("html, body").animate({scrollTop:0}),$('a[data-toggle="tab"]').on("click",function(){$("html, body").animate({scrollTop:0})}),function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox",document.body.appendChild(e),0===e.offsetHeight&&(window.location.href="content-blockers"),e.remove()}()}]),app.config(function(e,t){t.defaults.useXDomain=!0,t.defaults.withCredentials=!0;var a=function(e){if(1!=e.data.result&&0!=e.data.result){localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",e.data.message);var t={errorNum:"",heading:"",subHeading:e.data.message,description:""};localStorage.setItem("infoPageErrors",angular.toJson(t)),window.location="/info"}};t.interceptors.push(function(e){return{response:function(e){return null!=e.data&&void 0!=e.data.result&&4==e.data.result?(localStorage.clear(),sessionStorage.clear(),console.log("check 71"),window.location="/session-timeout"):null!=e.data&&void 0!=e.data.result&&14==e.data.result?(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",e.data.message),console.log(e),window.location="/app-account-signin"):null!=e.data&&void 0!=e.data.result&&a(e),e},responseError:function(t){return null==t.data||void 0==t.data.result?console.log("1"):null==t.data||void 0==t.data.result||6!=t.data.result&&7!=t.data.result&&8!=t.data.result?4==t.data.result&&(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",t.data.message),window.location="/session-timeout"):(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",t.data.message),console.log("4"),a(t)),e.reject(t)}}})}),app.config(function(e,t){t.defaults.useXDomain=!0,t.defaults.withCredentials=!0,t.interceptors.push(function(e){return{response:function(e){return null!=e.data&&void 0!=e.data.result&&4==e.data.result?(localStorage.clear(),sessionStorage.clear(),window.location="/session-timeout"):null==e.data||void 0==e.data.result||6!=e.data.result&&7!=e.data.result&&8!=e.data.result||(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",e.data.message),window.location="/session-timeout"),e},responseError:function(t){return null!=t.data&&void 0!=t.data.result&&4==t.data.result?(localStorage.clear(),sessionStorage.clear(),window.location="/session-timeout"):null==t.data||void 0==t.data.result||6!=t.data.result&&7!=t.data.result&&8!=t.data.result||(localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("authSession",t.data.message),window.location="/session-timeout"),e.reject(t)}}})}),app.controller("headerController",["$scope",function(e){e.url="templates/dashboard/pages/"}]),app.controller("LoginController",["$scope","$http","YaraBaseUrl","$location","GetDataService","$filter",function(e,t,a,o,r,n){e.getUser=function(){var e=localStorage.getItem("Logininfo");null!=(e=angular.fromJson(e))&&void 0!=e&&e.isloggedin&&(window.location="/dashboard")},e.getUser(),e.shownav=!1,e.key=a.captcha_key,e.wrong=0,$("#email").focus(),localStorage.setItem("itsruning",!0),sessionStorage.setItem("isavable",!0),e.login=function(o){o.$valid&&($("#loading").show(),e.data="waiting for data",e.errormsg=!1,t({method:"Post",url:a.url+"/signin/",data:{email:e.email,password:e.password}}).then(function(t){if(e.data=t.data,0==e.data.result||void 0==e.data.result)e.errormsg=!0,e.wrong=e.wrong+1,localStorage.setItem("Logininfo",JSON.stringify({isloggedin:!1})),e.shownav=!1,e.password="",$("#password").focus();else if(1==e.data.result){if(console.log(e.data),void 0==e.data.role||"Organizer"==e.data.role){localStorage.setItem("Logininfo",JSON.stringify({isloggedin:!0,access_key:e.data.access_key,token:e.data.token,interests:e.data.interests,created_at:new Date,role:e.data.role,privilege_level:e.data.privilege_level}));var a="dashboard";localStorage.setItem("dashboardUrl",a),window.location="/dashboard"}else if("Collaborator"==e.data.role){localStorage.setItem("Logininfo",JSON.stringify(e.data));var a="collaborator-dashboard";localStorage.setItem("dashboardUrl",a),window.location="/collaborator-dashboard"}else if("Sponsor"==e.data.role){localStorage.setItem("Logininfo",JSON.stringify(e.data));var a="showcase-dashboard";localStorage.setItem("dashboardUrl",a),window.location="/showcase-dashboard"}else if("Admin"==e.data.role){localStorage.setItem("Logininfo",JSON.stringify(e.data));var a="happyhelp-dashboard";localStorage.setItem("dashboardUrl",a),window.location="/happyhelp-dashboard"}e.shownav=!0}$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.password="",$("#password").focus(),e.errormsg=!0,e.shownav=!1,(t.status==-1||null==t.data)&&0==$rootScope.online?e.data.message=r.errorMsg[0]:e.data.message=r.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))}}]),app.controller("DashboardCtlr",["$scope","$http","$timeout","$document","vcRecaptchaService","YaraBaseUrl","APPService","GetDataService","$filter","$rootScope",function(e,t,a,o,r,n,i,l,s,c){"Admin"==l.getPrivilege()?e.privilege=!0:e.privilege=!1,e.currtuser={first_name:""},e.userlogintime=function(){e.hideWelcome=!1,l.getlogindetails().then(function(t){1==t.result&&(localStorage.setItem("checked_yara_navigation",t.checked_yara_navigation),$("#landingId").fadeToggle(500),a(function(){e.hideWelcome=!0},700))})},e.getUser=function(){l.getCurrtUser().then(function(t){if(1==t.result){e.currtuser=t.user_data,localStorage.setItem("is_time_format_24",e.currtuser.is_time_format_24),(void 0==e.currtuser||null==e.currtuser||""==e.currtuser||s("isEmpty")(e.currtuser)||"DISABLED"==e.currtuser.account_status)&&e.Logout();var a=e.currtuser.full_name;a=a.split(" "),a[0].length>=3?e.currtuser.first_name=a[0]:void 0!=a[1]&&null!=a[1]&&""!=a[1]?e.currtuser.first_name=a[1]:e.currtuser.first_name=a[0],localStorage.setItem("Logininfo",angular.toJson(e.currtuser));localStorage.setItem("dashboardUrl","dashboard"),1==e.currtuser.privilege?e.privilege=!0:e.privilege=!1}else e.Logout()})},e.getUser(),e.clearLocalStorage=function(){localStorage.removeItem("camImage"),localStorage.removeItem("editSession"),localStorage.removeItem("eventdayid"),localStorage.removeItem("eventsdata"),localStorage.removeItem("selEventsData"),localStorage.removeItem("selectedEventId"),localStorage.removeItem("sessId"),localStorage.removeItem("dcode"),localStorage.removeItem("ecode"),localStorage.removeItem("addressComp"),localStorage.removeItem("epData"),localStorage.removeItem("lat"),localStorage.removeItem("lng"),localStorage.removeItem("placeName"),localStorage.removeItem("redirectionInfo"),localStorage.removeItem("timeZone"),localStorage.removeItem("country"),localStorage.removeItem("phonInfo"),localStorage.removeItem("isEventPrvt"),localStorage.removeItem("tabid"),localStorage.removeItem("ticketTabinfo"),localStorage.removeItem("delegateIdinfo"),localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("spEdit"),localStorage.removeItem("eventReadyRedirection"),localStorage.removeItem("Addata"),localStorage.removeItem("slotInfo"),localStorage.removeItem("Addate"),localStorage.removeItem("Adtime"),localStorage.removeItem("ArcEventsData"),localStorage.removeItem("dechipereventsdata"),localStorage.removeItem("latandLong")},e.clearLocalStorage(),e.getnews=function(){l.getNewsevent().then(function(t){1==t.result&&(e.yaranews=t.yara_news)})},e.getnews(),void 0==localStorage.getItem("checked_yara_navigation")?e.userlogintime():e.hideWelcome=!0,e.Logout=function(){l.Signout().then(function(e){1==e.result&&(localStorage.clear(),window.location="/sign-in")})};var d=window.indexedDB.open("yaraDB9.db",1);d.onsuccess=function(t){e.db=t.target.result,e.clearDb()},d.onerror=function(e){},d.onupgradeneeded=function(t){e.db=t.target.result,e.db.createObjectStore("locInfo",{keyPath:"itemId"})},e.clearDb=function(){e.db.transaction(["locInfo"],"readwrite").objectStore("locInfo").clear().onsuccess=function(e){}},0==c.online&&alert("You are not connected to internet")}]),app.controller("AdminDashboardCtlr",["$scope","$http","$document","vcRecaptchaService","YaraBaseUrl","APPService","GetDataService","$filter","$rootScope",function(e,t,a,o,r,n,i,l,s){"Admin"==i.getPrivilege()?e.privilege=!0:e.privilege=!1,e.currtuser={first_name:""},e.getUser=function(){i.getCurrtUser().then(function(t){e.currtuser=t.user_data,localStorage.setItem("is_time_format_24",JSON.stringify(e.currtuser.is_time_format_24)),(void 0==e.currtuser||null==e.currtuser||""==e.currtuser||l("isEmpty")(e.currtuser)||"DISABLED"==e.currtuser.account_status)&&e.Logout();var a=e.currtuser.full_name;if(a=a.split(" "),a[0].length>=3?e.currtuser.first_name=a[0]:void 0!=a[1]&&null!=a[1]&&""!=a[1]?e.currtuser.first_name=a[1]:e.currtuser.first_name=a[0],void 0!=e.currtuser.company&&null!=e.currtuser.company&&""!=e.currtuser.company){if(!e.privilege){var o=JSON.parse(localStorage.getItem("Logininfo"));o.privilege_level="Admin",localStorage.setItem("Logininfo",angular.toJson(o))}e.privilege=!0}else e.privilege=!1})},e.getUser(),e.Logout=function(){i.Signout().then(function(e){1==e.result&&(localStorage.clear(),window.location="/sign-in")})},0==s.online&&alert("You are not connected to internet")}]),app.controller("AgreementController",["$scope","$http","$document","YaraBaseUrl","APPService","GetDataService","$rootScope",function(e,t,a,o,r,n,i){var l=sessionStorage.getItem("YaraId");if(void 0==l||""==l||null==l){var s=$("#verId").val();void 0!=s&&""!=s&&null!=s||window.location.replace("/sign-in")}e.signup=function(){if(e.agree){var a=$("#verId").val();void 0!=a&&""!=a&&null!=a?(sessionStorage.setItem("verId",$("#verId").val()),sessionStorage.setItem("emailId",$("#emailId").val()),window.location.replace("/sign-up-profile")):($("#loading").show(),t({method:"GET",url:o.url+"/agreement_okay/",params:{id:l}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg=!0,e.data.error=n.errorMsg[1]):0==e.data.result?(void 0!=e.data.admin&&null!=e.data.admin&&(e.adminemail=e.data.admin,e.adminname=e.data.name,e.admincompany=e.data.company,e.emailinvaite=e.email,$("#myModal-invite").modal("show")),e.errormsg=!0,e.data.error=e.data.message,e.isSignup=!0):(sessionStorage.setItem("YaraId",""),sessionStorage.setItem("YaraSent",e.data.message),window.location="/sign-up"),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,t.status==-1||null==t.data?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))}},0==i.online&&alert("You are not connected to internet")}]),app.controller("SignupController",["$scope","$http","$document","vcRecaptchaService","YaraBaseUrl","APPService","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){0==l.online&&alert("You are not connected to internet"),localStorage.removeItem("joininfo"),e.hideSignupform=!1,$("#email").focus(),e.title="Signup for Voris Identity",e.isSignup=!0,e.shownav=!1,e.key=r.captcha_key,e.adminemail="",e.emailinvaite="";var s=sessionStorage.getItem("YaraSent");if(void 0!=s&&null!=s&&""!=s){e.title=s,e.isSignup=!1,e.hideSignupform=!1,sessionStorage.setItem("YaraSent","");var c=sessionStorage.getItem("yaraemail");e.email=c,sessionStorage.clear()}e.signup=function(a){$("#loading").show(),e.adminemail="",e.emailinvaite="",e.adminname="",e.admincompany="",a.$valid&&(e.data="waiting for data",e.errormsg=!1,t({method:"POST",url:r.url+"/verify_email/",data:{source:"web",email:e.email}}).then(function(t){if(e.data=t.data,void 0==e.data.result||null==e.data.result)e.errormsg=!0,e.isSignup=!0,e.data.error=i.errorMsg[1];else if(0==e.data.result){if(void 0!=e.data.admin&&null!=e.data.admin){e.adminemail=e.data.admin,e.adminname=e.data.name,e.admincompany=e.data.company,e.emailinvaite=e.email;var a={adminemail:e.data.admin,adminname:e.data.name,admincompany:e.data.company,emailinvaite:e.email};localStorage.setItem("joininfo",angular.toJson(a)),window.location="/join-organization"}e.errormsg=!0,e.data.error=e.data.message,e.isSignup=!0,$("#loading").hide(),$("#container").fadeIn()}else 1==e.data.result&&(window.location="/agreement",sessionStorage.setItem("YaraId",e.data.id),sessionStorage.setItem("yaraemail",e.email))},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},e.requestAdmin=function(){e.hideSignupform=!1,$("#loading").show(),t({method:"POST",url:r.url+"/join_request/",data:{email:e.emailinvaite,admin:e.adminemail,name:e.adminname,company:e.admincompany}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg=!0,e.isSignup=!0,e.data.error=i.errorMsg[1]):1===e.data.result?(e.hideSignupform=!0,e.isSignup=!1):(e.errormsg=!0,e.data.error=e.data.message,e.isSignup=!0),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})}}]),app.controller("JoinOrganizationController",["$scope","$http","$document","vcRecaptchaService","YaraBaseUrl","APPService","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){0==l.online&&alert("You are not connected to internet"),void 0==angular.fromJson(localStorage.getItem("joininfo"))&&(window.location="/sign-up"),e.isSendrequest=!1,e.joininfo=angular.fromJson(localStorage.getItem("joininfo")),e.requestAdmin=function(){$("#loading").show(),t({method:"POST",url:r.url+"/join_request/",data:{email:e.joininfo.emailinvaite,admin:e.joininfo.adminemail,name:e.joininfo.adminname,company:e.joininfo.admincompany}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg=!0,e.isSignup=!0,e.data.error=i.errorMsg[1]):1===e.data.result?e.isSendrequest=!0:(e.errormsg=!0,e.data.error=e.data.message,e.isSignup=!0),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.redirecttoSignup=function(){localStorage.removeItem("joininfo"),window.location="/sign-up"},e.redirecttoYara=function(){localStorage.removeItem("joininfo"),window.location.href=r.yara}}]),app.controller("ReportBugController",["$scope","$http","$document","$filter","YaraBaseUrl","fileReader","$anchorScroll","$location","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l,s,c){document.title="YARA - Report Bug",e.Createbug=function(){$("#loading").show();var a=new FormData;a.append("issue_description",e.bugabt);var o=1;e.isContactable&&(o=0),a.append("contact_me",o),angular.forEach(e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID),function(e,t){a.append("screen_shot",e.file)}),0==e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID).length&&a.append("screen_shot",""),t({method:"POST",url:r.url+"/report_bug/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=s.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):($("#myModal-success").modal("show"),e.errormsg=!0,e.data.error=e.data.message,e.bugabt="",e.submitted=!1,e.isContactable=!0,angular.forEach(e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,t.status!=-1&&null!=t.data||0!=c.online?e.data.error=s.errorMsg[1]:e.data.error=s.errorMsg[0],$("#loading").hide(),$("#container").fadeIn()})},e.resetImg=function(){e.reportbug.screenPic.$invalid&&(angular.forEach(e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.reportbug.screenPic.$setValidity("minsizeval",!0))},e.$on("$dropletReady",function(){e.screenPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){var o=e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?e.reportbug.screenPic.$setValidity("minsizeval",!1):(n.readAsDataUrl(t.file,e).then(function(t){e.Imgsrc=t}),e.reportbug.screenPic.$setValidity("minsizeval",!0))})}),e.$on("$dropletFileDeleted",function(){e.screenPic.getFiles(e.screenPic.FILE_TYPES.VALID).length<=0&&(e.Imgsrc="")}),e.$on("$dropletError",function(){}),0==c.online&&alert("You are not connected to internet")}]),app.controller("Signuplevel2Controller",["$scope","$http","$document","$filter","YaraBaseUrl","fileReader","$anchorScroll","$location","GetDataService","$timeout","APPService","$rootScope",function(e,t,a,o,r,n,l,s,c,d,m,p){$("#pwd_id").focus(),e.errorscroll1=function(){d(function(){e.signup2Form.pwd.$invalid||e.signup2Form.cnfpwd.$invalid||(o("isEmpty")(e.country)||""==e.country?m.scrollJquery("country_dropdown"):e.states.length>0&&(o("isEmpty")(e.state)||""==e.state)&&m.scrollJquery("state_dropdown"))},100)},e.checkScocials=function(){var t=0;"company-website"==e.social_type&&7!=e.cmpyweb.length?t=1:"twitter"==e.social_type&&20!=e.cmpytwitter.length?t=1:"facebook"==e.social_type&&25!=e.cmpyfb.length?t=1:"linkedin"==e.social_type&&25!=e.cmpylink.length?t=1:"pinterest"==e.social_type&&26!=e.cmpypinterest.length?t=1:"tumblr"==e.social_type&&0!=e.cmpytumblr.length?t=1:"git-hub"==e.social_type&&19!=e.cmpygithub.length?t=1:"instagram"==e.social_type&&26!=e.cmpyinstagram.length&&(t=1);var a=c.getSocailId(e.social_type);1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.checkScocialDisabled=function(){var t=0;"company-website"==e.social_type&&e.Tcmpyweb.length>7?t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.Tcmpyweb)?1:0:"twitter"==e.social_type&&e.Tcmpytwitter.length>20?t=1:"facebook"==e.social_type&&e.Tcmpyfb.length>25?t=1:"linkedin"==e.social_type&&e.Tcmpylink.length>25?t=1:"pinterest"==e.social_type&&e.Tcmpypinterest.length>26?t=1:"tumblr"==e.social_type&&e.Tcmpytumblr.length>0?t=1:"git-hub"==e.social_type&&e.Tcmpygithub.length>19?t=1:"instagram"==e.social_type&&e.Tcmpyinstagram.length>26&&(t=1),e.isSocialSave=1==t},e.$watchCollection("[Tcmpyweb,Tcmpytwitter,Tcmpyfb,Tcmpylink,Tcmpypinterest,Tcmpytumblr,Tcmpygithub,Tcmpyinstagram]",function(t){e.checkScocialDisabled()}),e.getCountries=function(){e.countries=[],t({method:"GET",url:r.url+"/location_track/"}).then(function(t){e.countries=t.data.countries;var a=o("filter")(e.countries,t.data.country,!0);angular.forEach(a,function(a){t.data.country==a.name&&e.changeCountry(a,a.country_code)})})},e.getDialCode=function(){t({method:"GET",url:"/dial_code_json"}).then(function(t){e.dailcode=t.data})},e.country={},e.phDailCode="",e.phdialreq=!0,e.changeCountry=function(a,o){e.states=[],e.state="",$("#menutitlestate").text("Select State/Province"),$("#menutitlestatesearch").val(""),$("#country_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),e.statesearch="",e.phDailCode="",""==a?(a={},e.states=[],e.country=a,$("#menutitle").text("Select Country"),$("#menutitlesearch").val(""),e.countrysearch=""):(e.country=a,e.Addrline1="",e.Addrline2="",e.city="",e.pincode="",$("#menutitle").text(e.country.name),$("#menutitlesearch").val(e.country.name),t({method:"GET",url:r.url+"/location_track/",params:{country:a.name}}).then(function(t){e.states=t.data.occasions}),""==e.dailcode[o]?e.phdialreq=!1:e.phdialreq=!0,e.dailcode[o].indexOf("and")<0?e.phDailCode=e.dailcode[o]:e.phDailCode=e.dailcode[o].split("and")[0],""!=e.phDailCode&&e.phDailCode.indexOf("+")<0&&(e.phDailCode="+"+e.phDailCode),e.Addrline1="",e.Addrline2="",e.city="",e.pincode="")},e.states=[],e.state="",e.changeState=function(t){""==t?(t={},e.state=t,$("#menutitlestate").text("Select State/Province"),$("#menutitlestatesearch").val(""),e.statesearch=""):(e.state=t,$("#menutitlestate").text(e.state),$("#menutitlestatesearch").val(e.state)),e.Addrline1="",e.Addrline2="",e.city="",e.pincode="",$("#state_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100})},e.countrySearch=function(){return e.countrysearch},angular.element($("#country_dropdown #primary_nav_wrap ul li")).on("click",function(){$("#menutitlesearch").show(),$("#menutitle").hide(),$("#menutitlesearch").focus(),$("#country_dropdown img").removeClass(),$("#country_dropdown img").addClass("caret02"),$("#country_dropdown #primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),angular.element($("#state_dropdown #primary_nav_wrap ul li")).on("click",function(){$("#menutitlestatesearch").show(),$("#menutitlestate").hide(),$("#menutitlestatesearch").focus(),$("#state_dropdown img").removeClass(),$("#state_dropdown img").addClass("caret02"),$("#state_dropdown  #primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),a.on("click",function(t){var a=$("#country_dropdown #primary_nav_wrap ul li");a===t.target||a.has(t.target).length||"none"==$("#menutitlesearch").css("display")||($("#country_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$("#menutitlesearch").hide(),$("#menutitle").show(),"Select Country"!=$("#menutitle").text()&&($("#menutitlesearch").val($("#menutitle").text()),e.countrysearch=$("#menutitle").text(),e.countrydata=o("custom")(e.countries,e.countrysearch),e.$apply()),$("#menutitlesearch").trigger("input"),$("#country_dropdown img").removeClass(),$("#country_dropdown img").addClass("caret01"));var a=$("#state_dropdown #primary_nav_wrap ul li");a===t.target||a.has(t.target).length||"none"==$("#menutitlestatesearch").css("display")||($("#state_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$("#menutitlestatesearch").hide(),$("#menutitlestate").show(),"Select State/Province"!=$("#menutitlestate").text()&&($("#menutitlestatesearch").val($("#menutitlestate").text()),e.statesearch=$("#menutitlestate").text(),e.statedata=o("custom")(e.country,e.statesearch),e.$apply()),$("#state_dropdown img").removeClass(),$("#state_dropdown img").addClass("caret01"))}),e.getCountries(),e.getDialCode(),setTimeout(function(){e.cmpytumblr=e.Tcmpytumblr="",e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram},1e3),e.saveSocials=function(){e.typeofchange="save",e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpytumblr=e.Tcmpytumblr,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram,e.checkScocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange="",e.checkScocialDisabled(),setTimeout(function(){$("#"+e.social_type+"_id").focus();var t=$("#"+e.social_type+"_id").val().length;$("#"+e.social_type+"_id")[0].setSelectionRange(t,t)},1e3)}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(e.Tcmpyweb=e.cmpyweb,e.Tcmpyfb=e.cmpyfb,e.Tcmpytwitter=e.cmpytwitter,e.Tcmpylink=e.cmpylink,e.Tcmpypinterest=e.cmpypinterest,e.Tcmpytumblr=e.cmpytumblr,e.Tcmpygithub=e.cmpygithub,e.Tcmpyinstagram=e.cmpyinstagram,e.checkScocials())}),e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=c.dataURItoBlob(t);"cmpylogo"==e.cropType?(e.cmpyimageSrc=t,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})):"coverimg"==e.cropType?(e.imageSrc1=t,angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.file=a})):"profilePic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"cmpylogo"==e.cropType?(e.cmpyimageSrc="",angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})):"coverimg"==e.cropType?(e.imageSrc1="",angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.setType(4)})):"profilePic"==e.cropType&&(e.imageSrc="",angular.forEach(e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.cmpylogo.allowedExtensions(["png","jpg","jpeg"]),e.coverimg.allowedExtensions(["png","jpg","jpeg"]),e.profilePic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){e.lodinghide=!1,e.cropPic="";var o=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?(e.signup3Form.cmpylogo.$setValidity("minsizeval",!1),t.setType(4),e.cmpyimageSrc=""):(e.signup3Form.cmpylogo.$setValidity("minsizeval",!0),n.readAsDataUrl(t.file,e).then(function(a){c.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.signup3Form.cmpylogo.$setValidity("minDimension",!0),1024==o&&1024==r?e.cmpyimageSrc=a:(e.cropType="cmpylogo",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"),d(function(){e.lodinghide=!0},2e3))):(e.signup3Form.cmpylogo.$setValidity("minDimension",!1),t.setType(4),e.cmpyimageSrc=""),e.$apply()})}))}),o=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length,o>0&&angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?(e.signup3Form.coverimg.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc1=""):(e.signup3Form.coverimg.$setValidity("minsizeval",!0),n.readAsDataUrl(t.file,e).then(function(a){c.getImgDimensions(a,function(o,r){o>=2048&&r>=1024?(e.signup3Form.coverimg.$setValidity("minDimension",!0),2048==o&&1024==r?e.imageSrc1=a:(e.cropType="coverimg",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:500,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"),d(function(){e.lodinghide=!0},2e3))):(e.signup3Form.coverimg.$setValidity("minDimension",!1),t.setType(4),e.imageSrc1=""),e.$apply()})}))}),(o=e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID).length)>0&&angular.forEach(e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?(e.signup4Form.profilePic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.signup4Form.profilePic.$setValidity("minsizeval",!0),n.readAsDataUrl(t.file,e).then(function(a){c.getImgDimensions(a,function(o,r){o>=512&&r>=512?(e.signup4Form.profilePic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc=a:(e.cropPic="profile",e.cropType="profilePic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.05),$("#crop-image").modal("show"),d(function(){e.lodinghide=!0},2e3))):(e.signup4Form.profilePic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){var t=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;t<=0&&(e.cmpyimageSrc=""),t=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length,t<=0&&(e.imageSrc1=""),(t=e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID).length)<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.resetCoverimg=function(){if(e.signup3Form.coverimg.$invalid){e.signup3Form.coverimg.$setValidity("minsizeval",!0),e.signup3Form.coverimg.$setValidity("minDimension",!0),e.signup3Form.coverimg.$setValidity("ratioval",!0),e.imageSrc1="";e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length>0&&angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.setType(4)})}},e.resetProfilepic=function(){if(e.signup4Form.profilePic.$invalid){e.signup4Form.profilePic.$setValidity("minsizeval",!0),e.signup4Form.profilePic.$setValidity("minDimension",!0),e.signup4Form.profilePic.$setValidity("ratioval",!0),e.imageSrc1="";e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID).length>0&&angular.forEach(e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})}},l(),e.signuplevel2=function(t){e.nxtstep="signupstep2",l(0)},e.signuplevel3=function(t){e.nxtstep="signupstep3",l(0)},e.checkEvntLogo=function(t){e.signup3Form.cmpylogo.$invalid&&(e.signup3Form.cmpylogo.$setValidity("minsizeval",!0),e.signup3Form.cmpylogo.$setValidity("minDimension",!0),e.signup3Form.cmpylogo.$setValidity("ratioval",!0),e.cmpyimageSrc=""),d(function(){t.$invalid&&!e.cmpyimageSrc||t.$valid&&!e.cmpyimageSrc?m.scrollJquery("logo"):t.$invalid&&e.cmpyimageSrc&&m.scrollJquery("cmpyid")},100)},e.startsWith=function(e,t){return 0===(e+"").toLowerCase().indexOf(t.toLowerCase())},e.signuplevel4=function(a){var o=e.Pname.split(" ");e.middileName="",e.first_name="",
e.middle_name="",e.last_name="",e.middileNameMax=!1,e.lastNameMax=!1,e.firstNameMax=!1;var n=0;if(o[0].trim().length<=20)if(o[o.length-1].trim().length<=20){for(i=1;i<o.length-1;i++)""!=o[i]&&(e.middileName=e.middileName+" "+o[i].trim(),n+=o[i].trim().length);n<=30?(e.first_name=o[0].trim(),e.middle_name=e.middileName,e.last_name=o[o.length-1].trim()):(e.lastNameMax=!1,e.middileNameMax=!0,e.firstNameMax=!1)}else e.lastNameMax=!0,e.middileNameMax=!1,e.firstNameMax=!1;else e.firstNameMax=!0,e.lastNameMax=!1,e.middileNameMax=!1;$("#loading").show();var l=new FormData;l.append("email",$("#orgEmail").val()),l.append("verification_id",$("#verId").val()),l.append("password",e.pwd),l.append("company_name",e.cmpyTitle),l.append("company_email",e.companyEmail),l.append("company_phone",e.phDailCode+" "+e.cmpyphone),l.append("address_line1",e.Addrline1),null!=e.Addrline2&&void 0!=e.Addrline2||(e.Addrline2=""),l.append("address_line2",e.Addrline2),l.append("city",e.city),l.append("country",e.country.name),l.append("state",e.state),l.append("zip",e.pincode),l.append("about_company",e.cmpyabt),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){l.append("logo",e.file)}),angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){l.append("cover_image",e.file)});var n=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length;0==n&&l.append("cover_image","");var s=[{social_provider:"Website",link:e.cmpyweb},{social_provider:"Twitter",link:e.cmpytwitter},{social_provider:"Facebook",link:e.cmpyfb},{social_provider:"LinkedIn",link:e.cmpylink},{social_provider:"Pinterest",link:e.cmpypinterest},{social_provider:"Tumblr",link:"https://"+e.cmpytumblr+".tumblr.com"},{social_provider:"GitHub",link:e.cmpygithub},{social_provider:"Instagram",link:e.cmpyinstagram}];l.append("social_providers",angular.toJson(s)),angular.forEach(e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID),function(e,t){l.append("profile_picture",e.file)}),n=e.profilePic.getFiles(e.profilePic.FILE_TYPES.VALID).length,0==n&&l.append("profile_picture",""),l.append("first_name",e.first_name),l.append("middle_name",e.middle_name),l.append("last_name",e.last_name),l.append("designation",e.PDesg),e.data={},t({method:"POST",url:r.url+"/signup/",data:l,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=c.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):(localStorage.setItem("Logininfo",JSON.stringify({isloggedin:!0,access_key:e.data.access_key,token:e.data.token,interests:e.data.interests,created_at:new Date,privilege_level:"ADMIN"})),e.shownav=!0,window.location="/setup-timezone"),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==p.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},0==p.online&&alert("You are not connected to internet")}]),app.controller("Signuplevel3Controller",["$scope","$http","YaraBaseUrl","fileReader","$anchorScroll","$location","GetDataService","$rootScope",function(e,t,a,o,r,n,l,s){$("#pwd_id").focus(),r();var c=sessionStorage.getItem("verId");void 0!=c&&""!=c&&null!=c||(window.location="/sign-up");var d=sessionStorage.getItem("verId");$("#email").val(sessionStorage.getItem("emailId")),e.resetProfilepic=function(){if(e.signup3Form.pofilePic.$invalid){e.signup3Form.pofilePic.$setValidity("minsizeval",!0),e.signup3Form.pofilePic.$setValidity("minDimension",!0),e.signup3Form.pofilePic.$setValidity("ratioval",!0),e.imageSrc1="";e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length>0&&angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})}},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=l.dataURItoBlob(t);"profilePic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"profilePic"==e.cropType&&(e.imageSrc="",angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.pofilePic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){e.cropPic="";var r=e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(t,a){a!=r-1?t.setType(4):t.file.size>5242880?(e.signup3Form.pofilePic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.signup3Form.pofilePic.$setValidity("minsizeval",!0),o.readAsDataUrl(t.file,e).then(function(a){l.getImgDimensions(a,function(o,r){o>=512&&r>=512?(e.signup3Form.pofilePic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc=a:(e.cropPic="profile",e.cropType="profilePic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.05),$("#crop-image").modal("show"))):(e.signup3Form.pofilePic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.nameValidation=function(){if(void 0==e.Pname||""==e.Pname)return!0;var t=e.Pname.split(" ");e.middileName="",e.first_name="",e.middle_name="",e.last_name="",e.middileNameMax=!1,e.lastNameMax=!1,e.firstNameMax=!1,e.showMinwords=!1;var a=0;if(t.length<2)return e.showMinwords=!0,!0;if(!(t[0].trim().length<=20))return!1;if(!(t[t.length-1].trim().length<=20))return e.lastNameMax=!0,e.middileNameMax=!1,e.firstNameMax=!1,!0;for(i=1;i<t.length-1;i++)""!=t[i]&&(e.middileName=e.middileName+" "+t[i].trim(),a+=t[i].trim().length);if(!(a<=30))return e.lastNameMax=!1,e.middileNameMax=!0,e.firstNameMax=!1,!0;e.first_name=t[0].trim(),e.middle_name=e.middileName,e.last_name=t[t.length-1].trim()},e.Pname="",e.signupForm=function(){var o=0;$("#loading").show();var r=new FormData;r.append("verification_id",d),angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){r.append("profile_picture",e.file)}),o=e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length,0==o&&r.append("profile_picture",""),r.append("first_name",e.first_name),r.append("middle_name",e.middle_name),r.append("last_name",e.last_name),r.append("designation",e.PDesg),r.append("password",e.pwd),t({method:"POST",url:a.url+"/invitation_signup/",data:r,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=l.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):(sessionStorage.setItem("invitId",""),localStorage.setItem("Logininfo",JSON.stringify({isloggedin:!0,access_key:e.data.access_key,token:e.data.token,interests:e.data.interests,created_at:new Date,privilege_level:"Team Member"})),e.shownav=!0,window.location="/setup-timezone"),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==s.online?e.data.error=l.errorMsg[0]:e.data.error=l.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},0==s.online&&alert("You are not connected to internet")}]),app.controller("ForgotPWDController",["$scope","$http","YaraBaseUrl","vcRecaptchaService","$anchorScroll","GetDataService","$rootScope",function(e,t,a,o,r,n,i){r(),e.title="Reset your Voris Identity Password",e.isforgotpwd=!0,e.shownav=!1,e.errormsg=!1,$("#email").focus(),void 0==sessionStorage.getItem("data")&&sessionStorage.setItem("data","val"),e.key=a.captcha_key,e.forgotpwd=function(o){o.$valid&&($("#loading").show(),e.data="waiting for data",e.errormsg=!1,t({method:"POST",url:a.url+"/forgot_password/",data:{email:e.email}}).then(function(t){e.data=t.data,void 0==e.data.result&&(e.errormsg=!0,e.data.error=n.errorMsg[1]),0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):(e.title="Reset password invitation send",e.isforgotpwd=!1),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==i.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},0==i.online&&alert("You are not connected to internet")}]),app.controller("ForgotPWD1Controller",["$scope","$http","YaraBaseUrl","GetDataService","$rootScope",function(e,t,a,o,r){e.isforgotpwd=!0,e.errormsg=!1,$("#pwd_id").focus(),e.resetpwd=function(n){n.$valid&&($("#loading").show(),e.data="waiting for data",e.errormsg=!1,t({method:"POST",url:a.url+"/forgot_password/",data:{token:$("#forgotToken").val(),new:e.pwd,confirm:e.cnfpwd}}).then(function(t){e.data=t.data,void 0==e.data.result&&(e.errormsg=!0,e.data.error=o.errorMsg[1]),0==e.data.result&&(e.errormsg=!0,e.data.error=e.data.message),1==e.data.result&&(window.location="/sign-in"),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==r.online?e.data.error=o.errorMsg[0]:e.data.error=o.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},0==r.online&&alert("You are not connected to internet")}]),app.controller("APPResetPWDCtrl",["$scope","$http","YaraBaseUrl","GetDataService","$rootScope",function(e,t,a,o,r){e.is_reset=!1,e.isforgotpwd=!0,e.errormsg=!1,$("#pwd_id").focus(),e.resetpwd=function(n){n.$valid&&($("#loading").show(),e.data="waiting for data",e.errormsg=!1,t({method:"POST",url:a.url.replace("web","app")+"/forgot_password/",data:{token:$("#forgotToken").val(),new:e.pwd,confirm:e.cnfpwd}}).then(function(t){e.data=t.data,void 0==e.data.result&&(e.errormsg=!0,e.data.error=o.errorMsg[1]),0==e.data.result&&(e.errormsg=!0,e.data.error=e.data.message),1==e.data.result&&(e.is_reset=!0),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==r.online?e.data.error=o.errorMsg[0]:e.data.error=o.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},0==r.online&&alert("You are not connected to internet")}]),app.controller("EventPackageController",["$scope","APPService","YaraBaseUrl","$http","$location","GetDataService","$rootScope",function(e,t,a,o,r,n,i){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,document.title="YARA - Packages",e.Packageslist=[],n.getEventPackage().then(function(t){$("#loading").show(),1==t.result&&(e.Packageslist=t.event_packages,e.userOffset=t.uo,$("#loading").hide(),$("#container").fadeIn())}),e.setOffset=function(t){return n.userOffsetTime(t,e.userOffset)},e.service=t,e.getExpiredDate=function(t){var a=e.setOffset(t);return a.setMonth(a.getMonth()+5),a},e.createEvent=function(t){localStorage.removeItem("selEventsData"),localStorage.removeItem("selectedEventId"),$("#loading").show();var a=window.indexedDB.open("yaraDB9.db",1);a.onsuccess=function(t){e.db=t.target.result,e.clearDb()},a.onerror=function(e){console.log("error")},a.onupgradeneeded=function(t){e.db=t.target.result,e.db.createObjectStore("locInfo",{keyPath:"itemId"})};var o={locPlace:!1,locManual:!1,eventInfo:!1,eventDetails:!1,eventConfirm:!1,eventReady:!1,eventTrack:!1,eventPromo:!1,eventGk:!1,eventPin:!1,editlocPlace:!1,locmanualPlace:!1,editeventInfo:!1,editeventDetails:!1};localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("epData",'{"ep_code":"'+t+'"}'),$("#loading").hide(),$("#container").fadeIn()},e.clearDb=function(){e.db.transaction(["locInfo"],"readwrite").objectStore("locInfo").clear().onsuccess=function(e){window.location="/create-event-location"}},0==i.online&&alert("You are not connected to internet")}]),app.controller("NewEventController",["$scope","APPService","YaraBaseUrl","$http","$location","GetDataService","$rootScope",function(e,t,a,o,r,n,i){n.getEventPackage().then(function(t){$("#loading").show(),1==t.result&&(e.Packageslist=t.event_packages,$("#loading").hide(),$("#container").fadeIn())}),e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.service=t,e.createEvent=function(t){localStorage.removeItem("selEventsData"),localStorage.removeItem("selectedEventId");var a={locPlace:!1,locManual:!1,eventInfo:!1,eventDetails:!1,eventConfirm:!1,eventReady:!1,eventTrack:!1,eventPromo:!1,eventGk:!1,eventPin:!1,editlocPlace:!1,locmanualPlace:!1,editeventInfo:!1,editeventDetails:!1},o=window.indexedDB.open("yaraDB9.db",1);o.onsuccess=function(t){e.db=t.target.result,e.clearDb()},o.onerror=function(e){console.log("error")},o.onupgradeneeded=function(t){e.db=t.target.result,e.db.createObjectStore("locInfo",{keyPath:"itemId"})},localStorage.setItem("redirectionInfo",angular.toJson(a)),localStorage.setItem("epData",'{"ep_code":"'+t+'"}')},e.clearDb=function(){e.db.transaction(["locInfo"],"readwrite").objectStore("locInfo").clear().onsuccess=function(e){window.location="/create-event-location"}},e.yaraKey=function(){$("#loading").show(),e.errorMsg="",e.invalid=!1,19===e.yarakey.length?o({method:"POST",url:a.url+"/ep_activation/",data:{ep_code:e.yarakey}}).then(function(t){1==t.data.result?window.location="/packages":0==t.data.result?($("#loading").hide(),$("#container").fadeIn(),e.wrongKey=!0,e.errorMsg=t.data.message,$("#myModal-invalid").modal("show")):t.data.result==-1&&(0==i.online?0==i.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1]:e.errorMsg=n.errorMsg[1])}):(e.invalid=!0,$("#loading").hide(),$("#container").fadeIn(),$("#myModal-invalid").modal("show"))},e.transferPackage=function(t){for(var a=0;a<e.Packageslist.length;a++)if(e.Packageslist[a].ep_code==t){sessionStorage.setItem("selTransfPack",angular.toJson(e.Packageslist[a]));break}window.location="/transfer_package"},0==i.online&&alert("You are not connected to internet")}]),app.controller("TransferController",["$scope","APPService","YaraBaseUrl","$http","$location","GetDataService","$rootScope",function(e,t,a,o,r,n,i){void 0!=sessionStorage.getItem("selTransfPack")?(e.EPdata=sessionStorage.getItem("selTransfPack"),e.EPdata=angular.fromJson(e.EPdata)):window.location="/new_event",e.packageTransfer=function(){e.successStatus=!1,e.errorStatus=!1,o({method:"POST",url:a.url+"/ep_transfer/",data:{ep_code:e.EPdata.ep_code,recipient_email:e.recpEmail}}).then(function(t){0==t.data.result?(e.errorStatus=!0,e.msg=t.data.message):(e.successStatus=!1,e.msg=t.data.message)})},0==i.online&&alert("You are not connected to internet")}]),app.controller("BespokeController",["$scope","APPService","YaraBaseUrl","$http","$location","$anchorScroll","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){e.BespokeCreate=function(){$("#loading").show(),o({method:"POST",url:a.url+"/bespoke/",data:{full_name:e.BespokeName,email:e.BeEmail,phone_number:e.BePhone,company_name:e.BeCmpy,event_name:e.BeEvent}}).then(function(t){e.data=t.data,1==e.data.result?(e.bespoke=!1,e.errormsg=!1):(e.errormsg=!0,e.data.error=e.data.message),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},0==l.online&&alert("You are not connected to internet")}]),app.controller("BuyNewEventController",["$scope","APPService","YaraBaseUrl","$http","$location","$anchorScroll","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){e.eventtypes=t.typedata,e.selectedval=0,e.DelegatesNum=0,e.price=1.99,e.bespoke=!1,e.minmsg=!1,e.bespoke_redirect=!1,e.selectedtype=function(t){e.selectedval=t},e.errormsg=!1,document.title="YARA - Buy Event",e.getPriceDetails=function(){e.errormsg=!1,e.minmsg=!1,e.bespoke_redirect=!1,null!=e.DelegatesNum&&void 0!=e.DelegatesNum&&""!=e.DelegatesNum||(e.minmsg=!0),""!=e.DelegatesNum&&null!=e.DelegatesNum&&void 0!=e.DelegatesNum?($("#countId").val(e.DelegatesNum),e.Dprice=!1,$("#loading").show(),o({method:"POST",url:a.url+"/package_price/",data:{count:e.DelegatesNum}}).then(function(t){e.data=t.data,1==e.data.result?(e.bespoke_redirect=e.data.bespoke_redirect,e.data.bespoke_redirect?window.location="/bespoke":(e.Dprice_att=e.data.price,e.Dcurr=e.data.symbol,e.Dtax=e.data.tax,e.Dtotal=e.Dtax+e.Dprice_att,e.Dprice=!0,$("#loading").hide(),$("#container").fadeIn())):0==e.data.result&&(e.errormsg=!0,e.data.error=e.data.message,$("#loading").hide(),$("#container").fadeIn())},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})):Number(e.DelegatesNum)>=e.maxDelegateno?(e.Dprice=!1,e.Dprice_att=0,e.Dcurr="",e.Dtax=0,e.Dtotal=0):""===e.DelegatesNum&&(e.minmsg=!0)},e.checkOut=function(){o({method:"POST",url:"/checkout/",data:{count:e.DelegatesNum,item:1}}).then(function(e){},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.checkEmpty=function(t){e.minmsg=!1,(null==e.DelegatesNum||void 0==e.DelegatesNum||""==e.DelegatesNum||t<50)&&(e.minmsg=!0)},e.$watch("DelegatesNum",function(t,a){void 0!=t&&void 0!=a&&(e.Dprice=!1,e.bespoke_redirect=!1)}),0==l.online&&alert("You are not connected to internet")}]),app.filter("rangeval",function(){return function(e,t){t=parseInt(t);for(var a=1;a<=t;a++)e.push(a);return e}}),app.controller("TopupController",["$scope","APPService","fileReader","$location","$anchorScroll","$timeout","$http","YaraBaseUrl","$filter","GetDataService","$document","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d,m){"Admin"==c.getPrivilege(9)?e.privilege=!0:e.privilege=!1;var p=localStorage.getItem("selectedEventId");e.eventcode=p,void 0!==p&&null!==p&&e.privilege||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.currentval.number_of_attendee=0,c.getPackage(e.currentval.event_code).then(function(t){1==t.result&&(e.currentval.number_of_attendee=t.event_packages.number_of_attendee)}),e.maincall=function(t){e.delcount=t,t>24&&(e.showMincount=!1)},e.getPriceDetails=function(t){e.errStatus=!1,e.showMincount=!1,""!=e.delegateCount&&null!=e.delegateCount&&void 0!=e.delegateCount&&t>24?($("#loading").show(),$("#countId").val(e.delegateCount),i({method:"POST",url:l.url+"/topup_price/",data:{count:e.delegateCount}}).then(function(t){e.data=t.data,1==e.data.result?(e.Dprice=!0,e.Dprice_att=e.data.price,e.Dcurr=e.data.symbol,e.Dtax=e.data.tax,e.Dtotal=e.data.tax+e.Dprice_att,e.topup02=!0,e.pkgInfo=!1):0==e.data.result&&(e.errStatus=!0,e.errorMsg=e.data.message),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errStatus=!0,e.pkgInfo=!0,(t.status==-1||null==t.data)&&0==m.online?e.errorMsg=c.errorMsg[0]:e.errorMsg=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})):(e.showMincount=!0,e.pkgInfo=!0)}}]),app.controller("AccountController",["$scope","APPService","fileReader","$location","$anchorScroll","$timeout","$http","YaraBaseUrl","$filter","GetDataService","$document","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d,m){function p(e){$(e).css({height:"auto","overflow-y":"hidden"}).height(e.scrollHeight)}"Admin"==c.getPrivilege(8)?e.privilege=!0:e.privilege=!1,e.getCountries=function(){e.countries=[],i({method:"GET",url:l.url+"/location_track/"}).then(function(t){null!=t.data&&void 0!=t.data&&(e.countries=t.data.countries)})},e.getDialCode=function(){i({method:"GET",url:"/dial_code_json"}).then(function(t){e.dailcode=t.data})},e.country={},e.phDailCode="",e.phdialreq=!0,e.startsWith=function(e,t){return 0===(e+"").toLowerCase().indexOf(t.toLowerCase())},e.changeCountry=function(t,a){e.states=[],e.state="",$("#menutitlestate").text("Select State/Province"),$("#menutitlestatesearch").val(""),e.Addrline1="",e.Addrline2="",e.city="",e.pincode="",$("#country_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),e.statesearch="",e.phDailCode="",""==t?(t={},e.states=[],e.country=t,$("#menutitle").text("Select Country"),$("#menutitlesearch").val(""),e.countrysearch=""):(e.country=t,i({method:"GET",url:l.url+"/location_track/",params:{country:t.name}}).then(function(t){e.states=t.data.occasions}),$("#menutitle").text(e.country.name),$("#menutitlesearch").val(e.country.name),""==e.dailcode[a]?e.phdialreq=!1:e.phdialreq=!0,e.dailcode[a].indexOf("and")<0?e.phDailCode=e.dailcode[a]:e.phDailCode=e.dailcode[a].split("and")[0],""!=e.phDailCode&&e.phDailCode.indexOf("+")<0&&(e.phDailCode="+"+e.phDailCode))},e.state={},e.changeState=function(t){""==t?(t={},e.state=t,$("#menutitlestate").text("Select State/Province"),$("#menutitlestatesearch").val(""),e.statesearch=""):(e.state=t,$("#menutitlestate").text(e.state),$("#menutitlestatesearch").val(e.state)),e.Addrline1="",e.Addrline2="",e.city="",e.pincode="",$("#state_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100})},e.countrySearch=function(){return e.countrysearch},angular.element($("#country_dropdown #primary_nav_wrap ul li")).on("click",function(){$("#menutitlesearch").show(),$("#menutitle").hide(),$("#menutitlesearch").focus(),$("#country_dropdown img").removeClass(),$("#country_dropdown img").addClass("caret02"),$("#country_dropdown #primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),angular.element($("#state_dropdown #primary_nav_wrap ul li")).on("click",function(){$("#menutitlestatesearch").show(),$("#menutitlestate").hide(),$("#menutitlestatesearch").focus(),$("#state_dropdown img").removeClass(),$("#state_dropdown img").addClass("caret02"),$("#state_dropdown  #primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),d.on("click",function(t){var a=$("#country_dropdown #primary_nav_wrap ul li");a===t.target||a.has(t.target).length||"none"==$("#menutitlesearch").css("display")||($("#country_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$("#menutitlesearch").hide(),$("#menutitle").show(),"Select Country"!=$("#menutitle").text()&&($("#menutitlesearch").val($("#menutitle").text()),e.countrysearch=$("#menutitle").text(),e.countrydata=s("custom")(e.countries,e.countrysearch),e.$apply()),$("#menutitlesearch").trigger("input"),$("#country_dropdown img").removeClass(),$("#country_dropdown img").addClass("caret01"));var a=$("#state_dropdown #primary_nav_wrap ul li");a===t.target||a.has(t.target).length||"none"==$("#menutitlestatesearch").css("display")||($("#state_dropdown #primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$("#menutitlestatesearch").hide(),$("#menutitlestate").show(),"Select State/Province"!=$("#menutitlestate").text()&&($("#menutitlestatesearch").val($("#menutitlestate").text()),e.statesearch=$("#menutitlestate").text(),e.statedata=s("custom")(e.states,e.statesearch),e.$apply()),$("#state_dropdown img").removeClass(),$("#state_dropdown img").addClass("caret01"))}),e.getCountries(),e.getDialCode(),e.setCurrentVal=function(){if(void 0!=e.currtuser&&(e.pname=e.currtuser.full_name,e.PDesg=e.currtuser.designation,e.imageSrc=e.currtuser.profile_picture,e.privilege)){e.cmpyimageSrc=e.currtuser.company.logo,e.imageSrc1=e.currtuser.company.cover_image,e.cmpyabt=e.currtuser.company.description,e.cmpyweb=e.Tcmpyweb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpyfb=e.Tcmpyfb,e.cmpytumblr=e.Tcmpytumblr,e.cmpyinstagram=e.Tcmpyinstagram,e.cmpygithub=e.Tcmpygithub,e.cmpypinterest=e.Tcmpypinterest,angular.forEach(e.currtuser.company.social_providers,function(t){"Website"==t.social_provider?e.Tcmpyweb=e.cmpyweb=t.link:"Twitter"==t.social_provider?e.Tcmpytwitter=e.cmpytwitter=t.link:"LinkedIn"==t.social_provider?e.Tcmpylink=e.cmpylink=t.link:"Facebook"==t.social_provider?e.Tcmpyfb=e.cmpyfb=t.link:"Pinterest"==t.social_provider?e.Tcmpypinterest=e.cmpypinterest=t.link:"GitHub"==t.social_provider?e.Tcmpygithub=e.cmpygithub=t.link:"Instagram"==t.social_provider?e.Tcmpyinstagram=e.cmpyinstagram=t.link:"Tumblr"==t.social_provider&&(e.Tcmpytumblr=e.cmpytumblr=t.link.replace("https://","").replace(".tumblr.com",""))});for(var t=["company-website","twitter","facebook","linkedin","pinterest","tumblr","git-hub","instagram"],a=0;a<t.length;a++)e.social_type=t[a],e.checkScocials();e.social_type="",e.country.name=e.currtuser.company.country,e.countrysearch=e.currtuser.company.country,i({method:"GET",url:l.url+"/location_track/",params:{country:e.country.name}}).then(function(t){e.states=t.data.occasions}),e.state=e.currtuser.company.state,$("#menutitle").text(e.currtuser.company.country),$("#menutitlesearch").val(e.currtuser.company.country),$("#menutitlestate").text(e.currtuser.company.state),$("#menutitlestatesearch").val(e.currtuser.company.state),e.statesearch=$("#menutitlestate").text(),e.statedata=s("custom")(e.states,e.statesearch),e.Addrline1=e.currtuser.company.address_line1,e.Addrline2=e.currtuser.company.address_line2,e.city=e.currtuser.company.city,e.pincode=e.currtuser.company.zip;var o=e.currtuser.company.company_phone;o=o.split(" "),e.phDailCode=o[0],e.cmpyphone=o[1],e.cmpyTitle=e.currtuser.company.company_name,e.companyEmail=e.currtuser.company.company_email,e.publicChange(),e.contactChanges()}e.profileChanges()},e.checkScocials=function(){var t=0;"company-website"==e.social_type&&7!=e.cmpyweb.length?t=1:"twitter"==e.social_type&&20!=e.cmpytwitter.length?t=1:"facebook"==e.social_type&&25!=e.cmpyfb.length?t=1:"linkedin"==e.social_type&&25!=e.cmpylink.length?t=1:"pinterest"==e.social_type&&26!=e.cmpypinterest.length?t=1:"tumblr"==e.social_type&&e.cmpytumblr.length>0?t=1:"git-hub"==e.social_type&&19!=e.cmpygithub.length?t=1:"instagram"==e.social_type&&26!=e.cmpyinstagram.length&&(t=1);var a=c.getSocailId(e.social_type);1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.checkScocialDisabled=function(){var t=0;"company-website"==e.social_type&&e.Tcmpyweb.length>=7?t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.Tcmpyweb)||7==e.Tcmpyweb.length?1:0:"twitter"==e.social_type&&e.Tcmpytwitter.length>=20?t=1:"facebook"==e.social_type&&e.Tcmpyfb.length>=25?t=1:"linkedin"==e.social_type&&e.Tcmpylink.length>=25?t=1:"pinterest"==e.social_type&&e.Tcmpypinterest.length>=26?t=1:"tumblr"==e.social_type&&e.Tcmpytumblr.length>=0?t=1:"git-hub"==e.social_type&&e.Tcmpygithub.length>=19?t=1:"instagram"==e.social_type&&e.Tcmpyinstagram.length>=26&&(t=1),e.isSocialSave=1==t},setTimeout(function(){e.cmpytumblr=e.Tcmpytumblr,e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram},1e3),e.saveSocials=function(){e.typeofchange="save",e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpytumblr=e.Tcmpytumblr,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram,e.checkScocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange="",e.checkScocialDisabled(),setTimeout(function(){$("#"+e.social_type+"_id").focus();var t=$("#"+e.social_type+"_id").val().length;$("#"+e.social_type+"_id")[0].setSelectionRange(t,t)},1e3)}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(e.Tcmpyweb=e.cmpyweb,e.Tcmpyfb=e.cmpyfb,e.Tcmpytwitter=e.cmpytwitter,e.Tcmpylink=e.cmpylink,e.Tcmpypinterest=e.cmpypinterest,e.Tcmpytumblr=e.cmpytumblr,e.Tcmpygithub=e.cmpygithub,e.Tcmpyinstagram=e.cmpyinstagram,e.checkScocials(),e.publicChange())}),e.$watchCollection("[Tcmpyweb,Tcmpytwitter,Tcmpyfb,Tcmpylink,Tcmpypinterest,Tcmpytumblr,Tcmpygithub,Tcmpyinstagram]",function(t){e.checkScocialDisabled(),e.publicChange()}),e.getUser=function(){c.getCurrtUser().then(function(t){e.currtuser=t.user_data,e.setCurrentVal(),$("#loading").hide()})},e.getUser(),window.onbeforeunload=function(t){if(e.profChange||e.CmpyUpdate||e.cmpySocialUP){var a="Do you want to discard changes?";return void 0===t&&(t=window.event),t&&(t.returnValue=a),a}},e.$watchCollection("[cmpyimageSrc,imageSrc1,cmpyabt]",function(){e.publicChange()}),e.publicChange=function(){e.cmpySocialUP=!1;var t=["Website","Twitter","Linkedin","Facebook","Pinterest","Github","Instagram","Tumblr"];if(void 0!=e.currtuser&&void 0!=e.currtuser.company){e.cmpyimageSrc!=e.currtuser.company.logo&&(e.cmpySocialUP=!0),e.imageSrc1!=e.currtuser.company.cover_image&&(e.cmpySocialUP=!0),e.cmpyabt!=e.currtuser.company.description&&(e.cmpySocialUP=!0);var a=e.currtuser.company.social_providers;angular.forEach(t,function(t){var o=s("filter")(a,{social_provider:t});o.length>0?"Website"==o[0].social_provider&&e.Tcmpyweb!=o[0].link?e.cmpySocialUP=!0:"Twitter"==o[0].social_provider&&e.Tcmpytwitter!=o[0].link?e.cmpySocialUP=!0:"Linkedin"==o[0].social_provider&&e.Tcmpylink!=o[0].link?e.cmpySocialUP=!0:"Facebook"==o[0].social_provider&&e.Tcmpyfb!=o[0].link?e.cmpySocialUP=!0:"Pinterest"==o[0].social_provider&&e.Tcmpypinterest!=o[0].link?e.cmpySocialUP=!0:"Github"==o[0].social_provider&&e.Tcmpygithub!=o[0].link?e.cmpySocialUP=!0:"Instagram"==o[0].social_provider&&e.Tcmpyinstagram!=o[0].link?e.cmpySocialUP=!0:"Tumblr"==o[0].social_provider&&"https://"+e.Tcmpytumblr+".tumblr.com"!=o[0].link&&(e.cmpySocialUP=!0):"Website"==t&&e.Tcmpyweb.length>7?e.cmpySocialUP=!0:"Twitter"==t&&e.Tcmpytwitter.length>20?e.cmpySocialUP=!0:"Linkedin"==t&&e.Tcmpylink.length>25?e.cmpySocialUP=!0:"Facebook"==t&&e.Tcmpyfb.length>25?e.cmpySocialUP=!0:"Pinterest"==t&&e.Tcmpypinterest.length>26?e.cmpySocialUP=!0:"Github"==t&&e.Tcmpygithub.length>19?e.cmpySocialUP=!0:"Instagram"==t&&e.Tcmpyinstagram.length>26?e.cmpySocialUP=!0:"Tumblr"==t&&e.Tcmpytumblr.length>0&&(e.cmpySocialUP=!0)})}},e.profileChanges=function(){e.profChange=!1,void 0!=e.currtuser&&(e.pname!=s("capitalize")(e.currtuser.full_name,!0)&&(e.profChange=!0),e.PDesg!=e.currtuser.designation&&(e.profChange=!0),e.imageSrc!=e.currtuser.profile_picture&&(e.profChange=!0))},e.$watchCollection("[pname,PDesg,imageSrc]",function(){e.profileChanges()}),e.contactChanges=function(){if(e.CmpyUpdate=!1,void 0!=e.currtuser&&void 0!=e.currtuser.company){var t=e.currtuser.company.company_phone;t=t.split(" "),e.companyEmail!=e.currtuser.company.company_email&&(e.CmpyUpdate=!0),e.cmpyTitle!=e.currtuser.company.company_name&&(e.CmpyUpdate=!0),e.phDailCode!=t[0]&&(e.CmpyUpdate=!0),e.cmpyphone!=t[1]&&(e.CmpyUpdate=!0),e.pincode!=e.currtuser.company.zip&&(e.CmpyUpdate=!0),e.city!=e.currtuser.company.city&&(e.CmpyUpdate=!0),e.Addrline2!=e.currtuser.company.address_line2&&(e.CmpyUpdate=!0),e.Addrline1!=e.currtuser.company.address_line1&&(e.CmpyUpdate=!0),e.country.name!=e.currtuser.company.country&&(e.CmpyUpdate=!0),e.state!=e.currtuser.company.state&&(e.CmpyUpdate=!0)}},e.$watchCollection("[country.name,state,Addrline1,Addrline2,city,pincode,phDailCode,cmpyphone,cmpyTitle,companyEmail]",function(){e.contactChanges()}),e.errorScroll=function(){n(function(){!e.cmpyimageSrc&&e.cmpypublicform.$valid||e.submitted1&&!e.cmpyimageSrc?t.scrollJquery("img-cmpylogo"):""!=e.cmpyabt&&void 0!=e.cmpyabt||t.scrollJquery("cmbtext")},100)},e.erroe3page=function(){n(function(){""==e.state&&t.scrollJquery("state_dropdown")},100)},
e.cover_img=e.logo_img=0,e.cmpyUpdate=function(t){$("#loading").show(),""==e.imageSrc1&&(e.imageSrc1=e.currtuser.company.cover_image),""==e.cmpyimageSrc&&(e.cmpyimageSrc=e.currtuser.company.logo);var a=new FormData;a.append("company_name",e.cmpyTitle),a.append("company_email",e.companyEmail),a.append("company_phone",e.phDailCode+" "+e.cmpyphone),a.append("address_line1",e.Addrline1),null!=e.Addrline2&&void 0!=e.Addrline2||(e.Addrline2=""),a.append("address_line2",e.Addrline2),a.append("city",e.city),a.append("country",e.country.name),a.append("state",e.state),a.append("zip",e.pincode),a.append("about_company",e.cmpyabt),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(t,o){a.append("logo",t.file),e.logo_img=1});var o=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;0==o&&a.append("logo",""),angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(t,o){a.append("cover_image",t.file),e.cover_img=1}),o=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length,0==o&&a.append("cover_image",""),a.append("new_logo",e.logo_img),a.append("new_cover_image",e.cover_img);var r=[{social_provider:"Website",link:e.cmpyweb},{social_provider:"Twitter",link:e.cmpytwitter},{social_provider:"Facebook",link:e.cmpyfb},{social_provider:"LinkedIn",link:e.cmpylink},{social_provider:"Pinterest",link:e.cmpypinterest},{social_provider:"Tumblr",link:"https://"+e.cmpytumblr+".tumblr.com"},{social_provider:"GitHub",link:e.cmpygithub},{social_provider:"Instagram",link:e.cmpyinstagram}];a.append("social_providers",angular.toJson(r)),e.data={},i({method:"POST",url:l.url+"/company_edit/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(a){e.data=a.data,null==e.data.result||void 0==e.data.result?("public"==t&&(e.errormsg1=!0),"contact"==t&&(e.errormsg2=!0),e.data.error=c.errorMsg[1]):0==e.data.result?("public"==t&&(e.errormsg1=!0),"contact"==t&&(e.errormsg2=!0),e.data.error=e.data.message):("public"==t&&(e.errormsg1=!0),"contact"==t&&(e.errormsg2=!0),e.data.error=e.data.message,e.getUser(),e.submitted1=!1,e.submitted2=!1),$("#loading").hide(),$("#container").fadeIn()},function(a){e.data={},console.log(a),"public"==t&&(e.errormsg1=!0),"contact"==t&&(e.errormsg2=!0),(a.status==-1||null==a.data)&&0==m.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.resetChangevalues=function(){e.RPerrormsg=!1,e.RP=!1,e.RPsubmitted=!1,e.oldpwd="",e.pwd="",$("#pwd_strength_div").hide(),e.cnfpwd=""},e.$watch("pwd",function(e){""!=e&&$("#pwd_strength_div").show()},!0),e.resetpwd=function(){$("#loading").show(),e.data="waiting for data",e.errormsg=!1,i({method:"POST",url:l.url+"/reset_password/",data:{old:e.oldpwd,new:e.pwd,confirm:e.cnfpwd}}).then(function(t){e.data=t.data,0==e.data.result?(e.RPerrormsg=!0,e.data.error=e.data.message):(e.RPerrormsg=!1,e.RP=!0),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.RPerrormsg=!0,(t.status==-1||null==t.data)&&0==m.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.resetProfilepic=function(){if(e.profileform.pofilePic.$invalid){e.profileform.pofilePic.$setValidity("minsizeval",!0),e.profileform.pofilePic.$setValidity("minDimension",!0),e.profileform.pofilePic.$setValidity("ratioval",!0),e.imageSrc=e.currtuser.profile_picture;e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length>0&&angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})}},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=c.dataURItoBlob(t);"cmpylogo"==e.cropType?(e.cmpyimageSrc=t,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})):"coverimg"==e.cropType?(e.imageSrc1=t,angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.file=a})):"pofilePic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"cmpylogo"==e.cropType?(e.cmpyimageSrc=e.currtuser.company.logo,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})):"coverimg"==e.cropType?(e.imageSrc1=e.currtuser.company.cover_image,angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.setType(4)})):"pofilePic"==e.cropType&&(e.imageSrc=e.currtuser.profile_picture,angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.pofilePic.allowedExtensions(["png","jpg","jpeg"]),e.cmpylogo.allowedExtensions(["png","jpg","jpeg"]),e.coverimg.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,o){e.lodinghide=!1,e.cropPic="";var r=e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(t,o){o!=r-1?t.setType(4):t.file.size>5242880?(e.profileform.pofilePic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=e.currtuser.profile_picture):(e.profileform.pofilePic.$setValidity("minsizeval",!0),a.readAsDataUrl(t.file,e).then(function(a){c.getImgDimensions(a,function(o,r){o>=512&&r>=512?(e.profileform.pofilePic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc=a:(e.cropPic="profile",e.cropType="pofilePic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.05),$("#crop-image").modal("show"),n(function(){e.lodinghide=!0},2e3))):(e.profileform.pofilePic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=e.currtuser.profile_picture),e.$apply()})}))});var r=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(t,o){o!=r-1?t.setType(4):t.file.size>5242880?(e.cmpypublicform.cmpylogo.$setValidity("minsizeval",!1),t.setType(4),e.cmpyimageSrc=e.currtuser.company.logo):(e.cmpypublicform.cmpylogo.$setValidity("minsizeval",!0),a.readAsDataUrl(t.file,e).then(function(a){c.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.cmpypublicform.cmpylogo.$setValidity("minDimension",!0),1024==o&&1024==r?e.cmpyimageSrc=a:(e.cropType="cmpylogo",$(".image-editor").cropit({exportZoom:1.25,imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"),n(function(){e.lodinghide=!0},2e3))):(e.cmpypublicform.cmpylogo.$setValidity("minDimension",!1),t.setType(4),e.cmpyimageSrc=e.currtuser.company.logo),e.$apply()})}))}),(r=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length)>0&&angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(t,o){o!=r-1?t.setType(4):t.file.size>5242880?(e.cmpypublicform.coverimg.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc1=e.currtuser.company.cover_image):(e.cmpypublicform.coverimg.$setValidity("minsizeval",!0),a.readAsDataUrl(t.file,e).then(function(a){c.getImgDimensions(a,function(o,r){o>=2048&&r>=1024?(e.cmpypublicform.coverimg.$setValidity("minDimension",!0),2048==o&&1024==r?e.imageSrc1=a:(e.cropType="coverimg",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:500,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"),n(function(){e.lodinghide=!0},2e3))):(e.cmpypublicform.coverimg.$setValidity("minDimension",!1),t.setType(4),e.imageSrc1=e.currtuser.company.cover_image),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){var t=e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length;t<=0&&(e.imageSrc=e.currtuser.profile_picture);var t=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;t<=0&&(e.cmpyimageSrc=e.currtuser.company.logo),(t=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length)<=0&&(e.imageSrc1=e.currtuser.company.cover_image)}),e.$on("$dropletError",function(){}),e.errormsg=!1,e.UpdateProfile=function(){$("#loading").show();var t=new FormData;t.append("full_name",e.pname),t.append("designation",e.PDesg),angular.forEach(e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID),function(e,a){t.append("profile_picture",e.file)}),len=e.pofilePic.getFiles(e.pofilePic.FILE_TYPES.VALID).length,0==len&&t.append("profile_picture",""),i({method:"POST",url:l.url+"/organizer_edit/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg=!0,e.data.error=c.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):(e.errormsg=!0,e.data.error=e.data.message,e.getUser()),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==m.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.scrollTop=function(){$("#loading").show(),r(),n(function(){$("#loading").hide()},200),n(function(){$("textarea").each(function(){p(this)})},500)},$("textarea").each(function(){p(this)}).on("input",function(){p(this)}),0==m.online&&alert("You are not connected to internet")}]),app.controller("SettingsController",["$scope","APPService","fileReader","$location","$anchorScroll","$timeout","$http","YaraBaseUrl","$filter","GetDataService","$document","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d,m){"Admin"==c.getPrivilege(8)?e.privilege=!0:e.privilege=!1,e.showTzlist=!1,e.getTimezones=function(){$("#loading").show(),c.getTimezone().then(function(t){1==t.result&&(e.timeZones=t.timezones,e.currentTimeZone=t.current_timezone,e.selectedTimeZone=t.current_timezone,e.is24Hours=t.is_time_format_24,$("#loading").hide(),$("#container").fadeIn())})},e.getTimezones(),e.showTimeZones=function(){e.showTzlist=!0},e.selectTimeZone=function(t){e.selectedTimeZone=t,e.showTzlist=!1},e.logindata=angular.fromJson(localStorage.getItem("Logininfo")),e.saveTimeZone=function(){i({method:"POST",url:l.url+"/timezone-list/",data:{current_timezone:e.selectedTimeZone,is_time_format_24:e.is24Hours}}).then(function(t){if(1==t.data.result)if(localStorage.setItem("is_time_format_24",e.is24Hours),"Sponsor"==e.logindata.user_type||"Exhibitor"==e.logindata.user_type){var a="showcase-dashboard";localStorage.setItem("dashboardUrl",a),e.logindata.user_offset=e.is24Hours,localStorage.setItem("Logininfo",angular.toJson(e.logindata)),window.location="/showcase-dashboard"}else if("Collaborator"==e.logindata.user_type){var a="collaborator-dashboard";localStorage.setItem("dashboardUrl",a),e.logindata.user_offset=e.is24Hours,localStorage.setItem("Logininfo",angular.toJson(e.logindata)),window.location="/collaborator-dashboard"}else if("Admin"==e.logindata.user_type)window.location="/happyhelp-dashboard";else{var a="dashboard";localStorage.setItem("dashboardUrl",a),window.location="/dashboard"}else 0==t.data.result&&(e.errorStatus=!0,e.msg=t.data.message)},function(e){e.status==-1||e.data})},0==m.online&&alert("You are not connected to internet")}]),app.controller("FollowCtrl",["$scope","APPService","fileReader","$location","$anchorScroll","$timeout","$http","YaraBaseUrl","$filter","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d){e.followers=[],e.err=!1,document.title="YARA - Followers",c.getFollow().then(function(t){1==t.result?(e.followers=t.followers,angular.forEach(e.followers,function(e){e.full_name=e.first_name,""!=e.middle_name&&(e.full_name+=" "+e.middle_name),""!=e.last_name&&(e.full_name+=" "+e.last_name)})):0==t.result&&(e.err=!0,e.msg=t.message),$("#loading").hide(),$("#container").fadeIn()}),0==d.online&&alert("You are not connected to internet")}]),app.controller("BillsCtrl",["$scope","APPService","fileReader","$location","$anchorScroll","$timeout","$http","YaraBaseUrl","$filter","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,"Admin"==c.getPrivilege(14)?e.privilege=!0:window.location="/dashboard",document.title="YARA - Bills",e.service=t,e.setOffset=function(t){return c.userOffsetTime(t,e.userOffset)},e.browser=d.browser,e.getBills=function(){e.billerror=!1,$("#loading").show(),c.getAllBills().then(function(t){1==t.result?e.billList=t.bills:(e.billerror=!0,e.billmsg=t.message),$("#loading").hide(),$("#container").fadeIn()})},e.getBills(),e.getPreferences=function(){c.getPreference().then(function(t){1==t.result&&(e.userOffset=t.uo,e.emailprf=t.preferences,e.resetsetting())})},e.getPreferences(),e.resetsetting=function(){e.EmailPr1="",e.EmailPr2="",e.EmailPr3="",e.EmailPr4="",angular.forEach(e.emailprf,function(t){"preference1"==t.preference&&(e.EmailPr1=t.email),"preference2"==t.preference&&(e.EmailPr2=t.email),"preference3"==t.preference&&(e.EmailPr3=t.email),"preference4"==t.preference&&(e.EmailPr4=t.email)}),e.settingChange()},e.$watchCollection("[EmailPr1,EmailPr2,EmailPr3,EmailPr4]",function(){e.settingChange(),e.errormsg=!1}),window.onbeforeunload=function(t){if(e.setting&&e.emailChange){var a="Do you want to discard changes?";return void 0===t&&(t=window.event),t&&(t.returnValue=a),a}},e.settingChange=function(){if(e.emailChange=!1,void 0!=e.emailprf){var t=s("filter")(e.emailprf,{preference:"preference1"},!0);ex1=s("filter")(e.emailprf,{email:e.EmailPr1},!0),t.length>0&&e.EmailPr1!=t[0].email&&ex1.length<=0?e.emailChange=!0:t.length<=0&&""!=e.EmailPr1&&ex1.length<=0&&(e.emailChange=!0),t=s("filter")(e.emailprf,{preference:"preference2"},!0),ex1=s("filter")(e.emailprf,{email:e.EmailPr2},!0),t.length>0&&e.EmailPr2!=t[0].email&&ex1.length<=0?e.emailChange=!0:t.length<=0&&""!=e.EmailPr2&&ex1.length<=0&&(e.emailChange=!0),t=s("filter")(e.emailprf,{preference:"preference3"},!0),ex1=s("filter")(e.emailprf,{email:e.EmailPr3},!0),t.length>0&&e.EmailPr3!=t[0].email&&ex1.length<=0?e.emailChange=!0:t.length<=0&&""!=e.EmailPr3&&ex1.length<=0&&(e.emailChange=!0),t=s("filter")(e.emailprf,{preference:"preference4"},!0),ex1=s("filter")(e.emailprf,{email:e.EmailPr4},!0),t.length>0&&e.EmailPr4!=t[0].email&&ex1.length<=0?e.emailChange=!0:t.length<=0&&""!=e.EmailPr4&&ex1.length<=0&&(e.emailChange=!0)}},e.setSettings=function(){var t=[];if(""!=e.EmailPr1||s("filter")(e.emailprf,{preference:"preference1"},!0).length>0){var a={};a.email=e.EmailPr1,a.preference="preference1";var o=s("filter")(e.emailprf,{email:e.EmailPr1},!0),r=s("filter")(t,{email:e.EmailPr1},!0);o.length<=0&&(r.length<=0||r.length>0&&""==e.EmailPr1)&&t.push(a)}if(""!=e.EmailPr2||s("filter")(e.emailprf,{preference:"preference2"},!0).length>0){var a={};a.email=e.EmailPr2,a.preference="preference2";var o=s("filter")(e.emailprf,{email:e.EmailPr2},!0),r=s("filter")(t,{email:e.EmailPr2},!0);o.length<=0&&(r.length<=0||r.length>0&&""==e.EmailPr2)&&t.push(a)}if(""!=e.EmailPr3||s("filter")(e.emailprf,{preference:"preference3"},!0).length>0){var a={};a.email=e.EmailPr3,a.preference="preference3";var o=s("filter")(e.emailprf,{email:e.EmailPr3},!0),r=s("filter")(t,{email:e.EmailPr3},!0);o.length<=0&&(r.length<=0||r.length>0&&""==e.EmailPr3)&&t.push(a)}if(""!=e.EmailPr4||s("filter")(e.emailprf,{preference:"preference4"},!0).length>0){var a={};a.email=e.EmailPr4,a.preference="preference4";var o=s("filter")(e.emailprf,{email:e.EmailPr4},!0),r=s("filter")(t,{email:e.EmailPr4},!0);o.length<=0&&(r.length<=0||r.length>0&&""==e.EmailPr4)&&t.push(a)}t.length>0&&($("#loading").show(),i({method:"POST",url:l.url+"/preference/",data:{preferences:t}}).then(function(a){e.data=a.data,void 0==e.data.result||null==e.data.result?(e.errormsg=!0,e.data.error=c.errorMsg[1]):(e.data.result,e.errormsg=!0,e.data.error=e.data.message),$("#loading").hide(),$("#container").fadeIn(),e.getPreferences(),t=[]},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==d.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},0==d.online&&alert("You are not connected to internet")}]),app.controller("AdminCtrl",["$scope","APPService","fileReader","$location","$anchorScroll","$timeout","$http","YaraBaseUrl","$filter","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d){"Admin"==c.getPrivilege(1)?e.privilege=!0:window.location="/dashboard",document.title="YARA - Team",e.service=t,e.getOrganizer=function(){$("#loading").show(),c.getOrganizer({target:"current_company"}).then(function(t){1==t.result&&(e.organizerlist=t.organizers,$("#loading").hide(),$("#container").fadeIn())})},e.getOrganizer(),e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.getUser=function(){c.getCurrtUser().then(function(t){e.currtuser=t.user_data})},e.getUser(),e.DeleteMember=function(t){e.Dname=t.full_name,e.Demail=t.username,e.DT=!1,e.errormsg2=!1},e.EnableMember=function(t){e.enname=t.full_name,e.enemail=t.username,e.ET=!1},e.ManageEnableMember=function(){$("#loading").show(),i({method:"POST",url:l.url+"/organizer/enable/",data:{email:e.enemail}}).then(function(t){console.log(t),e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg2=!0,e.data.error=c.errorMsg[1]):0==e.data.result?(e.errormsg2=!0,e.data.error=e.data.message):(e.ET=!0,e.getOrganizer()),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg2=!0,(t.status==-1||null==t.data)&&0==d.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.revokeMember=function(){$("#loading").show(),i({method:"POST",url:l.url+"/organizer/disable/",data:{email:e.Demail}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg2=!0,e.data.error=c.errorMsg[1]):0==e.data.result?(e.errormsg2=!0,e.data.error=e.data.message):(e.DT=!0,e.getOrganizer()),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg2=!0,(t.status==-1||null==t.data)&&0==d.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.convertMember=function(t,a){e.Cname=t.full_name,e.Cemail=t.username,e.Cas=a,e.CT=!1,e.errormsg1=!1},e.setMember=function(){$("#loading").show(),i({method:"POST",url:l.url+"/privilege/",data:{email:e.Cemail,to:e.Cas}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg1=!0,e.data.error=c.errorMsg[1]):0==e.data.result?(e.errormsg1=!0,e.data.error=e.data.message):(e.CT=!0,e.getOrganizer()),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==d.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.invitereset=function(){e.invitaT=!1,e.Email="",e.submitted=!1,e.errormsg=!1},e.invitemail=function(){e.data=""},e.inviteMember=function(){e.errormsg=!1;var t=e.currtuser.username.split("@"),a=e.Email.split("@"),o=s("filter")(e.organizerlist,{username:e.Email},!0);a[1]==t[1]&&o.length<=0?($("#loading").show(),i({method:"POST",url:l.url+"/invitation/",data:{email:e.Email,invite_as:e.inviteAs}}).then(function(t){e.data=t.data,void 0==e.data.result||null==e.data.result?(e.errormsg=!0,e.data.error=c.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):e.invitaT=!0,$("#loading").hide(),$("#container").fadeIn()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==d.online?e.data.error=c.errorMsg[0]:e.data.error=c.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})):o.length>0?(e.errormsg=!0,e.data={},e.data.error=c.errorMsg[3]):a[1]!=t[1]&&(e.errormsg=!0,e.data={},e.data.error=c.errorMsg[4])},0==d.online&&alert("You are not connected to internet")}]),app.controller("AssetsController",["$scope","APPService","YaraBaseUrl","$http","$location","$filter","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){document.title="YARA - Assets",e.speakerData=[],e.sponsorData=[],e.ExhibitorData=[],e.err=!1,e.sc=e,e.Event=function(e,t){$("#loading").show(),i.getEvent(t).then(function(a){1==a.result&&(angular.forEach(a.events,function(e){localStorage.setItem("selEventsData",angular.toJson(e))}),localStorage.setItem("selectedEventId",t),e?window.location="/event":(localStorage.setItem("ArcEventId",t),localStorage.removeItem("selectedEventId"),window.location="/archived-event")),$("#loading").hide(),$("#container").fadeIn()})},i.getAssets().then(function(t){1==t.result?(e.speakerData=t.special_delegates,e.sponsorData=t.sponsors,e.ExhibitorData=t.exhibitors,angular.forEach(e.speakerData,function(e){e.full_name=e.first_name,""!=e.middle_name&&(e.full_name+=" "+e.middle_name),""!=e.last_name&&(e.full_name+=" "+e.last_name)})):(e.err=!0,e.msg=t.message),$("#loading").hide(),$("#container").fadeIn()}),0==l.online&&alert("You are not connected to internet")}]),app.controller("EventsController",["$scope","APPService","YaraBaseUrl","$http","$location","$filter","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,"Admin"==i.getPrivilege()?e.privilege=!0:e.privilege=!1,e.dashboardsUrl=i.dashboardUrl(),e.eventsdata=[],e.shownav=!0,document.title="YARA - Events",e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)},e.errorstatus=!1,i.getEvents().then(function(t){$("#loading").show(),1==t.result?($("#loading").hide(),$("#container").fadeIn(),e.eventsdata=t.events,e.setOffset=function(e,t){return i.userOffsetTime(e,t)}):e.errorstatus=!0}),e.redirectInfo=function(e){localStorage.removeItem("infoPageErrors");var t={errorNum:1,heading:e,subHeading:"",description:""};localStorage.setItem("infoPageErrors",angular.toJson(t)),window.location="/info"},e.selectedtype=function(t,a){if(e.selectedval=t,a){localStorage.removeItem("selectedEventId"),localStorage.setItem("ArcEventId",t);for(var o=0;o<e.archivedEvents.length;o++)e.archivedEvents[o].event_code==t&&(localStorage.setItem("ArcEventsData",angular.toJson(e.archivedEvents[o])),window.location="/archived-event")}else{localStorage.setItem("selectedEventId",t),localStorage.removeItem("ArcEventId");for(var o=0;o<e.eventsdata.length;o++)if(e.eventsdata[o].event_code==t){var r={eventready:!1,tracks:!1,gk:!1,promote:!1,pin:!1};localStorage.setItem("selEventsData",angular.toJson(e.eventsdata[o])),0==e.eventsdata[o].is_track_setup?(localStorage.setItem("eventReadyRedirection",angular.toJson(r)),0==e.privilege?e.redirectInfo(e.eventsdata[o].name):window.location="/event-ready"):0==e.eventsdata[o].kits.GateKeeper.confirmed?(r.eventready=!0,r.tracks=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(r)),0==e.privilege?e.redirectInfo(e.eventsdata[o].name):window.location="/event-setup-gatekeeper"):1==e.eventsdata[o].kits.GateKeeper.confirmed&&1==e.eventsdata[o].is_private&&0==e.eventsdata[o].kits["Pin To Pulse"].confirmed?(r.eventready=!0,r.tracks=!0,r.gk=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(r)),0==e.privilege?e.redirectInfo(e.eventsdata[o].name):window.location="/posting-pin"):1==e.eventsdata[o].kits.GateKeeper.confirmed&&0==e.eventsdata[o].is_private&&0==e.eventsdata[o].kits.Promote.confirmed?(r.eventready=!0,r.tracks=!0,r.gk=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(r)),0==e.privilege?e.redirectInfo(e.eventsdata[o].name):window.location="/event-setup-promotion"):window.location="/event"}}};var s="";e.getdata=function(e){return s=angular.fromJson(JSON.parse(e.replace(/'/g,'"')))},e.archivedevent=function(){$("#loading").show(),i.getarchived().then(function(t){1==t.result&&($("#loading").hide(),$("#container").fadeIn(),e.archivedEvents=t.events)})},0==l.online&&alert("You are not connected to internet")}]),app.controller("ArchivedEventController",["$scope","APPService","YaraBaseUrl","$http","$location","$filter","GetDataService","$rootScope","$timeout","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1;var d=localStorage.getItem("ArcEventId");void 0!==d&&null!==d&&""!=d||(window.location="/events"),e.archivedevents=JSON.parse(localStorage.getItem("ArcEventsData")),console.log(e.archivedevents),document.title="YARA - "+e.archivedevents.short_name+" - Archived Event",e.exhibitors=[],e.sponsers=[],e.Archivedtab=function(){if(e.tabelement=[{group_tittle:"General",id:"general"},{group_tittle:"Sessions",id:"session"},{group_tittle:"Exhibitors",id:"exhibitor"},{group_tittle:"Sponsors",id:"sponser"},{group_tittle:"Collaborators",id:"collabrator"},{group_tittle:"Media",id:"media"},{group_tittle:"Delegates",id:10}],0!=e.archivedevents.sp_people.length)for(var t=0;t<e.archivedevents.sp_people.length;t++)e.tabelement.push(e.archivedevents.sp_people[t]);e.dbutton=e.tabelement.length-3,s(function(){$(".slider").length>0&&$(".slider").diyslider({width:"100%",height:"51px",minSlides:2,loop:!1,moveSlides:1})},100)},e.Archivedtab(),e.eventOffset=e.archivedevents.eo,e.currentPinImage="",e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.getmedia=function(){i.getGalleryArchived({archived:1,event_code:d}).then(function(t){1==t.result&&($.each(t.data[0].pins,function(e,a){var o=a.url,r=o.split(".").pop(),n=o.replace("."+r,"_Q1."+r);null!=t.data[0].pins[e].url&&$("<img class='imgflikr' />").attr("src",n).appendTo("#flickrbox").wrap("<div class='imagesflickr'><a  rel='prettyPhoto[flickrgallery]' href='"+n+"'></a></div>").mouseover(function(){$(this).css("filter","alpha(opacity=70)"),$(this).css("-moz-opacity",".70"),$(this).css("opacity",".70")}).mouseout(function(){$(this).css("filter","alpha(opacity=1)"),$(this).css("-moz-opacity","1"),$(this).css("opacity","1")})}),$("a[rel^='prettyPhoto']").prettyPhoto({modal:!0,social_tools:"",deeplinking:!1}),e.imagesPins=t.data[0].pins)})},e.getmedia(),e.getTickets=function(){i.getTickets(d).then(function(t){1==t.result&&(e.ticketList=t.tickets,e.ticket=e.ticketList[0].ticket_code,$("#loading").hide())})},e.getTickets(),e.sponsersdata=function(){$("#loading").show(),i.getSponsors(d).then(function(t){1==t.result&&(e.sponsers=t.data,$("#loading").hide())})},e.exhibitordata=function(){$("#loading").show(),i.getExhibitors(d).then(function(t){e.exhibitors=t.data,$("#loading").hide()})},e.collobraterdata=function(){$("#loading").show(),i.getCollaborators(d).then(function(t){1==t.result&&(e.collobraters=t.data,e.permissionlist=["People","GateKeeper","AdSpace","Schedule","SpeakerEngage","FileBank","Sponsors","Exhibitors","ShowCase","Coupons","Vote","VenueGreet","FloorMap","WiFi Spots"],$("#loading").hide())})},e.permission=function(t){e.per=t,console.log(e.per)},e.selectTicket=function(t){e.ticket=t.ticket_code,e.ticketName=t.name,e.peopleList=[],e.EndList=!1,e.blockScroll=!1,e.params={offset:0,limit:50,type:e.seltab,ticket_code:e.ticket,initialize_ticket:0,event_code:e.archivedevents.event_code,s:1},e.getAllpeople()},e.dayid=function(t){e.dayids=t.dayID,c()},e.pn=0,e.listallSessions=function(){$("#loading").show();var t={bs:1,event_code:d};i.getallSessions(t).then(function(t){1==t.result&&(e.allv=t,e.sessions=t.sessions,$("#loading").hide())})},e.dechipereve=function(e){localStorage.setItem("selecteddecEventId",e),window.location="/decipher-event"},e.seltab=e.tabelement[0].id,e.selecttab=function(t){e.seltab=t.id,"session"==t.id?e.listallSessions():"exhibitor"==t.id?e.exhibitordata():"sponser"==t.id?e.sponsersdata():"collabrator"==t.id?e.collobraterdata():"number"==typeof t.id&&(console.log(t.id),e.idfortab=t.group_tittle,e.ticket=e.ticketList[0].ticket_code,e.ticketName=e.ticketList[0].name,e.peopleList=[],e.EndList=!1,e.blockScroll=!1,e.params={offset:0,limit:50,type:t.id,initialize_ticket:0,ticket_code:e.ticket,event_code:e.archivedevents.event_code,s:1},e.getAllpeople())},e.getAllpeople=function(){0==e.EndList&&(e.blockScroll=!0,i.getPeopleInfo(e.params).then(function(t){1==t.result&&(e.blockScroll=!1,e.peopleList=e.peopleList.concat(t.delegates),e.EndList=t.end)}))},e.addMoreItems=function(){e.EndList||void 0==e.params||void 0!=e.searchPeople&&0!=e.searchPeople.length?void 0!=e.ticket&&void 0!=e.params&&e.getSearchPeople():(console.log(e.ticket),e.params.ticket_code=e.ticket,e.params.offset=e.params.limit,e.params.limit=e.params.limit+50,e.params.type=e.seltab,e.getAllpeople())},e.getSearchPeople=function(){0==e.reachEnd&&void 0!=e.searchParam&&(e.blockScroll=!0,i.getPeoplesearchInfo(e.searchParam).then(function(t){if(1==t.result&&(e.blockScroll=!1,e.peopleList=e.peopleList.concat(t.search_data),e.reachEnd=t.end,e.searchCall=!1,0==t.end)){var a=e.peopleList.length;e.searchParam.offset=a,e.searchParam.limit=a+50}}))},e.$watch("searchPeople",function(t,a){console.log("searchPeople newval->"+t),console.log("searchPeople oldval->"+a),void 0!=t&&null!=t&&t.length>0&&void 0!=e.ticket?(e.searchParam={},e.searchParam.q=t,e.searchParam.event_code=e.archivedevents.event_code,e.searchParam.ticket_code=e.ticket,e.searchParam.on=e.seltab,e.searchParam.limit=50,e.searchParam.offset=0,e.searchParam.day_id=null,e.searchParam.s=1,e.peopleList=[],e.reachEnd=!1,e.searchCall=!0,e.getSearchPeople()):void 0!=t&&""!=t&&null!=t||void 0==a||void 0==e.ticket||(e.peopleList=[],e.EndList=!1,e.params.ticket_code=e.ticket,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.searchCall=!1,e.getAllpeople())},!0),e.removeSearch=function(){e.searchPeople="",e.searchCall=!1},0==l.online&&alert("You are not connected to internet")}]),app.controller("EventController",["$scope","YaraBaseUrl","$http","$location","APPService","GetDataService","$rootScope","$filter",function(e,t,a,o,r,n,i,l){"Admin"==n.getPrivilege(7)?e.privilege=!0:e.privilege=!1,e.dashboardsUrl=n.dashboardUrl(),e.clearLocalStorage=function(){localStorage.removeItem("camImage"),localStorage.removeItem("editSession"),localStorage.removeItem("eventdayid"),localStorage.removeItem("sessId"),localStorage.removeItem("dcode"),localStorage.removeItem("ecode"),localStorage.removeItem("addressComp"),localStorage.removeItem("epData"),localStorage.removeItem("lat"),localStorage.removeItem("lng"),localStorage.removeItem("placeName"),localStorage.removeItem("redirectionInfo"),localStorage.removeItem("timeZone"),localStorage.removeItem("country"),localStorage.removeItem("phonInfo"),localStorage.removeItem("isEventPrvt"),localStorage.removeItem("tabid"),localStorage.removeItem("ticketTabinfo"),localStorage.removeItem("delegateIdinfo"),localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("spEdit"),localStorage.removeItem("eventReadyRedirection"),localStorage.removeItem("Addata"),localStorage.removeItem("slotInfo"),localStorage.removeItem("Addate"),localStorage.removeItem("Adtime"),localStorage.removeItem("ArcEventsData"),localStorage.removeItem("dechipereventsdata"),localStorage.removeItem("latandLong"),localStorage.removeItem("ArcEventsData"),localStorage.removeItem("ArcEventId"),localStorage.removeItem("session"),localStorage.removeItem("tabcode"),localStorage.removeItem("redirectPpl"),localStorage.removeItem("session")},e.clearLocalStorage();var s=localStorage.getItem("selectedEventId");void 0!==s&&null!==s||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.allowIssue=!0,document.title="YARA - "+e.currentval.name;e.currentval.days;e.setOffset=function(e,t){return n.userOffsetTime(e,t)}
;var c=e.setOffset(e.currentval.start_date,e.currentval.eo),d=e.setOffset(e.currentval.end_date,e.currentval.eo);e.s_date=c,e.e_date=d;var m=l("date")(c,"yyyy-MM-dd"),p=l("date")(d,"yyyy-MM-dd");e.dayscount=r.dateDiffInDays(new Date(m),new Date(p)),e.dates=r.Dateslist(m,e.dayscount),e.selectedval=[],e.s=r,e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:l("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),e.happyHelp=function(){sessionStorage.setItem("redirectFrom","Event"),window.location="/happyhelp"},e.redirectInfo=function(){localStorage.removeItem("infoPageErrors");var t={errorNum:2,heading:e.currentval.name,subHeading:"",description:""};localStorage.setItem("infoPageErrors",angular.toJson(t)),window.location="/info"},e.checkGatekeeper=function(){0==e.currentval.gate_keeper?0==e.privilege?e.redirectInfo():(localStorage.setItem("setupGk",!0),window.location="/event/setup-gatekeeper"):window.location="/event/gatekeeper"},e.managesecurity=function(){localStorage.removeItem("securityredirect")},0==i.online&&alert("You are not connected to internet")}]),app.controller("EventPulseController",["$scope","YaraBaseUrl","fileReader","$http","$location","GetDataService","$filter","APPService","$rootScope","$timeout",function(e,t,a,o,r,n,i,l,s,c){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1;var d=localStorage.getItem("selectedEventId");void 0!==d&&null!==d||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - App Pulse",e.service=l,e.UsedPin=0,e.setOffset=function(e,t){return n.userOffsetTime(e,t)};localStorage.getItem("user_type");e.getPulse=function(){$("#loading").show(),n.getPulse(e.currentval.event_code).then(function(t){1==t.result&&(console.log(t),e.UsedPin=t.post_count,e.pulseAct=t.event_activation_time,e.pulseAppData=t.posts,e.userOffset=t.uo,$("#loading").hide(),$("#container").fadeIn())})},e.isAvaliable=function(){return!(new Date<e.setOffset(e.currentval.start_date,e.currentval.eo))},e.isAvaliable()?e.currtTab="Dashboard":e.currtTab="App",e.isActive=function(){var t=e.setOffset(e.currentval.start_date,e.currentval.eo);return t.setDate(t.getDate()-7),!(new Date<t)},e.isActive(),e.getPulse(),e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=n.dataURItoBlob(t);e.imageSrc=t,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.file=a}),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){e.imageSrc="",angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.plusePic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){}),e.$on("$dropletFileAdded",function(t,o){e.lodinghide=!1;var r=e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length;r>0&&(e.disableBtn=!1,e.minLength=0,e.isImageUploaded=!0,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(t,o){o!=r-1?t.setType(4):t.file.size>5242880?(e.postform.plusePic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.postform.plusePic.$setValidity("minsizeval",!0),a.readAsDataUrl(t.file,e).then(function(a){n.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.postform.plusePic.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=a:($(".image-editor").cropit({exportZoom:1.25,imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.postform.plusePic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})),c(function(){e.lodinghide=!0},2e3)}),e.$on("$dropletFileDeleted",function(){e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.resetImg=function(){e.postform.plusePic.$invalid&&(e.postform.plusePic.$setValidity("minsizeval",!0),e.postform.plusePic.$setValidity("minDimension",!0),e.postform.plusePic.$setValidity("ratioval",!0),e.imageSrc="")},e.delPost=function(t){e.currDelPost=t,e.deldata={}},e.delPostform=function(){$("#loading").show(),o({method:"POST",url:t.url+"/post_edit/",data:{opp:"delete",post_code:e.currDelPost.post_code}}).then(function(t){e.deldata=t.data,0==e.deldata.result?e.deldata.error=e.deldata.message:1==e.deldata.result?($("#pulse-delete").modal("hide"),e.getPulse()):(e.deldata.result=0,e.deldata.error=n.errorMsg[1]),$("#loading").hide()},function(t){e.deldata.result=0,(t.status==-1||null==t.data)&&0==s.online?e.deldata.error=n.errorMsg[0]:e.deldata.error=n.errorMsg[1],$("#loading").hide()})},e.$watch("posttxt",function(t,a){void 0!=t&&t.length>50?(e.disableBtn=!1,e.minLength=50):0==e.isImageUploaded&&(e.disableBtn=!0,e.minLength=50)},!0),e.removeImg=function(){e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1},e.addpost=function(a){$("#loading").show();var r=new FormData;r.append("event_code",e.currentval.event_code),r.append("text",e.posttxt),angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){r.append("image",e.file)}),0==e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length&&r.append("image",""),o({method:"POST",url:t.url+"/post/",data:r,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,0==e.data.result?(e.errorstatus=!0,e.errormsg=e.data.message):(e.imageSrc="",e.posttxt="",e.submitted=!1,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$("#myModal01").modal("hide"),e.getPulse()),$("#loading").hide()},function(t){e.errorstatus=!0,t.status!=-1&&null!=t.data||0!=s.online?e.errormsg=n.errorMsg[1]:e.errormsg=n.errorMsg[0],$("#loading").hide()})},e.resetPluse=function(){e.imageSrc="",e.posttxt="",e.submitted=!1,e.errorstatus=!1,e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})},0==s.online&&alert("You are not connected to internet")}]),app.controller("ShowcasePulseController",["$scope","YaraBaseUrl","fileReader","$http","$location","GetDataService","$filter","APPService","$rootScope","$timeout",function(e,t,a,o,r,n,i,l,s,c){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1;var d=localStorage.getItem("selectedEventId");void 0!==d&&null!==d||(window.location="/showcase-dashboard"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - App Pulse",e.service=l,e.UsedPin=0,e.viewDaysPost="",e.setOffset=function(e,t){return n.userOffsetTime(e,t)},e.viewPost=function(t){e.selectedDayid=t.day_id,e.viewDaysPost=t.day_id,e.dayName=t.day_name,e.pulseDate=t.start_time,e.selectedDayinfo=t};localStorage.getItem("user_type");e.getPulse=function(){$("#loading").show(),n.getPulse(e.currentval.event_code).then(function(t){1==t.result&&(e.showcasePulsedata=t,null!=t.showcase_pin_info&&(e.currentDayId=t.showcase_pin_info.current_day_post_details.day_id,e.viewPost(t.showcase_pin_info.current_day_post_details)),e.userOffset=t.uo,$("#loading").hide(),$("#container").fadeIn())})},e.getPulse(),e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=n.dataURItoBlob(t);e.imageSrc=t,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.file=a}),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){e.imageSrc="",angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.plusePic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){}),e.$on("$dropletFileAdded",function(t,o){e.lodinghide=!1;var r=e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length;r>0&&(e.disableBtn=!1,e.minLength=0,e.isImageUploaded=!0,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(t,o){o!=r-1?t.setType(4):t.file.size>5242880?(e.postform.plusePic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.postform.plusePic.$setValidity("minsizeval",!0),a.readAsDataUrl(t.file,e).then(function(a){n.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.postform.plusePic.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=a:($(".image-editor").cropit({exportZoom:1.25,imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.postform.plusePic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})),c(function(){e.lodinghide=!0},2e3)}),e.$on("$dropletFileDeleted",function(){e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.resetImg=function(){e.postform.plusePic.$invalid&&(e.postform.plusePic.$setValidity("minsizeval",!0),e.postform.plusePic.$setValidity("minDimension",!0),e.postform.plusePic.$setValidity("ratioval",!0),e.imageSrc="")},e.delPost=function(t){e.currDelPost=t,e.deldata={}},e.delPostform=function(){$("#loading").show(),o({method:"POST",url:t.url+"/post_edit/",data:{opp:"delete",post_code:e.currDelPost.post_code}}).then(function(t){e.deldata=t.data,0==e.deldata.result?e.deldata.error=e.deldata.message:1==e.deldata.result?($("#pulse-delete").modal("hide"),e.getPulse()):(e.deldata.result=0,e.deldata.error=n.errorMsg[1]),$("#loading").hide()},function(t){e.deldata.result=0,(t.status==-1||null==t.data)&&0==s.online?e.deldata.error=n.errorMsg[0]:e.deldata.error=n.errorMsg[1],$("#loading").hide()})},e.$watch("posttxt",function(t,a){void 0!=t&&t.length>50?(e.disableBtn=!1,e.minLength=50):0==e.isImageUploaded&&(e.disableBtn=!0,e.minLength=50)},!0),e.removeImg=function(){e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1},e.addpost=function(a){$("#loading").show();var r=new FormData;r.append("event_code",e.currentval.event_code),r.append("text",e.posttxt),r.append("day",e.showcasePulsedata.showcase_pin_info.current_day_post_details.day_id),angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){r.append("image",e.file)}),0==e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length&&r.append("image",""),o({method:"POST",url:t.url+"/post/",data:r,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,0==e.data.result?(e.errorstatus=!0,e.errormsg=e.data.message):(e.imageSrc="",e.posttxt="",e.submitted=!1,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$("#myModal01").modal("hide"),e.getPulse()),$("#loading").hide()},function(t){e.errorstatus=!0,t.status!=-1&&null!=t.data||0!=s.online?e.errormsg=n.errorMsg[1]:e.errormsg=n.errorMsg[0],$("#loading").hide()})},e.resetPluse=function(){e.imageSrc="",e.posttxt="",e.submitted=!1,e.errorstatus=!1,e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$("#myModal01").modal("show")},0==s.online&&alert("You are not connected to internet")}]),app.controller("ActivitieseController",["$scope","YaraBaseUrl","fileReader","$http","$location","GetDataService","$filter","APPService","$rootScope",function(e,t,a,o,r,n,i,l,s){e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1;var c=localStorage.getItem("selectedEventId");void 0!==c&&null!==c||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.is_time_format_24=localStorage.getItem("is_time_format_24"),document.title="YARA - "+e.currentval.short_name+" - App Pulse",e.service=l,e.UsedPin=0,e.setOffset=function(e,t){return n.userOffsetTime(e,t)};var d=localStorage.getItem("user_type");e.getPulse=function(){$("#loading").show(),e.pulsedata=[],null==d&&(console.log(d),n.getShowCaseActivity(e.currentval.event_code).then(function(t){1==t.result?(e.pulsedata=t.showcase_activities,e.userOffset=t.uo,console.log(e.pulsedata),$("#loading").hide(),$("#container").fadeIn()):$("#loading").hide()})),n.getPulse(e.currentval.event_code).then(function(t){e.UsedPin=t.organizer_post_count,e.pulseAct=t.event_activation_time,e.pulseAppData=t.posts,e.userOffset=t.uo})},e.isAvaliable=function(){return!(new Date<e.setOffset(e.currentval.start_date,e.currentval.eo))},e.isAvaliable()?e.currtTab="Dashboard":e.currtTab="App",e.isActive=function(){var t=e.setOffset(e.currentval.start_date,e.currentval.eo);return t.setDate(t.getDate()-7),!(new Date<t)},e.isActive(),e.getPulse(),e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=n.dataURItoBlob(t);e.imageSrc=t,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.file=a}),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){e.imageSrc="",angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.plusePic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){}),e.$on("$dropletFileAdded",function(t,o){var r=e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length;r>0&&(e.disableBtn=!1,e.minLength=0,e.isImageUploaded=!0,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(t,o){o!=r-1?t.setType(4):t.file.size>5242880?(e.postform.plusePic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.postform.plusePic.$setValidity("minsizeval",!0),a.readAsDataUrl(t.file,e).then(function(a){n.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.postform.plusePic.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=a:($(".image-editor").cropit({exportZoom:1.25,imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.postform.plusePic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))}))}),e.$on("$dropletFileDeleted",function(){e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.resetImg=function(){e.postform.plusePic.$invalid&&(e.postform.plusePic.$setValidity("minsizeval",!0),e.postform.plusePic.$setValidity("minDimension",!0),e.postform.plusePic.$setValidity("ratioval",!0),e.imageSrc="")},e.delPost=function(t){e.currDelPost=t,e.deldata={}},e.delPostform=function(){$("#loading").show(),o({method:"POST",url:t.url+"/post_edit/",data:{opp:"delete",post_code:e.currDelPost.post_code}}).then(function(t){e.deldata=t.data,0==e.deldata.result?e.deldata.error=e.deldata.message:1==e.deldata.result?($("#pulse-delete").modal("hide"),e.getPulse()):(e.deldata.result=0,e.deldata.error=n.errorMsg[1]),$("#loading").hide()},function(t){e.deldata.result=0,(t.status==-1||null==t.data)&&0==s.online?e.deldata.error=n.errorMsg[0]:e.deldata.error=n.errorMsg[1],$("#loading").hide()})},e.$watch("posttxt",function(t,a){void 0!=t&&t.length>50?(e.disableBtn=!1,e.minLength=50):0==e.isImageUploaded&&(e.disableBtn=!0,e.minLength=50)},!0),e.removeImg=function(){e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1},e.addpost=function(a){$("#loading").show();var r=new FormData;r.append("event_code",e.currentval.event_code),r.append("text",e.posttxt),angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){r.append("image",e.file)}),0==e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID).length&&r.append("image",""),o({method:"POST",url:t.url+"/post/",data:r,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,0==e.data.result?(e.errorstatus=!0,e.errormsg=e.data.message):(e.imageSrc="",e.posttxt="",e.submitted=!1,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),$("#myModal01").modal("hide"),e.getPulse()),$("#loading").hide()},function(t){e.errorstatus=!0,t.status!=-1&&null!=t.data||0!=s.online?e.errormsg=n.errorMsg[1]:e.errormsg=n.errorMsg[0],$("#loading").hide()})},e.resetPluse=function(){e.imageSrc="",e.posttxt="",e.submitted=!1,e.errorstatus=!1,e.disableBtn=!0,e.minLength=50,e.isImageUploaded=!1,angular.forEach(e.plusePic.getFiles(e.plusePic.FILE_TYPES.VALID),function(e,t){e.setType(4)})},0==s.online&&alert("You are not connected to internet")}]),app.controller("StoreController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","$document","$rootScope",function(e,t,a,o,r,n,i,l,s){e.setTitle=function(e){document.title="YARA - "+e},"Admin"==i.getPrivilege(13)?e.privilege=!0:e.privilege=!1,e.adspaceCount="",e.ecode=parseInt(localStorage.getItem("ecode")),e.dcode=parseInt(localStorage.getItem("dcode")),console.log(e.dcode),isNaN(e.ecode)||isNaN(e.dcode)||(i.getAvilabileslots({event_code:e.ecode,day_id:e.dcode}).then(function(t){console.log(t),1==t.result&&(e.maxSlotstoBuy=t.slot_details.can_buy)}),e.getEventsData=function(){i.getEvent(e.ecode).then(function(t){if(1==t.result){e.eventsdata=t.events,e.currentval=e.eventsdata[0];for(var a=0;a<e.currentval.days.length;a++)if(e.currentval.days[a].dayID==e.dcode){e.selectDay=e.currentval.days[a],e.evofset=e.currentval.eo,console.log(e.selectDay);break}}else e.errorstatus=!0})},e.getEventsData()),i.getEvents().then(function(t){1==t.result?(e.allevent=t.events,e.eventOffset=e.allevent.eo,console.log(e.allevent),$("#loading").hide(),e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)}):e.errorstatus=!0}),e.AdPacks=[{price:5,showtick:!1},{price:10,showtick:!1},{price:15,showtick:!1},{price:20,showtick:!1}],e.currentdate=new Date,e.checkdate=function(t){if(!t.is_active)return!1;var a,o=new Date(t.end_date),n=r("date")(o,"yyyy-MM-dd");if(angular.forEach(t.days,function(e,t){var o=new Date(t);o=r("date")(o,"yyyy-MM-dd"),n==o&&(a=e.endtime)}),void 0==a||null==a||""==a)return!1;var i=a.split(" "),l=i[0].split(":");return"PM"==i[1]&&(l[0]=Number(l[0])+12),o.setHours(l[0]),o.setMinutes(l[1]),o>=e.currentdate},e.getPriceDetails=function(t){e.ShowPrice=!1,$("#loading").show(),o({method:"POST",url:a.url+"/add_price/",data:{count:t}}).then(function(t){e.data=t.data,1==e.data.result?(e.ShowPrice=!0,e.adPrice=e.data.price,e.adCurr=e.data.symbol,e.adTax=0,e.adTotal=e.adPrice+e.adTax):(e.errormsg=!0,e.data.error=e.data.message),$("#loading").hide()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==s.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1],$("#loading").hide()})},e.SelEvent="",e.dates=[],e.service=t,e.SelDate="",window.onunload=function(){},window.onpageshow=function(e){e.persisted&&window.location.reload()},e.selectEvent=function(t){e.SelEvent=t.event_code,localStorage.setItem("ecode",t.event_code),e.evofset=t.eo,e.dates=t.days,1==t.days.length&&(e.SelDate=t.days[0].startTime,localStorage.setItem("dcode",t.days[0].dayID))},e.selectDate=function(t){e.SelDate=t.startTime,localStorage.setItem("dcode",t.dayID)},e.subtitle="",e.changeSubtype=function(t,a){e.adspaceCount=t,$("#countId").val(t),$("#dayId").val(e.dcode),e.AdPacks=[{price:5,showtick:!1},{price:10,showtick:!1},{price:15,showtick:!1},{price:20,showtick:!1}],e.AdPacks[a].showtick=!0,$(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show(),""==t?(e.subtitle=t,$(".subtitle").text("Select Pack")):(e.getPriceDetails(t),e.subtitle=t,$(".subtitle").text(t))},$(document).on("click",".subtype_dropdown .primary_nav_wrap ul li",function(){$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret02"),$(".subtype_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),l.on("click",function(e){var t=$(".subtype_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret01"))}),e.PayAdSpace=function(){e.buyAdSpace();var t={event_code:e.SelEvent,number_of_adds:e.subtitle,day:e.SelDate};sessionStorage.setItem("AdDetails",angular.toJson(t));var a={};a.val=e.adPrice,a.currency=e.adCurr,sessionStorage.setItem("priceData",angular.toJson(a)),window.location="/cc-checkout"},e.buyAdSpace=function(){e.errormsg=!1,o({method:"POST",url:a.url+"/buy_add/",data:{event_code:e.eventcode,number_of_adds:e.subtitle,purchased_for:e.seldayInfo.dayID}}).then(function(t){e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=i.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):(e.errormsg=!0,e.data.error=e.data.message,e.SelEvent="",e.SelDate="",e.subtitle="",e.submitted=!1,e.dates=[],$(".subtitle").text("Select Pack"))},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==s.online?e.data.error=i.errorMsg[0]:e.data.error=i.errorMsg[1]})},e.errorScroll=function(){""==e.SelEvent?t.scrollJquery("Eventerror"):""==e.SelDate?t.scrollJquery("daterror"):window.location="/store-adspace-buy"},e.errorScrollBuy=function(){""==e.SelEvent?t.scrollJquery("Eventerror"):""==e.SelDate?t.scrollJquery("daterror"):window.location="/checkout"},0==s.online&&alert("You are not connected to internet")}]),app.controller("EventAdSpaceController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$document","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c,m){e.dashboardsUrl=i.dashboardUrl(),e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1;var p=localStorage.getItem("selectedEventId");if(void 0!==p&&null!==p||(window.location="/events"),"/event/create-adspace"==window.location.pathname){"yes"==localStorage.getItem("adspaceRedirection")&&(window.location="/event",localStorage.removeItem("adspaceRedirection"))}e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Adspace",e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)},e.currentLocalTime=function(){i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(t){1==t.result&&(e.timeNow=e.setOffset(t.local_time_now,0),e.timeNowTmzone=t.local_time_now,console.log(t),e.localTimeNow=new Date,e.lesstime(e.setOffset(e.currentval.days[0].endTime,e.currentval.eo)))})},e.currentLocalTime(),e.lesstime=function(t){var a=new Date(e.timeNow),o=t,r=Math.abs(a-o),n=Math.round(r/864e5);if(e.threetimediff=!1,0==n){var i=o.getTime()-a.getTime(),l=Math.floor(i%864e5/36e5),s=Math.round(i%864e5%36e5/6e4);l<=1&&s<=30&&(e.threetimediff=!0)}},e.isactiveDecipher=function(){e.showDecipher=!1;var t=((new Date).getTime()-e.localTimeNow.getTime())/1e3;t/=60,e.setOffset(e.timeNowTmzone,Math.abs(Math.round(t)))>e.setOffset(e.currentval.end_date,e.currentval.eo+360)&&(e.showDecipher=!0)},e.isSlotAvilabile=function(t){var a=!0,o=((new Date).getTime()-e.localTimeNow.getTime())/1e3;return o/=60,e.setOffset(e.timeNowTmzone,Math.abs(Math.round(o)))>=e.setOffset(t,e.currentval.eo)&&(a=!1),a};var u=e.setOffset(e.currentval.start_date,e.currentval.eo),g=e.setOffset(e.currentval.end_date,e.currentval.eo),f=r("date")(u,"yyyy-MM-dd"),v=r("date")(g,"yyyy-MM-dd");if(e.dayscount=t.dateDiffInDays(new Date(f),new Date(v)),e.dates=t.Dateslist(f,e.dayscount),e.selectedval=[],e.s=t,e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),"/event/create-adspace"!=window.location.pathname)if(void 0!=localStorage.getItem("dcode")){for(var h=localStorage.getItem("dcode"),y=e.eventDaysInfo.length-1;y>=0;y--)if(e.eventDaysInfo[y].dayID==Number(h)){e.seltab=e.eventDaysInfo[y].dayID,e.seldayInfo=e.eventDaysInfo[y],e.expday=e.eventDaysInfo[y].isDayActive;break}}else e.seltab=e.eventDaysInfo[0].dayID,e.expday=e.eventDaysInfo[0].isDayActive,e.seldayInfo=e.eventDaysInfo[0];if("Admin"==i.getPrivilege()?e.admincheck=!0:e.admincheck=!1,e.selectedDay="",e.subtitle="",e.datetitle="",e.listBtnTitle=[],i.getAdBtnTitle().then(function(t){e.listBtnTitle=t.objects,e.btnLinkTitle=e.listBtnTitle[0].tittle}),e.ForwordStore=function(){localStorage.setItem("ecode",e.currentval.event_code),localStorage.setItem("dcode",e.seldayInfo.dayID),sessionStorage.setItem("redirectFromAd",angular.toJson(e.currentval)),window.location="/store-adspace-buy"},e.getSlot=function(t){$("#loading").show(),i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(a){1==a.result&&(e.timeNow=e.setOffset(a.local_time_now,0),e.timeNowTmzone=a.local_time_now,e.localTimeNow=new Date,i.getAdspace({event_code:e.currentval.event_code,day_id:t}).then(function(t){if(1==t.result){if(e.reachSlotlimit=!1,e.timeSlotData=t.ad_slots,e.eventOffset=t.eo,e.maxSlots=t.max_slots,e.slotInterval=t.slot_interval_in_minutes,e.adspaceSlots=t.add_purchased_count,e.allocatedSlotsCount=t.current_add_count,e.isactiveDecipher(),e.deliverdAds=[],e.nonDeliverdAds=[],e.adSlots=e.timeSlotData,angular.forEach(e.timeSlotData,function(t,a){1==e.timeSlotData[a].is_used&&(e.timeSlotData[a].ads.is_pushed?e.deliverdAds.push(e.timeSlotData[a]):e.nonDeliverdAds.push(e.timeSlotData[a]))}),t.add_purchased_count>0){0==t.add_purchased_count-t.current_add_count&&(e.reachSlotlimit=!0)}$("#loading").hide(),$("#container").fadeIn()}else $("#loading").hide(),$("#container").fadeIn()}))})},"/event/create-adspace"==window.location.pathname){var h=localStorage.getItem("dcode");console.log(Number(h)),console.log(e.eventDaysInfo);for(var y=e.eventDaysInfo.length-1;y>=0;y--)if(e.eventDaysInfo[y].dayID==Number(h)){e.seltab=e.eventDaysInfo[y].dayID,e.seldayInfo=e.eventDaysInfo[y],e.expday=e.eventDaysInfo[y].isDayActive;break}e.getSlot(h)}e.buyAds=function(){e.maxSlots!=e.allocatedSlotsCount&&e.ForwordStore()},e.getAdspace=function(){$("#loading").show(),i.getAdspace({event_code:e.currentval.event_code,day_id:d}).then(function(t){1==t.result&&(e.addsList=t.adds,$("#loading").hide(),$("#container").fadeIn())})},e.SelDate="",e.subtitle="",e.selectDate=function(t){e.SelDate=t,e.subtitle="",$(".subtitle").text("Select Time Slot"),e.getSlot(t)},e.ADselecttab=function(t,a){localStorage.setItem("dcode",t.dayID),e.seltab=t.dayID,e.expday=t.isDayActive,e.seldayInfo=t,e.getSlot(t.dayID),e.lesstime(t.endTime)},e.f_Delivery="all",e.viewAds=function(t){e.f_Delivery=t,1==t?e.timeSlotData=e.deliverdAds:0==t?e.timeSlotData=e.nonDeliverdAds:"all"==t&&(e.timeSlotData=e.adSlots,console.log(e.timeSlotData,"fdhty"))};var _=sessionStorage.getItem("dcode"),S=sessionStorage.getItem("Adtime");if(""!=_&&void 0!=_&&null!=_)e.selectedDay=_,e.SelDate=_,e.getSlot(_),e.subtitle=S,$(".subtitle").text(e.subtitle),sessionStorage.setItem("dcode",""),sessionStorage.setItem("Adtime","");else{var I=localStorage.getItem("dcode");if("/event/adspace"==window.location.pathname&&null!=I){e.seltab=I,e.seldayid=I;for(var y=0;y<e.eventDaysInfo.length;y++)e.eventDaysInfo[y].dayID==I&&(e.expday=e.eventDaysInfo[y].isDayActive,e.movebutton=y);e.getSlot(I),c(function(){if(e.ddbt=e.movebutton+1,e.ddbt>3){e.forl=e.ddbt-3;for(var t=0;t<e.forl;t++)$(".slider").diyslider("move","forth"),e.dbutton--}},100)}else e.getSlot(e.seltab)}if(e.createSlot=function(e,t,a){localStorage.setItem("dcode",e),localStorage.setItem("Adtime",t),localStorage.removeItem("adspaceRedirection"),void 0!=a?localStorage.setItem("slotInfo",JSON.stringify(a)):localStorage.removeItem("slotInfo"),window.location="create-adspace"},e.revokeAdObj="",e.revokeAd=function(t){e.revokeAdObj=t},e.DelAdspace=function(){$("#loading").show(),o({method:"POST",url:a.url+"/add_edit/",data:{opp:"delete",add_code:e.revokeAdObj.ads.add_code,day_id:e.seltab,old_slot:e.revokeAdObj.slot_no,new_slot:""}}).then(function(t){e.data2=t.data,null==e.data2.result||void 0==e.data2.result?(e.errormsg2=!0,e.data2.error=i.errorMsg[1]):0==e.data2.result?(e.errormsg2=!0,e.data2.error=e.data2.message):(e.errormsg2=!0,e.data2.error=e.data2.message,e.getSlot(e.seltab),$("#adspace-delete").modal("hide")),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data2={},e.errormsg2=!0,(t.status==-1||null==t.data)&&0==m.online?e.data2.error=i.errorMsg[0]:e.data2.error=i.errorMsg[1],$("#adspace-delete").modal("hide"),$("#loading").hide(),$("#container").fadeIn()})},e.editAdObj="",e.editAd=function(t){e.currentLocalTime(),e.editAdObj=t},e.EditAdspace=function(){$("#loading").show(),o({method:"POST",url:a.url+"/add_edit/",data:{opp:"edit",add_code:e.editAdObj.ads.add_code,day_id:e.seltab,old_slot:e.editAdObj.slot_no,new_slot:e.subtitle.slot_no}}).then(function(t){e.data2=t.data,null==e.data2.result||void 0==e.data2.result?(e.errormsg2=!0,e.data2.error=i.errorMsg[1]):0==e.data2.result?(e.errormsg2=!0,e.data2.error=e.data2.message):(e.errormsg2=!0,e.data2.error=e.data2.message,e.getSlot(e.seltab),$("#adspace-change").modal("hide")),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data2={},e.errormsg2=!0,(t.status==-1||null==t.data)&&0==m.online?e.data2.error=i.errorMsg[0]:e.data2.error=i.errorMsg[1],$("#adspace-delete").modal("hide"),$("#loading").hide(),$("#container").fadeIn()})},e.urlchange=function(){/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.weburl)?e.urlrequired=!1:e.urlrequired=!0},e.CreateAD=function(){e.errormsg=!1,$("#loading").show();var t=new FormData;t.append("event_code",e.currentval.event_code),angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,a){t.append("image",e.file)}),0==e.adPic.getFiles(e.adPic.FILE_TYPES.VALID).length&&t.append("image",""),t.append("tittle",e.title),t.append("url",e.weburl),t.append("day",localStorage.getItem("dcode")),1==e.custom?(t.append("display_time",moment(e.setOffset(e.subtitle.display_time,e.eventOffset)).format("YYYY-MM-DD HH:mm")),t.append("slot_no",e.subtitle.slot_no)):(t.append("display_time",""),t.append("slot_no",0)),t.append("button_tittle",e.btnLinkTitle),e.data={},o({method:"POST",url:a.url+"/add/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=i.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message,$("#loading").hide(),$("#container").fadeIn()):1==e.data.result&&(e.errormsg=!0,
localStorage.setItem("adspaceRedirection","yes"),e.submitted=!1,e.title="",e.weburl="",e.SelDate="",e.subtitle="",$(".subtitle").text("Select Time Slot"),angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.imageSrc="",window.location="/event/adspace")},function(t){e.data={},e.errormsg=!0,t.status!=-1&&null!=t.data||0!=m.online?e.data.error=i.errorMsg[1]:e.data.error=i.errorMsg[0],$("#loading").hide()})},e.$on("$dropletReady",function(){e.adPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.changeSubtype=function(t){if($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show(),""==t)e.subtitle=t,$(".subtitle").text("Select Type");else{e.subtitle=t,console.log(t);var a="";a=1==e.is_time_format_24?r("date")(e.setOffset(t.display_time,e.currentval.eo),"HH:mm"):r("date")(e.setOffset(t.display_time,e.currentval.eo),"hh:mm a"),$(".subtitle").text(a)}},void 0!=localStorage.getItem("slotInfo")&&"/event/create-adspace"==window.location.pathname){$(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show();var w=angular.fromJson(localStorage.getItem("slotInfo"));e.subtitle=w;var b;b=1==e.is_time_format_24?r("date")(e.setOffset(w.display_time,e.currentval.eo),"HH:mm"):r("date")(e.setOffset(w.display_time,e.currentval.eo),"hh:mm a"),c(function(){$(".subtitle").text(b)},100)}$(document).on("click",".subtype_dropdown .primary_nav_wrap ul li",function(){$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret02"),$(".subtype_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),s.on("click",function(e){var t=$(".subtype_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret01"))}),e.changeBtnLink=function(t){$(".btnLink_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),""==t?(e.btnLinkTitle=t,$(".subtitle").text("Select Title")):e.btnLinkTitle=t},$(document).on("click",".btnLink_dropdown .primary_nav_wrap ul li",function(){$(".btnLink_dropdown img").removeClass(),$(".btnLink_dropdown img").addClass("caret02"),$(".btnLink_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),s.on("click",function(e){var t=$(".btnLink_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||($(".btnLink_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".btnLink_dropdown img").removeClass(),$(".btnLink_dropdown img").addClass("caret01"))}),e.changeDate=function(t){$(".date_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".datetitle").show(),""==t?(e.datetitle=t,$(".datetitle").text("Select Day")):(e.getTimeSlot(t),e.datetitle=t,$(".datetitle").text(e.days[t].day_name),e.subtitle="",$(".subtitle").text("Select Time Slot"))},$(document).on("click",".date_dropdown .primary_nav_wrap ul li",function(){$(".date_dropdown img").removeClass(),$(".date_dropdown img").addClass("caret02"),$(".date_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),s.on("click",function(e){var t=$(".date_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".datetitle").css("display")||($(".date_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".date_dropdown img").removeClass(),$(".date_dropdown img").addClass("caret01"))}),e.errorscroll=function(){e.createForm.adPic.$setValidity("minsizeval",!0),e.createForm.adPic.$setValidity("minDimension",!0),e.createForm.adPic.$setValidity("ratioval",!0),void 0==e.title||""==e.title||null==e.title||e.imageSrc||c(function(){t.scrollJquery("errorimg")},100)},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=i.dataURItoBlob(t);"adPic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"adPic"==e.cropType&&(e.imageSrc="",angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletFileAdded",function(t,a){var o=e.adPic.getFiles(e.adPic.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?(e.createForm.adPic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.createForm.adPic.$setValidity("minsizeval",!0),l.readAsDataUrl(t.file,e).then(function(a){i.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.createForm.adPic.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=a:(e.cropType="adPic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.createForm.adPic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.adPic.getFiles(e.adPic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),0==m.online&&alert("You are not connected to internet")}]),app.controller("EventShareboxController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","$rootScope","$timeout","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){e.dashboardsUrl=i.dashboardUrl();var d=localStorage.getItem("selectedEventId");e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,void 0!==d&&null!==d||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - FileBank",e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.currentLocalTime=function(){i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(t){1==t.result&&(e.timeNow=t.local_time_now,e.localTimeNow=new Date)})},e.checkTimeNow=function(t){var a=((new Date).getTime()-e.localTimeNow.getTime())/1e3;return a/=60,!(e.setOffset(e.timeNow,Math.abs(Math.round(a)))>e.setOffset(t,e.currentval.eo))},e.locationHref=window.location.pathname,"Admin"==i.getPrivilege()?e.privilege=!0:e.privilege=!1;var m=e.setOffset(e.currentval.start_date,e.currentval.eo),p=e.setOffset(e.currentval.end_date,e.currentval.eo),u=r("date")(m,"yyyy-MM-dd"),g=r("date")(p,"yyyy-MM-dd");e.dayscount=t.dateDiffInDays(new Date(u),new Date(g)),e.dates=t.Dateslist(u,e.dayscount),e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),console.log(e.eventDaysInfo),e.seltab=e.eventDaysInfo[0].dayID,e.expday=e.eventDaysInfo[0].isDayActive,e.dName=e.eventDaysInfo[0].dayTitle,e.dbutton=e.eventDaysInfo.length-3,s(function(){$(".slider").length>0&&$(".slider").diyslider({width:"100%",height:"51px",minSlides:2,loop:!1,moveSlides:1})},100),e.setDayInfo=function(){angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.days[t]=e.eventDaysInfo[o])})})},e.setDayInfo(),e.selecttab=function(t){e.seltab=t.dayID,e.expday=t.isDayActive,e.dName=t.dayTitle,e.alternative=!1},e.totallist="",e.listallSessions=function(){var t={bs:1,event_code:e.currentval.event_code};i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(a){1==a.result&&(e.timeNow=a.local_time_now,e.localTimeNow=new Date,i.getallSessions(t).then(function(t){if(1==t.result){e.sessionData=t.sessions,e.eo=t.eo,e.totallist=e.sessionData,e.attach=[],e.notattach=[];for(var a=0;a<e.sessionData.length;a++)1==e.sessionData[a].session_type&&(0==e.sessionData[a].file_bank.session_files.length?e.notattach.push(e.sessionData[a]):e.attach.push(e.sessionData[a]));console.log(e.attach,e.notattach)}}),$("#loading").hide())})},e.listallSessions(),e.zerofile=!0,e.$on("$dropletReady",function(){e.sharefiles.allowedExtensions(["xlsx","xlsm","xlsb","xls","xml","xla","xlw","pdf","doc","docx","csv","txt"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){var o=0;if(e.varfile=[],e.sss=e.sizefile=e.maxfive=!0,e.statusdisable=!1,e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length>0){if(angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(t,a){o+=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[a].file.size,0==t.file.size||a>=e.maxfile?(0==t.file.size?e.zerofile=!1:e.maxfive=!1,t.setType(4)):e.uploadFilesize.uploaded_file_size+o>5e7?(e.sizefile=!1,e.statusdisable=!0):e.sizefile=!0}),e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length>1)for(var r=0;r<e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length-1;r++)e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length-1].file.name==e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[r].file.name&&(e.existfilename=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[r].file.name,e.sss=!1,e.statusdisable=!0);for(var n=0;n<e.uploadFilesize.file_bank.session_files.length;n++)for(var r=0;r<e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length;r++)e.uploadFilesize.file_bank.session_files[n].file_name==e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[r].file.name&&(e.existfilename=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[r].file.name,e.sss=!1,e.statusdisable=!0);console.log(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length,e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID))}}),e.$on("$dropletFileDeleted",function(){var t=0;if(e.sss=e.sizefile=e.zerofile=e.maxfive=!0,e.statusdisable=!1,e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length>0){angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(a,o){t+=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[o].file.size,o>=e.maxfile?a.setType(4):e.uploadFilesize.uploaded_file_size+t>1e8?(e.sizefile=!1,e.statusdisable=!0):e.sizefile=!0});for(var a=0;a<e.uploadFilesize.file_bank.session_files.length;a++)for(var o=0;o<e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length;o++)e.uploadFilesize.file_bank.session_files[a].file_name==e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[o].file.name&&(e.existfilename=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[o].file.name,e.sss=!1,e.statusdisable=!0);if(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length>1)for(var o=0;o<e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length-1;o++)e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length-1].file.name==e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[o].file.name&&(e.existfilename=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[o].file.name,e.sss=!1,e.statusdisable=!0)}}),e.$on("$dropletError",function(){}),e.session=e,e.session.file=[],e.showdat=function(){e.zerofile=!0},e.uploadFile=function(t,a){e.uploadcode=t,e.uploadFilesize=a,e.maxfile=5-e.uploadFilesize.file_bank.session_files.length,e.sessionname=a.tittle},e.addFileSession=function(t){console.log(e.filedata);var r=new FormData;e.description={},void 0==e.session.file[e.uploadcode]&&(e.session.file[e.uploadcode]=[]),angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(t,a){e.session.file[e.uploadcode].push(t.file),r.append(a,t.file),t.setType(4),e.description[t.file.name]=e.filedata[a].discription}),r.append("session_code",e.uploadcode),console.log("lhdfgk",e.description),r.append("description",angular.toJson(e.description)),$("#loading").show(),o({method:"POST",url:a.url+"/file_upload/",data:r,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){$("#loading").hide(),1==t.data.result?(c(),e.nextarea=!1,e.listallSessions(),e.filedata=[]):0==t.data.result&&($("#uploadfile").modal("hide"),e.messages=t.data.message)},function(e){})},e.nextstep=function(){if(c(),0!==e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length){$("#uploadfile").modal("hide"),e.nextarea=e.exist=!0,console.log(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length),e.filedata=[];for(var t=0;t<e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length;t++){var a={filevalue:e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID)[t].file.name,discription:""};e.filedata.push(a)}}console.log(e.filedata)},e.cancelmodel=function(){$("#uploadfile").modal("hide"),e.dd=!1,e.zerofile=!0,angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.filedata=[]},e.revokepop=function(t,a){e.share_box_code=t,e.fname=a},e.fdelete=function(t){e.sessioncode=t,o({method:"POST",url:a.url+"/file_upload_edit/",data:{share_box_code:e.sessioncode,opp:"delete"}}).then(function(t){1==t.data.result?e.listallSessions():0==t.data.result&&console.log(t.data.message)},function(e){console.log(e)})},e.allsession="gp-black",e.shaowall=function(){e.listallSessions(),e.allsession="gp-black",e.showblack=e.attachshowblack="gp-blue"},e.alternative=!1,e.attachfile=function(){e.sessionData=[],e.attachshowblack="gp-black",e.showblack=e.allsession="gp-blue",e.alternative=!0,e.fileattach="file attached";for(var t=0;t<e.totallist.length;t++)0!=e.totallist[t].file_bank.session_files&&e.sessionData.push(e.totallist[t])},e.notattachfile=function(){e.sessionData=[],e.showblack="gp-black",e.attachshowblack=e.allsession="gp-blue",e.alternative=!0,e.fileattach="not file attached";for(var t=0;t<e.totallist.length;t++)0==e.totallist[t].file_bank.session_files&&e.sessionData.push(e.totallist[t])},e.show=function(t){0!=t&&(e.valuses="At a time upload one file")},0==l.online&&alert("You are not connected to internet")}]),app.controller("VisitPassController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){var d=localStorage.getItem("selectedEventId");void 0!==d&&null!==d||(window.location="/events"),localStorage.removeItem("camImage"),void 0==localStorage.getItem("creategatepass")&&(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.validateMail=function(){return!!/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(e.email)},e.checkAccount=function(){e.emailvalid=e.validateMail(),e.emailvalid&&($("#loading").show(),o({method:"POST",url:a.url+"/gate_pass_check/",data:{event_code:e.currentval.event_code,email:e.email}}).then(function(t){1==t.data.result?t.data.gate_pass_check_date.redirect?(localStorage.setItem("printGatepass",angular.toJson(t.data.gate_pass_check_date)),window.location="/event/create-gatepass"):0==t.data.gate_pass_check_date.redirect&&($("#loading").hide(),$("#container").fadeIn(),e.pdfUrl=t.data.gate_pass_check_date.gate_pass_url,$("#myModal-download").modal("show")):0==t.data.result&&(e.gatepass.error=t.data.message,e.gatepass.errormsg=!0,$("#loading").hide(),$("#container").fadeIn())},function(t){e.checkIntime={},(t.status==-1||null==t.data)&&0==s.online?e.checkIntime.error=i.errorMsg[0]:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},e.closeModal=function(){e.email="",$("#myModal-download").modal("hide"),window.location="/event/gatekeeper"},e.cancelVg=function(){localStorage.removeItem("creategatepass")},e.vistorGatepass=function(){localStorage.removeItem("printGatepass"),window.location="/event/create-gatepass"},0==s.online&&alert("You are not connected to internet")}]),app.controller("GatepassController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$rootScope","$anchorScroll","$timeout","$window",function(e,t,a,o,r,n,i,l,s,c,d,m){var p=localStorage.getItem("selectedEventId");void 0!==p&&null!==p||(window.location="/events"),void 0==localStorage.getItem("creategatepass")&&(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.specPeople=e.currentval.sp_people;var u={group_tittle:"Delegates",id:10,single_entity_tittle:"Delegate"};e.specPeople=e.specPeople.concat(u),e.visitPass=!0,null!=localStorage.getItem("printGatepass")&&(e.visitPass=!1,e.gatePassinfo=angular.fromJson(localStorage.getItem("printGatepass")),e.full_name=e.gatePassinfo.full_name,e.designation=e.gatePassinfo.designation,e.company_name=e.gatePassinfo.company_name,e.imageSrc=e.gatePassinfo.profile_picture,e.email=e.gatePassinfo.email),e.ticketSel=function(t){e.selectTicketval=t;for(var a=0;a<e.ticketsdata.length&&e.ticketsdata.ticket_code!=t;a++);},e.emailFormat=/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/,e.allTickets=function(){$("#loading").show(),i.getTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,$("#loading").hide(),$("#container").fadeIn(),0==e.visitPass&&e.ticketSel(e.gatePassinfo.ticket_code))})},e.allTickets(),e.selectDelType=function(t){e.selectedDelval=t;for(var a=0;a<e.specPeople.length&&e.specPeople.id!=t;a++);},0==e.visitPass&&e.selectDelType(e.gatePassinfo.delegate_type),e.checkImage=function(){$("#take-picture").modal("hide"),void 0!=localStorage.getItem("camImage")&&(e.imageSrc=localStorage.getItem("camImage"),e.iswebCamimg=!0)},e.removeCamImg=function(){e.imageSrc=null,e.iswebCamimg=!1,localStorage.removeItem("camImage")},e.cancelcreategatepass=function(){localStorage.removeItem("creategatepass")},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=i.dataURItoBlob(t);"floorPic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"floorPic"==e.cropType&&(e.imageSrc="",angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.floorPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){var o=e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(t,a){console.log("test",t.file.size),a!=o-1?t.setType(4):t.file.size>5242880?(e.gatepassForm.floorPic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.gatepassForm.floorPic.$setValidity("minsizeval",!0),l.readAsDataUrl(t.file,e).then(function(a){i.getImgDimensions(a,function(o,r){o>=512&&r>=512?(e.gatepassForm.floorPic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc=a:(e.cropType="floorPic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.4),$("#crop-image").modal("show"))):(e.gatepassForm.floorPic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.scrollToError=function(){d(function(){e.submitted&&void 0==e.selectedDelval?t.scrollJquery("spdel"):e.submitted&&void 0==e.selectTicketval&&t.scrollJquery("selticket")},100)},e.generateGatePass=function(){$("#loading").show();var t=new FormData;if(t.append("delegate_type",e.selectedDelval),t.append("ticket_code",e.selectTicketval),t.append("company_name",e.company_name),t.append("full_name",e.full_name),t.append("designation",e.designation),1==e.visitPass||null==e.gatePassinfo.profile_picture)if(e.iswebCamimg)t.append("profile_picture",i.dataURItoBlob(e.imageSrc));else{angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,a){t.append("profile_picture",e.file)});var r=e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length;0==r&&t.append("profile_picture","")}else t.append("profile_picture",e.gatePassinfo.profile_picture);1==e.visitPass?t.append("yara_user_code",""):t.append("yara_user_code",e.gatePassinfo.yara_user_code),t.append("email",e.email),o({method:"POST",url:a.url+"/gate_pass/custom/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,$("#loading").hide(),$("#container").fadeIn(),0==e.data.result?(e.errorstatus=!0,e.errormsg=e.data.message):1==e.data.result&&(localStorage.removeItem("printGatepass"),localStorage.removeItem("creategatepass"),e.pdfUrl=e.data.gate_pass_url,console.log(e.pdfUrl),$("#myModal-download").modal("show"))},function(t){e.errorstatus=!0,e.shownav=!1,(t.status==-1||null==t.data)&&0==s.online?e.errormsg=i.errorMsg[0]:e.errormsg=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.closeModal=function(){$("#myModal-download").modal("hide"),window.location="/event/gatekeeper"},e.takePicture=!1,e.showCam=function(){},e.hideCamera=function(){e.takePicture=!1,$("#captureImg").hide()},e.checkWebcamneeded=function(){console.log("reach here"),console.log(s.browser),"Safari"!=s.browser?(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?e.takePicture=!0:(d(function(){$("#cam-notsupport").show()},100),e.iswebcamWork=!1,console.log("3"+e.iswebcamWork))):d(function(){$("#cam-notsupport").show()},100)},0==s.online&&alert("You are not connected to internet")}]),app.controller("EventGatekeeperController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$rootScope","$anchorScroll","$timeout",function(e,t,a,o,r,n,i,l,s,c,d){e.dashboardsUrl=i.dashboardUrl(),"Admin"==i.getPrivilege(5)?e.privilege=!0:e.privilege=!1,e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1;var m=localStorage.getItem("selectedEventId");void 0!==m&&null!==m||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.setTitle=function(t){document.title="YARA - "+e.currentval.short_name+" - "+t},e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)};var p=e.setOffset(e.currentval.start_date,e.currentval.eo),u=e.setOffset(e.currentval.end_date,e.currentval.eo),g=r("date")(p,"yyyy-MM-dd"),f=r("date")(u,"yyyy-MM-dd");e.dayscount=t.dateDiffInDays(new Date(g),new Date(f)),e.dates=t.Dateslist(g,e.dayscount),e.selectedval=[],e.s=t,e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),e.preCheckinTime=function(){angular.forEach(e.pre_checkin_data,function(t,a){e.seltab==e.pre_checkin_data[a].day_id&&(e.gatePassHour=e.pre_checkin_data[a].pre_checkin_time,e.checkinStarted=e.pre_checkin_data[a].checkin_started)})},e.gatekeeperInfo=function(){i.gatekeeperInfo(e.currentval.event_code).then(function(t){1==t.result&&(e.img=t.gate_pass_logo,e.pre_checkin_data=t.pre_checkin_data,"/event/setup-gatekeeper"==window.location.pathname&&angular.forEach(e.eventDaysInfo,function(t,a){angular.forEach(e.pre_checkin_data,function(t,o){e.eventDaysInfo[a].dayID==e.pre_checkin_data[o].day_id&&(e.eventDaysInfo[a].checkinStarted=e.pre_checkin_data[o].checkin_started,e.eventDaysInfo[a].preCheckinTime=e.pre_checkin_data[o].pre_checkin_time,e.GK.TimeSel[e.eventDaysInfo[a].dayID]=e.pre_checkin_data[o].pre_checkin_time)})}),e.preCheckinTime(),$("#loading").hide(),$("#container").fadeIn())})},e.gatekeeperInfo(),e.cancelEditLogo=function(){console.log("cancelEditLogo"),console.log(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.INVALID)),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.INVALID),function(e,t){console.log(e),console.log(t),e.setType(4)})},e.logoChange=function(){e.GKlogoform.$valid=!0,e.imageSrc=e.img},e.setDayName=function(){angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.days[t]=e.eventDaysInfo[o])})})},e.setDayName();var v=localStorage.getItem("gatetab");e.tabsid=!1;for(var h=0;h<e.eventDaysInfo.length;h++)e.eventDaysInfo[h].dayID==v&&(e.seltab=v,e.gettb=v,e.isDayActive=e.eventDaysInfo[h].isDayActive,e.tabsid=!0,e.movebutton=h,e.day_title=e.eventDaysInfo[h].dayTitle);0==e.tabsid&&(e.seltab=e.eventDaysInfo[0].dayID,e.isDayActive=e.eventDaysInfo[0].isDayActive,e.gettb=e.eventDaysInfo[0].dayID,e.day_title=e.eventDaysInfo[0].dayTitle),d(function(){if(e.ddbt=e.movebutton+1,e.ddbt>3){e.forl=e.ddbt-3;for(var t=0;t<e.forl;t++)$(".slider").diyslider("move","forth"),e.dbutton--}},100),e.gatecodedownlode=function(){i.getgatekeepercode(e.currentval.event_code).then(function(t){1==t.result&&(e.gatecodeDownload=t)})},"/event/setup-gatekeeper"!=window.location.pathname?localStorage.removeItem("setupGk"):"/event/setup-gatekeeper"==window.location.pathname&&(void 0==localStorage.getItem("setupGk")&&(window.location="/events"),e.gatecodedownlode()),e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},e.inc=0,e.gatecodedownlode=function(){i.getgatekeepercode(e.currentval.event_code).then(function(t){1==t.result&&(e.gatecodeDownload=t,$("#gatepass-download").modal("show"))})},e.selecttab=function(t){e.day_title=t.dayTitle,e.EndList=!1,localStorage.setItem("gatetab",t.dayID),e.seltab=t.dayID,e.preCheckinTime(),e.isDayActive=t.isDayActive,e.gatekeeperList=[],e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},0==e.params.offset&&e.gatekeeperPeopleinformation()},e.gatekeeperList=[],e.EndList=!1,e.blockScroll=!1,e.searchCall=!1,e.gatekeeperPeopleinformation=function(){0==e.EndList&&0==e.searchCall&&0==e.blockScroll&&(e.blockScroll=!0,e.searchCall=!1,i.gatekeeperPeopleinfo(e.params).then(function(t){1==t.result&&(e.gatekeeperList=e.gatekeeperList.concat(t.gate_keeper_data),e.EndList=t.end,e.blockScroll=!1,e.totalAppUsers=t.event_users,e.checkInUsers=t.checked_in_user,e.notCheckInUsers=t.not_checked_in_user)}))},e.gatekeeperPeopleinformation(),e.paginationGk=function(){void 0!=e.searchPeople&&e.searchPeople.length>0&&!e.EndList&&void 0!=e.params?e.getSearchPeople():e.EndList||void 0==e.params||(e.params.day_id=e.seltab,e.params.offset=e.params.limit,e.params.limit=e.params.limit+50,e.gatekeeperPeopleinformation())},e.creategatepass=function(){localStorage.setItem("creategatepass",!0)},e.$watch("searchPeople",function(t,a){void 0!=t&&null!=t&&t.length>0?(e.searchParam={},e.searchParam.q=e.searchPeople,e.searchParam.event_code=e.currentval.event_code,e.searchParam.ticket_code="",e.searchParam.on=null,e.searchParam.limit=50,e.searchParam.offset=0,e.searchParam.day_id=e.seltab,e.gatekeeperList=[],e.reachEnd=!1,e.searchCall=!0,e.getSearchPeople()):void 0!=t&&""!=t&&null!=t||void 0==a||(e.EndList=!1,e.gatekeeperList=[],e.searchCall=!1,e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},e.gatekeeperPeopleinformation())},!0),e.getSearchPeople=function(){0==e.reachEnd&&void 0!=e.searchParam&&0==e.blockScroll&&(e.blockScroll=!0,e.searchCall=!0,i.getPeoplesearchInfo(e.searchParam).then(function(t){if(1==t.result&&(e.gatekeeperList=e.gatekeeperList.concat(t.search_data),e.blockScroll=!1,e.searchCall=!1,e.reachEnd=t.end,0==t.end)){var a=e.gatekeeperList.length;e.searchParam.offset=a,e.searchParam.limit=a+50}}))},e.checkIn=function(t){$("#loading").show(),o({method:"POST",url:a.url+"/checkin/",data:{yara_user_code:t.yara_user_code,event_code:e.currentval.event_code,day_id:e.seltab}}).then(function(t){e.checkIntime=t.data,1==t.data.result?(e.gatekeeperList=[],e.EndList=!1,e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},0==e.params.offset&&e.gatekeeperPeopleinformation()):0==e.checkIntime.result?(e.checkIntime.error=e.checkIntime.message,$("#Check-in").modal("show")):e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.checkIntime={},(t.status==-1||null==t.data)&&0==s.online?e.checkIntime.error=i.errorMsg[0]:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.GK=e,e.resetImg=function(){e.GKlogoform.cmpylogo.$setValidity("minsizeval",!0),e.GKlogoform.cmpylogo.$setValidity("minDimension",!0),e.GKlogoform.cmpylogo.$setValidity("ratioval",!0),e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})};var y=[];e.saveGKtime=function(){angular.forEach(e.GK.TimeSel,function(e,t){var a={day_id:t,pre_checkin_time:e};y.push(a)}),e.setupStep="step2"},e.saveEntryTime=function(){$("#loading").show(),o({method:"POST",url:a.url+"/gate_pass/pre_checkin_time/",data:{pre_checkin_time:e.gatePassHour,event_code:e.currentval.event_code,day_id:e.seltab}}).then(function(t){e.checkIntime=t.data,1==t.data.result?($("#gatepass-manage-time").modal("hide"),e.gatekeeperInfo()):0==e.checkIntime.result?e.checkIntime.error=e.checkIntime.message:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.checkIntime={},(t.status==-1||null==t.data)&&0==s.online?e.checkIntime.error=i.errorMsg[0]:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.GKsetupDone=function(){e.errormsg1=!1;var t=new FormData;t.append("event_code",e.currentval.event_code),t.append("pre_checkin_times",JSON.stringify(y)),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,a){t.append("logo",e.file)}),0==e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length&&t.append("logo",""),o({method:"POST",url:a.url+"/gate_pass/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.cdata=t.data,1==e.cdata.result?(e.currentval.gate_keeper=1,localStorage.setItem("selEventsData",angular.toJson(e.currentval)),window.location="/event/gatekeeper"):0==e.cdata.result?(e.errormsg1=!0,e.cdata.error=e.cdata.message):(e.errormsg1=!0,e.cdata.error=i.errorMsg[1])},function(t){e.cdata={},e.errormsg1=!0,t.status!=-1&&null!=t.data||0!=s.online?e.cdata.error=i.errorMsg[1]:e.cdata.error=i.errorMsg[0]})},e.isCroping=!1,e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=i.dataURItoBlob(t);"cmpylogo"==e.cropType&&(e.imageSrc=t,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc",""),e.isCroping=!1},
e.resetCropImg=function(){"cmpylogo"==e.cropType&&(e.imageSrc="",angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})),e.isCroping=!1,$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.imageSrc="",e.cmpylogo.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){e.lodinghide=!1;var o=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(t,a){e.isCroping=!0,a!=o-1?t.setType(4):t.file.size>5242880?(e.GKlogoform.cmpylogo.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc="",e.isCroping=!1):(e.GKlogoform.cmpylogo.$setValidity("minsizeval",!0),l.readAsDataUrl(t.file,e).then(function(a){i.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.GKlogoform.cmpylogo.$setValidity("minDimension",!0),e.isCroping=!0,1024==o&&1024==r?(e.imageSrc=a,e.isCroping=!1):(e.cropType="cmpylogo",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.GKlogoform.cmpylogo.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))}),d(function(){e.lodinghide=!0},2e3)}),e.$on("$dropletFileDeleted",function(){e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.updateLogo=function(){$("#loading").show();var t=new FormData;t.append("event_code",e.currentval.event_code),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,a){t.append("logo",e.file)}),0==e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length&&t.append("logo",""),o({method:"POST",url:a.url+"/gate_pass/logo/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){1==t.data.result?($("#gatepass-add-logo").modal("hide"),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.gatekeeperInfo()):0==t.data.result&&(e.errormsg1=!0),$("#loading").hide(),$("#container").fadeIn()},function(t){e.cdata={},e.errormsg1=!0,t.status!=-1&&null!=t.data||0!=s.online?e.cdata.error=i.errorMsg[1]:e.cdata.error=i.errorMsg[0]})},e.removeimgBtn=!1,e.removeBtn=!0,e.changeimgBtn=!1,e.changeBtn=!0,e.$watch("imageSrc",function(){e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length>0?(e.removeimgBtn=!0,e.removeBtn=!1,e.changeimgBtn=!0,e.changeBtn=!1):""!=e.imageSrc?(e.removeimgBtn=!1,e.removeBtn=!0,e.changeimgBtn=!1,e.changeBtn=!0):""==e.imageSrc&&(e.removeimgBtn=!1,e.removeBtn=!1,e.changeimgBtn=!1,e.changeBtn=!1),e.img==e.imageSrc||""==e.imageSrc?e.disableSave=!0:e.disableSave=!1},!0),e.removeImg=function(){e.imageSrc=""},0==s.online&&alert("You are not connected to internet")}]),app.controller("EventTicketsController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","$timeout","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){e.dashboardsUrl=i.dashboardUrl();var d=localStorage.getItem("selectedEventId");void 0!==d&&null!==d||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),1==localStorage.getItem("redirectPpl")?(e.currTab="ticket",localStorage.removeItem("redirectPpl")):e.currTab="ticket";e.currentval.days;document.title="YARA - "+e.currentval.short_name+" - Ticket",e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.currentLocalTime=function(){i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(t){1==t.result&&(e.currentDate=r("date")(e.setOffset(t.local_time_now,0),"yyyy-MM-dd"),console.log(e.currentDate))})},e.currentLocalTime(),e.checkdate=function(e,t,a){return i.startend(e,t,a)};var m=e.setOffset(e.currentval.start_date,e.currentval.eo),p=e.setOffset(e.currentval.end_date,e.currentval.eo),u=r("date")(m,"yyyy-MM-dd"),g=r("date")(p,"yyyy-MM-dd");e.betdays=function(){var t=new Date(u),a=new Date(g),o=e.getDates(t,a);e.dates=o},e.getDates=function(e,t){for(var a=[],o=new Date(e);o<=t;)a.push(r("date")(new Date(o),"yyyy-MM-dd")),o.setDate(o.getDate()+1);return a},e.betdays(),e.selectedval=[],e.s=t,e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),e.setDayName=function(){angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.days[t]=e.eventDaysInfo[o])})})},e.setDayName(),1==e.dates.length&&(e.createTicketTab=e.days[e.dates[0]].dayID),"Day 1"==e.days[e.dates[0]].dayTitle?e.editedDay=!1:e.editedDay=!0,e.selectedtype=function(t,a){e.selectedval.indexOf(t)>=0?e.selectedval.splice(e.selectedval.indexOf(t),1):e.selectedval.push(t);var o=r("orderBy")(e.selectedval);o.length>0&&(e.createTicketTab=a[o[0]].dayID),e.selectedval.length>3&&(e.dbutton=e.selectedval.length-3)},e.ADselecttab=function(t){e.createTicketTab=t},e.errscroll=function(){l(function(){e.submitted&&""==e.SelColor&&e.ticketname.length>=2&&t.scrollJquery("ticketcolor")},100)},e.ticketDays=function(t,a){var o="",n="",i="",l="";return e.ds.food={},e.ds.acc={},e.ds.msg={},angular.forEach(a,function(t,a){var s=r("date")(e.setOffset(t.day,e.currentval.eo),"yyyy-MM-dd");e.dates.indexOf(s)>=0&&(pos=e.dates.indexOf(s)+1,l+="Day "+pos+", ",t.food_coupon&&(o+="Day "+pos+", "),t.messaging&&(i+="Day "+pos+", "),t.tracks.length>0&&(n+="Day "+pos+", "))}),""==o&&(o="No, "),""==n&&(n="No, "),""==i&&(i="No, "),""==l&&(l="No, "),e.ds.food[t]=o.slice(0,-2),e.ds.acc[t]=n.slice(0,-2),e.ds.msg[t]=i.slice(0,-2),l.slice(0,-2)},e.ds=e,e.ticketType="",e.tckUpdate="",e.getTickets=function(){$("#loading").show(),i.getTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,e.firsTicketname=e.ticketsdata[0].name)}),$("#loading").hide(),$("#container").fadeIn()},e.getTicketColors=function(t){i.getTicketColors(e.currentval.event_code).then(function(a){1==a.result&&(e.colorCodes=a.color_codes,""!=t&&(e.colorCodes[0]=t))})},e.dayselect=function(){},e.setColor=function(t){e.SelColor=t},e.addfocus=function(){l(function(){$(".daynameid").focus()},500)},e.modifyTicket="",e.editTicketName=function(t,a){e.requiredError=!1,e.errortrack=!1,e.invalidTKname=!1,e.modifyTicket=t,e.ticketInfo=a,$("#all-access-edit").modal("show"),e.disableedit=!0,l(function(){$("#modifyTicketid").focus()},500)},e.saveTicketname=function(t){e.requiredError=!1,void 0==t||0===t.length?e.requiredError=!0:(e.firsTicketname=t,$("#loading").hide(),o({method:"POST",url:a.url+"/ticket_edit/",data:{ticket_code:e.ticketInfo.ticket_code,opp:"edit",ticket_name:t,all_day_access:!0}}).then(function(t){e.resDelTicket=t.data,1==e.resDelTicket.result?(e.errortrack=!1,e.getTickets(),e.delname="",e.deltcode="",$("#all-access-edit").modal("hide")):0==e.resDelTicket.result?(e.resDelTicket.error=e.resDelTicket.message,e.errortrack=!0):e.resDelTicket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.resDelTicket={},(t.status==-1||null==t.data)&&0==s.online?e.resDelTicket.error=i.errorMsg[0]:e.resDelTicket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},e.getTickets(),e.ticketnamechange=function(t){if(e.invalidTKname=!1,void 0!=t){var a=t.toLowerCase(),o=/^ticket[0-9][0-9]*$/,r=/^ticket[^a-zA-Z0-9][0-9][0-9]*$/,n=/^ticket no[^a-zA-Z0-9][0-9][0-9]*$/,i=/^ticket no[0-9][0-9]*$/;"ticket"==a||"ticket no"==a?e.invalidTKname=!0:(o.test(a)||r.test(a)||n.test(a)||i.test(a))&&(e.invalidTKname=!0)}},e.TicketsType=function(t,a,o){c(),"update"!=t&&(e.ticketBtnName="Add Ticket",e.ticketHeaderName="Create New Ticket",e.ticketNameedit=!1,e.getTicketColors("")),e.respticket={},e.ticketType=t,e.tckUpdate=a,e.selectedval=[],e.ds.Food={},e.ds.Msg={},e.ds.Acc={},e.ds.SS={},e.tstep=!1,e.ticketname="",e.SelColor="",e.submitted=!1,1==e.dates.length&&e.selectedval.push(e.dates[0]),"update"==t&&(e.ticketBtnName="Edit Ticket",e.ticketHeaderName="Edit Ticket",e.ticketNameedit=!0,e.selectedval=[],e.ticode=a,angular.forEach(e.ticketsdata,function(t){if(t.ticket_code==a){e.ticketname=t.name,e.getTicketColors(t.color_code),e.SelColor=t.color_code,angular.forEach(t.days,function(t){var a=r("date")(e.setOffset(t.day,e.currentval.eo),"yyyy-MM-dd");if(e.dates.indexOf(a)>=0)if(e.selectedval.push(a),e.ds.Food[a]=t.food_coupon,e.ds.Msg[a]=t.messaging,t.tracks.length<=0)e.ds.Acc[a]=!1;else{e.ds.Acc[a]=!0;for(var o=0;o<e.tracks.length;o++)t.tracks.indexOf(e.tracks[o].name)>=0&&(e.ds.SS[a+e.tracks[o].track_code]=!0)}});var n=r("orderBy")(e.selectedval);n.length>0&&(e.createTicketTab=o[n[0]].dayID),e.selectedval.length>3&&(e.dbutton=e.selectedval.length-3)}})),l(function(){$("#ticketnameid").focus()},300)},e.cnfrDelete=function(t){e.delname=t.name,e.deltcode=t.ticket_code,e.resDelTicket={}},e.deleteTicket=function(){$("#loading").hide(),o({method:"POST",url:a.url+"/ticket_edit/",data:{ticket_code:e.deltcode,opp:"delete",event_code:e.currentval.event_code}}).then(function(t){e.resDelTicket=t.data,1==e.resDelTicket.result?(e.getTickets(),e.delname="",e.deltcode="",$("#myModal-ticket").modal("hide")):0==e.resDelTicket.result?e.resDelTicket.error=e.resDelTicket.message:e.resDelTicket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.resDelTicket={},(t.status==-1||null==t.data)&&0==s.online?e.resDelTicket.error=i.errorMsg[0]:e.resDelTicket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.addtickets=function(t){if(t.$valid){$("#loading").show(),e.daysdata1="[";var r=[];angular.forEach(e.selectedval,function(t,a){if(e.daysdata='{"day":"'+e.days[t].dayID+'",',e.daysdata+='"food_coupon":'+(void 0!=e.ds.Food[t]&&e.ds.Food[t])+",",e.daysdata+='"messaging":'+(void 0!=e.ds.Msg[t]&&e.ds.Msg[t])+",",e.ds.Acc[t]=void 0!=e.ds.Acc[t]&&e.ds.Acc[t],e.ds.Acc[t]){e.daysdata+='"tracks":[';for(var o=[],n=0;n<e.tracks.length;n++)e.ds.SS[t+e.tracks[n].track_code]=void 0!=e.ds.SS[t+e.tracks[n].track_code]&&e.ds.SS[t+e.tracks[n].track_code],e.ds.SS[t+e.tracks[n].track_code]&&o.push(e.tracks[n].track_code);for(var n=0;n<o.length;n++)0!=n&&(e.daysdata+=","),e.daysdata+='"'+o[n]+'"';e.daysdata+="]"}else e.daysdata+='"tracks":[]';e.daysdata+="}",r.push(e.daysdata)});for(var n=0;n<r.length;n++)0!=n&&(e.daysdata1+=","),e.daysdata1+=r[n];e.daysdata1+="]",console.log("data",angular.fromJson(e.daysdata1)),"create"==e.ticketType?o({method:"POST",url:a.url+"/ticket/",data:{event_code:e.currentval.event_code,color_code:e.SelColor,ticket_name:e.ticketname,all_day_access:!1,days:angular.fromJson(e.daysdata1)}}).then(function(t){e.respticket=t.data,1==e.respticket.result?(e.getTickets(),e.tstep=!0,e.selectedval=[],e.SelColor="",e.ticketname="",e.submitted=!1):0==e.respticket.result?e.respticket.error=e.respticket.message:e.respticket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.respticket={},(t.status==-1||null==t.data)&&0==s.online?e.respticket.error=i.errorMsg[0]:e.respticket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}):"update"==e.ticketType?o({method:"POST",url:a.url+"/ticket_edit/",data:{ticket_code:e.tckUpdate,opp:"edit",event_code:e.currentval.event_code,color_code:e.SelColor,ticket_name:e.ticketname,all_day_access:!1,days:angular.fromJson(e.daysdata1)}}).then(function(t){e.respticket=t.data,1==e.respticket.result?(e.getTickets(),e.tstep=!0,e.ticketType="",e.selectedval=[],e.SelColor="",e.ticketname="",e.submitted=!1):0==e.respticket.result?e.respticket.error=e.respticket.message:e.respticket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.respticket={},(t.status==-1||null==t.data)&&0==s.online?e.respticket.error=i.errorMsg[0]:e.respticket.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}):($("#loading").hide(),$("#container").fadeIn())}},e.getTracks=function(){$("#loading").show(),i.getTracks(e.currentval.event_code).then(function(t){1==t.result&&(e.tracks=t.tracks,$("#loading").hide(),$("#container").fadeIn())})},e.getTracks(),e.SelDaysTrack=[],e.TrackDays=function(t){e.SelDaysTrack.indexOf(t)>=0?e.SelDaysTrack.splice(e.SelDaysTrack.indexOf(t),1):e.SelDaysTrack.push(t)},e.trackType="",e.trackUpdateVal="",e.createTrack=function(t,a){e.submittedTrack=!1,e.trackdata={},e.SelDaysTrack=[],e.trackname="",e.addtracks=!0,e.trackType=t,e.trackUpdateVal=a,e.editstatus=!1,1==e.dates.length&&e.SelDaysTrack.push(e.dates[0]),"update"==t&&(e.SelDaysTrack=[],e.editstatus=!0,e.tcode=a,angular.forEach(e.tracks,function(t){a==t.track_code&&(e.trackname=t.name,e.SelDaysTrack=t.days)})),l(function(){$("#tracknameid").focus()},300)},e.ticketchange=function(){angular.forEach(e.tracks,function(t){e.tcode==t.track_code&&(e.trackname==t.name?e.editstatus=!0:e.editstatus=!1)})},e.addtrack=function(t){e.trackConfr=0,$("#loading").show(),e.invalidTrack=!1;var r=/^track[1-9][0-9]*$/,n=/^track[^a-zA-Z0-9][0-9][0-9]*$/,l=e.trackname.toLowerCase();if("track"==e.trackname.toLowerCase()?(e.invalidTrack=!0,$("#loading").hide(),$("#container").fadeIn()):(r.test(l)||n.test(l))&&(e.invalidTrack=!0,$("#loading").hide(),$("#container").fadeIn()),"create"==e.trackType&&0==e.invalidTrack){var c=[];c.push(e.trackname),o({method:"POST",url:a.url+"/track/",data:{event_code:e.currentval.event_code,name:c,track_based:1}}).then(function(t){e.trackdata=t.data,1==e.trackdata.result?(e.addtracks=!1,e.trackname="",e.SelDaysTrack=[],e.getTracks()):0==e.trackdata.result?e.trackdata.error=e.trackdata.message:e.trackdata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.trackdata={},(t.status==-1||null==t.data)&&0==s.online?e.trackdata.error=i.errorMsg[0]:e.trackdata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})}else"update"==e.trackType&&0==e.invalidTrack&&o({method:"POST",url:a.url+"/track_edit/",data:{track_code:e.trackUpdateVal,opp:"edit",name:e.trackname}}).then(function(t){e.trackdata=t.data,1==e.trackdata.result?(e.addtracks=!1,e.trackname="",e.SelDaysTrack=[],e.getTracks()):0==e.trackdata.result?e.trackdata.error=e.trackdata.message:e.trackdata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.trackdata={},(t.status==-1||null==t.data)&&0==s.online?e.trackdata.error=i.errorMsg[0]:e.trackdata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.deltrackname="",e.deltrackcode="",e.cnrfTrackDel=function(t){e.deltrackname=t.name,e.deltrackcode=t.track_code,e.delTrackdata={}},e.deleteTrack=function(){$("#loading").show(),o({method:"POST",url:a.url+"/track_edit/",data:{track_code:e.deltrackcode,name:e.deltrackname,opp:"delete",event_code:e.currentval.event_code}}).then(function(t){e.delTrackdata=t.data,1==e.delTrackdata.result?(e.getTracks(),e.deltrackname="",e.deltrackcode="",$("#myModal-track").modal("hide")):0==e.delTrackdata.result?e.delTrackdata.error=e.delTrackdata.message:e.delTrackdata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.delTrackdata={},(t.status==-1||null==t.data)&&0==s.online?e.delTrackdata.error=i.errorMsg[0]:e.delTrackdata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.checkDayname=function(t){e.duplicateDayname=!1;var a=[];angular.forEach(e.ds.duplicates,function(t,a){e.ds.duplicates[a]=!1}),angular.forEach(e.ds.dayname,function(t,o){if(void 0!=e.ds.dayname[o]){var r={dayname:e.ds.dayname[o],date:o};a.push(r)}}),a=a.sort(function(e,t){var a=e.dayname.toLowerCase(),o=t.dayname.toLowerCase();return a<o?-1:a>o?1:0});for(var o=a,r=0;r<a.length-1;r++)o[r+1].dayname.toLowerCase()==o[r].dayname.toLowerCase()&&(e.ds.duplicates[o[r+1].date]=!0,e.duplicateDayname=!0);angular.forEach(e.ds.dayname,function(a,o){if(void 0!=e.ds.dayname[o]){var r="invalidDYname"+t;e[r]=!1,e.initialticket=!1;var n=e.ds.dayname[o].toLowerCase(),i=/^day[0-9][0-9]*$/,l=/^day[^a-zA-Z0-9][0-9][0-9]*$/,s=/^day no[^a-zA-Z0-9][0-9][0-9]*$/,c=/^day no[0-9][0-9]*$/;"day"==n||"day no"==n?(e[r]=!0,e.initialticket=!0):(i.test(n)||l.test(n)||s.test(n)||c.test(n))&&(e[r]=!0,e.initialticket=!0)}})},e.createDayName=function(){var t=[];angular.forEach(e.ds.dayname,function(a,o){var r={day_name:a,day_id:e.days[o].dayID};t.push(r)}),$("#loading").show(),o({method:"POST",url:a.url+"/event_days/",data:{days:t,event_code:e.currentval.event_code}}).then(function(t){if(e.DayNamedata=t.data,1==e.DayNamedata.result){e.addDayName=!1,e.submitted1=!1,e.editedDay=!0;var a=0;angular.forEach(e.dates,function(t){e.days[t].dayTitle=e.ds.dayname[t],a++}),angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.eventDaysInfo[o].dayTitle=e.days[t].dayTitle)})}),localStorage.setItem("selEventsData",angular.toJson(e.currentval))}else 0==e.DayNamedata.result?e.DayNamedata.error=e.DayNamedata.message:e.DayNamedata.error=i.errorMsg[1];$("#loading").hide(),$("#container").fadeIn()},function(t){e.DayNamedata={},(t.status==-1||null==t.data)&&0==s.online?e.DayNamedata.error=i.errorMsg[0]:e.DayNamedata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.editDay=function(t){e.dayNamexist=!1,e.onlyDay=!1,e.currtDayED=t,e.edSubmitted=!1,e.edDayname=e.days[e.currtDayED].dayTitle,e.edDayNamedata={},l(function(){$("#edDayname").focus()},500)},e.checkDaycontain=function(t){e.dayNamexist=!1,angular.forEach(e.currentval.days,function(a,o){o!==e.currtDayED&&e.currentval.days[o].day_name===t&&(e.dayNamexist=!0)})},e.editDayName=function(){var t=e.edDayname.split(" ");if(1===t.length&&"day"===t[0].toLowerCase())e.onlyDay=!0;else{var r=[];$("#loading").show();var n={day_name:e.edDayname,day_id:e.days[e.currtDayED].dayID};r.push(n),o({method:"POST",url:a.url+"/event_days/",data:{days:r,event_code:e.currentval.event_code}}).then(function(t){e.edDayNamedata=t.data,1==e.edDayNamedata.result?(e.days[e.currtDayED].dayTitle=e.edDayname,angular.forEach(e.currentval.days,function(t,a){e.currentval.days[a].dayID==e.days[e.currtDayED].dayID&&(e.currentval.days[a].dayTitle=e.edDayname)}),localStorage.setItem("selEventsData",angular.toJson(e.currentval)),$("#loading").hide(),$("#myModal-Dayname").modal("hide")):0==e.edDayNamedata.result?(e.edDayNamedata.error=e.edDayNamedata.message,e.dayNamexist=!0):e.edDayNamedata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.edDayNamedata={},(t.status==-1||null==t.data)&&0==s.online?e.edDayNamedata.error=i.errorMsg[0]:e.edDayNamedata.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})}},0==s.online&&alert("You are not connected to internet")}]),app.controller("EventPeopleController",["$scope","fileReader","$location","$http","YaraBaseUrl","GetDataService","$filter","APPService","$timeout","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c,d){e.dashUrl=n.dashboardUrl(),e.deleTypeinfo={id:10,group_tittle:"Delegates",single_entity_tittle:"Delegate"},e.f_sort=1,e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.setOffset=function(e,t){if(void 0!=e)return n.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return n.startend(e,t,a)},e.isFocusDemo=!0;var m=localStorage.getItem("selectedEventId");if(void 0===m||null===m)window.location="/events";else{e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata);var p=e.setOffset(e.currentval.start_date,e.currentval.eo),u=e.setOffset(e.currentval.end_date,e.currentval.eo),g=i("date")(p,"yyyy-MM-dd"),f=i("date")(u,"yyyy-MM-dd");if(e.betdays=function(){var t=new Date(g),a=new Date(f),o=e.getDates(t,a);e.dates=o},e.getDates=function(e,t){for(var a=[],o=new Date(e);o<=t;)a.push(i("date")(new Date(o),"yyyy-MM-dd")),o.setDate(o.getDate()+1);return a},e.betdays(),e.convertingPeoplelist=[],e.delegateDetails=e.currentval.sp_people[0],e.specPeople=[],angular.forEach(e.currentval.sp_people,function(t,a){10!=e.currentval.sp_people[a].id&&(e.specPeople.push(e.currentval.sp_people[a]),e.convertingPeoplelist.push(e.currentval.sp_people[a]))}),"/event/people"==window.location.pathname){var v={delegate:!1,speaker:!1,bulk:!1};localStorage.setItem("redirectionInfo",angular.toJson(v)),localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("editSpInfo"),localStorage.removeItem("spEdit")}var h=angular.fromJson(localStorage.getItem("redirectionInfo"));"/event/people"!=window.location.pathname&&null==h&&(window.location="/event"),"/event/add-special-delegate"==window.location.pathname?0!=h.speaker&&null!=h.speaker||(window.location="/event"):"/event/add-delegate"==window.location.pathname?0!=h.delegate&&null!=h.delegate||(window.location="/event"):"/event/upload-bulk-list"==window.location.pathname&&(0!=h.bulk&&null!=h.bulk||(window.location="/event")),e.diffDays=e.currentval.date_diff,null!==localStorage.getItem("sort")?e.f_sort=localStorage.getItem("sort"):e.f_sort=1,e.currentLogin=angular.fromJson(localStorage.getItem("Logininfo"))}e.setTitle=function(t){document.title="YARA - "+e.currentval.short_name+" - "+t},"Admin"==n.getPrivilege()?e.privilege=!0:e.privilege=!1;var g=i("date")(e.currentval.start_date,"yyyy-MM-dd"),f=i("date")(e.currentval.end_date,"yyyy-MM-dd");e.headerTitle="People",e.checkScocials=function(){var t=0;"company-website"==e.social_type&&7!=e.cmpyweb.length?t=1:"twitter"==e.social_type&&20!=e.cmpytwitter.length?t=1:"facebook"==e.social_type&&25!=e.cmpyfb.length?t=1:"linkedin"==e.social_type&&25!=e.cmpylink.length?t=1:"pinterest"==e.social_type&&26!=e.cmpypinterest.length?t=1:"tumblr"==e.social_type&&0!=e.cmpytumblr.length?t=1:"git-hub"==e.social_type&&19!=e.cmpygithub.length?t=1:"instagram"==e.social_type&&26!=e.cmpyinstagram.length&&(t=1);var a=n.getSocailId(e.social_type);1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.checkScocialDisabled=function(){var t=0;"company-website"==e.social_type&&e.Tcmpyweb.length>=7?t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.Tcmpyweb)?1:7==e.Tcmpyweb.length?1:0:"twitter"==e.social_type&&e.Tcmpytwitter.length>=20?t=1:"facebook"==e.social_type&&e.Tcmpyfb.length>=25?t=1:"linkedin"==e.social_type&&e.Tcmpylink.length>=25?t=1:"pinterest"==e.social_type&&e.Tcmpypinterest.length>=26?t=1:"tumblr"==e.social_type&&e.Tcmpytumblr.length>=0?t=1:"git-hub"==e.social_type&&e.Tcmpygithub.length>=19?t=1:"instagram"==e.social_type&&e.Tcmpyinstagram.length>=26&&(t=1),e.isSocialSave=1==t},e.$watchCollection("[Tcmpyweb,Tcmpytwitter,Tcmpyfb,Tcmpylink,Tcmpypinterest,Tcmpytumblr,Tcmpygithub,Tcmpyinstagram]",function(t){e.checkScocialDisabled()}),setTimeout(function(){e.cmpytumblr=e.Tcmpytumblr,e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram},1e3),e.saveSocials=function(){e.typeofchange="save",e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpytumblr=e.Tcmpytumblr,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram,e.checkScocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange="",setTimeout(function(){$("#"+e.social_type+"_id").focus();var t=$("#"+e.social_type+"_id").val().length;$("#"+e.social_type+"_id")[0].setSelectionRange(t,t)},1e3)}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(e.Tcmpyweb=e.cmpyweb,e.Tcmpyfb=e.cmpyfb,e.Tcmpytwitter=e.cmpytwitter,e.Tcmpylink=e.cmpylink,e.Tcmpypinterest=e.cmpypinterest,e.Tcmpytumblr=e.cmpytumblr,e.Tcmpygithub=e.cmpygithub,e.Tcmpyinstagram=e.cmpyinstagram)});var y=angular.fromJson(localStorage.getItem("delegateIdinfo"));e.ListPeoples=[],e.EndList=!1,void 0!=y?(e.f_user=y.id,e.f_username=y.single_entity_tittle):(e.f_user=10,e.f_username="Delegate"),e.params={offset:0,limit:0,type:e.f_user,initialize_ticket:1,event_code:e.currentval.event_code,s:e.f_sort},e.tickets=function(){if(e.delegateStep="step1",e.UpStep="step1",e.ticketsdata.length>1&&(e.delegateStep="step1",e.UpStep="step1"),e.ticketval="",void 0!=angular.fromJson(localStorage.getItem("ticketTabinfo"))){var t=angular.fromJson(localStorage.getItem("ticketTabinfo"));e.ticktselected=t.ticketCode,e.seltab=t.ticketCode,e.ticketinValid=t.ticketinValid}else e.ticktselected=e.ticketsdata[0].ticket_code,e.seltab=e.ticketsdata[0].ticket_code,e.ticketinValid=e.ticketsdata[0].is_validity_over;e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.getAllpeople(),e.ticket_name=e.ticketsdata[0].name;var a=sessionStorage.getItem("TicketSelected");void 0!=a&&(e.ticktselected=a,sessionStorage.removeItem("TicketSelected")),e.dbutton=e.ticketsdata.length-3,s(function(){$(".slider").length>0&&$(".slider").diyslider({width:"100%",height:"51px",minSlides:2,loop:!1,moveSlides:1})},100);var o=angular.fromJson(localStorage.getItem("ticketTabinfo"));if(void 0!=angular.fromJson(localStorage.getItem("ticketTabinfo"))&&null!=angular.fromJson(localStorage.getItem("ticketTabinfo"))){e.freshtab=!0;for(var r=0;r<e.ticketsdata.length;r++)e.ticketsdata[r].ticket_code==o.ticketCode&&(e.seltab=o.ticketCode,e.tottab=r,e.freshtab=!1,e.ticketinValid=o.ticketinValid)}e.freshtab&&(e.seltab=e.ticketsdata[0].ticket_code),s(function(){if(e.ddbt=e.tottab+1,e.ddbt>3){e.forl=e.ddbt-3;for(var t=0;t<e.forl;t++)$(".slider").diyslider("move","forth"),e.dbutton--}},100)},e.$watch("searchPeople",function(t,a){void 0!=t&&null!=t&&t.length>0?(e.searchParam={},e.searchParam.q=t,e.searchParam.event_code=e.currentval.event_code,e.searchParam.ticket_code=e.seltab,e.searchParam.on=e.f_user,e.searchParam.limit=50,e.searchParam.offset=0,e.searchParam.day_id=null,e.searchParam.s=e.f_sort,e.ListPeoples=[],e.reachEnd=!1,e.searchCall=!0,e.getSearchPeople()):void 0!=t&&""!=t&&null!=t||void 0==a||(e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.searchCall=!1,e.getAllpeople())},!0),e.getSearchPeople=function(){0==e.reachEnd&&void 0!=e.searchParam&&(e.blockScroll=!0,n.getPeoplesearchInfo(e.searchParam).then(function(t){if(1==t.result&&(e.blockScroll=!1,e.ListPeoples=e.ListPeoples.concat(t.search_data),e.searchCall=!1,e.reachEnd=t.end,0==t.end)){var a=e.ListPeoples.length;e.searchParam.offset=a,e.searchParam.limit=a+50}}))},e.removeSearch=function(){e.searchPeople="",e.searchCall=!1},e.getAllpeople=function(){$("#loading").hide(),0==e.EndList&&(e.blockScroll=!0,n.getPeopleInfo(e.params).then(function(t){1==t.result&&(e.blockScroll=!1,e.ListPeoples=e.ListPeoples.concat(t.delegates),e.EndList=t.end,1==e.params.initialize_ticket&&(e.ticketsdata=t.tickets,e.tickets()),e.delegateDetails=e.deleTypeinfo,void 0!=t.event_package_info.number_of_attendee&&(e.number_of_attendee_added=t.event_package_info.number_of_attendee_added,e.number_of_attendee=t.event_package_info.number_of_attendee))}))},"event/add-special-delegate"!=window.location.pathname&&e.getAllpeople(),e.allTickets=function(){e.ticketsdata=[],$("#loading").show(),n.getTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,$("#loading").hide(),$("#container").fadeIn())})},e.avilabileTickets=function(){n.getAvilabileTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.updatedTicketsdata=t.tickets)})},e.sortingOption=function(t){d(),localStorage.setItem("sort",t),e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,e.reachEnd=!1,e.f_sort=t,e.params.s=t,e.ListPeoples=[],void 0!=e.searchPeople||null!=e.searchPeople?e.getSearchPeople():e.getAllpeople()},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=n.dataURItoBlob(t);"SpkPic"==e.cropType&&(e.imageSrc1=t,angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"SpkPic"==e.cropType&&(e.imageSrc1="",angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){void 0!=e.sharefiles&&e.sharefiles.allowedExtensions(["xlsx","xls","csv","txt"]),void 0!=e.SpkPic&&e.SpkPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(a,o){if(e.cropPic="",void 0!=e.sharefiles){var r=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(e,t){t<r-1?e.setType(4):e.file.size>52428800&&e.setType(4)})}void 0!=e.SpkPic&&(r=e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID).length)>0&&angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(a,o){o!=r-1?a.setType(4):a.file.size>5242880?(e.speakerForm.SpkPic.$setValidity("minsizeval",!1),a.setType(4),e.imageSrc1=""):(e.speakerForm.SpkPic.$setValidity("minsizeval",!0),t.readAsDataUrl(a.file,e).then(function(t){n.getImgDimensions(t,function(o,r){o>=512&&r>=512?(e.speakerForm.SpkPic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc1=t:(e.cropPic="profile",e.cropType="SpkPic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:t}}),$(".image-editor").cropit("imageSrc",t),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.05),$("#crop-image").modal("show"))):(e.speakerForm.SpkPic.$setValidity("minDimension",!1),a.setType(4),e.imageSrc1=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){void 0!=e.SpkPic&&(len=e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID).length,len<=0&&(e.imageSrc1=""))}),e.$on("$dropletError",function(){}),e.searchScrollCall=!1,e.selecttab=function(t){e.seltab=t.ticket_code,e.ticketinValid=t.is_validity_over;var a={ticketCode:e.seltab,ticketinValid:e.ticketinValid};localStorage.setItem("ticketTabinfo",angular.toJson(a)),e.ListFrom=0,e.ListTo=10,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=t.ticket_code,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.getAllpeople()},e.ticketDays=function(t,a){var o="",r="",n="",l="";return e.ds.food={},e.ds.acc={},e.ds.msg={},angular.forEach(a,function(t,a){var s=new Date(t.day);s=i("date")(s,"yyyy-MM-dd"),pos=e.dates.indexOf(s)+1,l+="Day "+pos+", ",t.food_coupon&&(o+="Day "+pos+", "),t.messaging&&(n+="Day "+pos+", "),t.tracks.length>0&&(r+="Day "+pos+", ")}),e.ds.food[t]=o.slice(0,-2),e.ds.acc[t]=r.slice(0,-2),e.ds.msg[t]=n.slice(0,-2),l.slice(0,-2)},e.ds=e,e.ticktselected="",e.changetselect=function(t){var a={ticketCode:t.ticket_code,ticketinValid:t.is_validity_over};localStorage.setItem("ticketTabinfo",angular.toJson(a)),e.ticket_name=t.name,e.ticktselected=t.ticket_code,e.ticketinValid=t.is_validity_over},e.isExists_user=0,e.fliterPeopleList=function(t){localStorage.setItem("delegateIdinfo",angular.toJson(t)),e.f_user=t.id,e.f_username=t.single_entity_tittle,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,
0==e.params.offset&&e.getAllpeople()},e.preSelectTicket=function(e,t,a){var o=angular.fromJson(localStorage.getItem("redirectionInfo"));if(null==o)var o={delegate:!1,speaker:!1,bulk:!1};"add-delegate"==t?(o.delegate=!0,localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("delegateIdinfo",angular.toJson(a))):"add-special-delegate"==t?(o.speaker=!0,localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("delegateIdinfo",angular.toJson(a))):"upload-bulk-list"==t&&(o.bulk=!0,localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("delegateIdinfo",angular.toJson(a))),localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),sessionStorage.setItem("TicketSelected",e),window.location=t},e.addMoreItems=function(){e.EndList||void 0!=e.searchPeople&&0!=e.searchPeople.length?e.getSearchPeople():(e.params.ticket_code=e.seltab,e.params.offset=e.params.limit,e.params.limit=e.params.limit+50,e.params.type=e.f_user,e.getAllpeople())},e.blockCreation=!1,e.userData=null,e.checkEmail=function(t){var a=(localStorage.getItem("convertSp"),localStorage.getItem("editSpInfo"),localStorage.getItem("spEdit"));"true"!=a&&(console.log("reach inside"),e.isExists_user=0,e.blockCreation=!1,e.spname="",e.imageSrc1="",e.spkdesg="",e.spkcmpy="",e.spkabt="",e.Tcmpyweb="",e.Tcmpyfb="",e.Tcmpytwitter="",e.Tcmpylink="",e.Tcmpypinterest="",e.Tcmpytumblr="",e.Tcmpygithub="",e.Tcmpyinstagram="",s(function(){e.checkScocialDisabled(),e.saveSocials(),e.updateSocials()},1e3),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)&&"true"!=a&&($("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/sp_delegate_validate/",data:{email:t,event_code:e.currentval.event_code}}).then(function(t){e.direct=1,1==t.data.result?(d(),e.mailInfo=t.data,e.userData=t.data.user_data,void 0!=e.userData?(e.spname=e.userData.full_name,e.spkdesg=e.userData.designation,e.spkcmpy=e.userData.company_name,e.imageSrc1=e.userData.profile_picture,window.setTimeout(function(){$("textarea").height($("textarea")[0].scrollHeight)},500),void 0!=e.userData.socials&&e.userData.socials.length>0&&(angular.forEach(e.userData.socials,function(t){"Website"==t.social_provider?e.Tcmpyweb=t.link:"Tumblr"==t.social_provider?e.Tcmpytumblr=t.link:"Twitter"==t.social_provider?e.Tcmpytwitter=t.link:"LinkedIn"==t.social_provider?e.Tcmpylink=t.link:"Facebook"==t.social_provider?e.Tcmpyfb=t.link:"Pinterest"==t.social_provider?e.Tcmpypinterest=t.link:"GitHub"==t.social_provider?e.Tcmpygithub=t.link:"Instagram"==t.social_provider&&(e.Tcmpyinstagram=t.link)}),s(function(){e.checkScocialDisabled(),e.saveSocials(),e.updateSocials()},1e3))):e.userData=null,$("#loading").hide(),$("#container").fadeIn()):0==t.data.result&&(e.spname="",e.imageSrc1="",e.Tcmpyweb="",e.Tcmpyfb="",e.Tcmpytwitter="",e.Tcmpylink="",e.Tcmpypinterest="",e.Tcmpytumblr="",e.Tcmpygithub="",e.Tcmpyinstagram="",e.spkdesg="",e.spkcmpy="",e.spkabt="",s(function(){e.checkScocialDisabled(),e.saveSocials(),e.updateSocials()},1e3),e.errorMsg=t.data.message,e.blockCreation=!0,$("#loading").hide(),$("#container").fadeIn())},function(t){(t.status==-1||null==t.data)&&0==c.online?e.showerror=n.errorMsg[0]:e.showerror=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})))},e.manageTicket=function(){localStorage.setItem("redirectPpl",1),window.location="/event/ticket"},e.existsData={},e.checkDuplicates=function(){for(var t,a=!0,o=0;o<e.ds.emailDel.length;o++)if(""!=e.ds.emailDel[o]){var r=i("filter")(e.ds.emailDel,e.ds.emailDel[o]).length;if(r>1){a=!1,t=e.ds.emailDel.indexOf(e.ds.emailDel[o],o+1);break}}return void 0!=t&&null!=t&&l.scrollJquery("email_"+t),a},e.delegateCheck=function(t,a){$("#loading").show(),e.ds.exError[t].status=!1;var i=[a];o({method:"POST",url:r.url+"/delegate/",data:{emails:i,ticket_code:e.ticktselected}}).then(function(a){$("#loading").hide(),$("#container").fadeIn();var o=a.data;if(1==o.result)if(o.invited_emails.length>0)e.ds.exError[t].status=!0,e.ds.exError[t].msg=2;else if(o.non_account_emails.length>0)"/event/upload-bulk-list"==window.location.pathname?(e.ds.eLists.splice(t,1),e.ds.eLists.splice(t,0,o.non_account_emails[0])):(e.foundDelegate.non_account_emails.splice(t,1,o.non_account_emails[0]),e.ds.eListDis[t]=!0);else if(o.delegate_account_emails.length>0)if("/event/upload-bulk-list"==window.location.pathname)e.account.push(o.delegate_account_emails[0]),e.deleteDelegate(t),e.ds.eListDis[t]=!0;else{var r=e.ds.eListDis;e.ds.eListDis=[],angular.forEach(r,function(a,o){o!=t&&e.ds.eListDis.push(a)}),e.foundDelegate.delegate_account_emails.push(o.delegate_account_emails[0]),e.foundDelegate.non_account_emails.splice(t,1),e.ds.eList.splice(t,1)}else o.conflict_invited_emails.length>0&&(e.ds.exError[t].status=!0,e.ds.exError[t].msg=3);else 0==o.result?(e.ds.exError[t].status=!0,e.ds.exError[t].msg=4,e.errorMsg=e.existsData.message):(e.ds.exError[t].status=!0,e.ds.exError[t].msg=1)},function(a){e.ds.exError[t].status=!0,(a.status==-1||null==a.data)&&0==c.online?e.ds.exError[t].msg=n.errorMsg[0]:e.ds.exError[t].msg=n.errorMsg[1]})},e.delegateAdd=function(){e.addDelgData={},e.foundDelegate={},e.delegateAddemails=[],angular.forEach(e.ds.emailDel,function(t,a){1==e.validateMail(t)&&e.delegateAddemails.push(t)}),o({method:"POST",url:r.url+"/delegate/",data:{emails:e.delegateAddemails,ticket_code:e.ticktselected}}).then(function(t){if(1==t.data.result){e.foundDelegate=t.data,e.userOffset=t.data.uo;e.foundDelegate.total_emails_len>1?(e.ds.eList=[],e.ds.eListDis=[],e.ds.eListDeleted=[],e.delegateStep="step3"):(e.invitedAppuserActive=!0,e.invitedAppuser=[],e.invitedUser=[],e.checkoutAppuserActive=!0,e.checkoutAppuser=[],e.checkoutUser=[],e.delegateStep="step4",e.foundDelegate.invited_emails.length>0&&(e.foundDelegate.invited_emails[0].account_email?(e.invitedAppuser=e.foundDelegate.invited_emails,e.invitedAppuserActive=!1):e.invitedUser=e.foundDelegate.invited_emails),e.foundDelegate.delegate_account_emails.length>0?e.foundDelegate.delegate_account_emails[0].account_email&&(e.checkoutAppuser=e.foundDelegate.delegate_account_emails[0],e.checkoutAppuserActive=!1):e.foundDelegate.non_account_emails.length>0&&(console.log(e.foundDelegate.non_account_emails),e.checkoutUser=e.foundDelegate.non_account_emails))}else 0==e.existsData.result?e.existsData.error=e.existsData.message:e.existsData.error=n.errorMsg[1]},function(t){e.existsData={},(t.status==-1||null==t.data)&&0==c.online?e.existsData.error=n.errorMsg[0]:e.existsData.error=n.errorMsg[1]}),d()},e.validateMail=function(e){return!!/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(e)},e.addSingleDelegate=function(t){var a=[];$("#loading").show(),a.push(t),o({method:"POST",url:r.url+"/delegate/add/",data:{emails:a,ticket_code:e.ticktselected,validate:!0}}).then(function(t){e.addDelgData=t.data,1==e.addDelgData.result?window.location="people":0==e.addDelgData.result?e.addDelgData.error=e.addDelgData.message:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()},function(t){e.addDelgData={},(t.status==-1||null==t.data)&&0==c.online?e.addDelgData.error=n.errorMsg[0]:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()})},e.addDelgData={},e.delegateCreateFrom=function(){var t=[],a=[];$("#loading").show(),a=a.concat(e.ds.eList),void 0!=e.foundDelegate.delegate_account_emails&&e.foundDelegate.delegate_account_emails.length>0&&(angular.forEach(e.foundDelegate.delegate_account_emails,function(e){t.push(e.email)}),a=a.concat(t)),o({method:"POST",url:r.url+"/delegate/add/",data:{emails:a,ticket_code:e.ticktselected,validate:!0}}).then(function(t){e.addDelgData=t.data,1==e.addDelgData.result?window.location="people":0==e.addDelgData.result?e.addDelgData.error=e.addDelgData.message:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()},function(t){e.addDelgData={},t.status==-1||null==t.data?e.addDelgData.error=n.errorMsg[0]:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()})},e.countEmails=function(){var t=0;return t+=e.foundDelegate.other_account_emails.length,t+=e.foundDelegate.delegate_account_emails.length,t+=e.foundDelegate.non_account_emails.length,t+=e.foundDelegate.non_account_emails.length,t+=e.foundDelegate.conflict_invited_emails.length},e.DelCheck=function(){var t=[],a=[],o=[],r=[];void 0!=e.account&&(angular.forEach(e.ds.eListboxD,function(a,o){a||t.push(e.account[o])}),angular.forEach(t,function(e){a.push(!1)}),e.ds.eListboxD=a,e.account=t),angular.forEach(e.ds.eListbox,function(t,a){t||o.push(e.ds.eList[a])}),angular.forEach(o,function(e){r.push(!1)}),e.ds.eListbox=r,e.ds.eList=o,e.ds.eLists=o},e.deleteDelegate=function(t){e.ds.eListDeleted[t]=!0},e.DelDelegate=function(t){var a=[];angular.forEach(e.ds.eListbox,function(e,o){o!=t&&a.push(e)}),e.ds.eListbox=a,e.ds.eList.splice(t,1),e.ds.eLists.splice(t,1);var o=e.ds.eListDis,r=e.ds.exError;e.ds.eListDis=[],e.ds.exError=[],angular.forEach(o,function(a,o){o!=t&&(e.ds.eListDis.push(a),e.ds.exError.push(r[o]))})},e.DelDelegateList=function(t){var a=[];angular.forEach(e.ds.eListboxD,function(e,o){o!=t&&a.push(e)}),e.ds.eListboxD=a,e.account.splice(t,1)},e.allselCheck=function(){if(e.selAllList){var t=e.number_of_attendee-e.number_of_attendee_added,a=t;void 0!=e.account&&(a=Math.abs(t-e.account.length),angular.forEach(e.ds.eListboxD,function(a,o){e.ds.eListboxD[o]=o<t})),angular.forEach(e.ds.eListbox,function(t,o){e.ds.eListbox[o]=o<a})}else void 0!=e.account&&angular.forEach(e.ds.eListboxD,function(t,a){e.ds.eListboxD[a]=!1}),angular.forEach(e.ds.eListbox,function(t,a){e.ds.eListbox[a]=!1})},e.changeCheck=function(t){var a=e.number_of_attendee-e.number_of_attendee_added,o=e.ds.eList.length,r=i("FilterBoolObj")(e.ds.eListbox,!0).length;if(void 0!=e.account&&(o+=e.account.length,r+=i("FilterBoolObj")(e.ds.eListboxD,!0).length),a>o)e.selAllList=r==o;else{var n=Math.abs(a-o);e.selAllList=r==n}},e.delegateBulkFrom=function(){var t=[],a=[];angular.forEach(e.account,function(a,o){void 0!=e.account[o].email&&1==e.ds.eListboxD[o]&&t.push(e.account[o].email)}),angular.forEach(e.ds.eLists,function(t,o){1==e.ds.eListbox[o]&&0==e.ds.eListDeleted[o]&&a.push(e.ds.eLists[o])});var i={delegate_account_emails:t,non_account_emails:a};o({method:"POST",url:r.url+"/invite/",data:{event_code:e.currentval.event_code,ticket_code:e.ticktselected,emails:i}}).then(function(t){e.addDelgData=t.data,1==e.addDelgData.result?$("#successMsg").modal("show"):0==e.addDelgData.result?e.addDelgData.error=e.addDelgData.message:e.addDelgData.error=n.errorMsg[1]},function(t){e.addDelgData={},(t.status==-1||null==t.data)&&0==c.online?e.addDelgData.error=n.errorMsg[0]:e.addDelgData.error=n.errorMsg[1]})},e.InboxFocus=function(e){setTimeout(function(){$("#"+e).focus()},500)},e.ChecklistUpdate=function(){e.UpStep="step4"},e.selType="",e.selUpdateUser="",e.changeType=function(t,a){e.selUpdateUser=a,e.isExists_user=0,"create"==t?(e.spname="",e.SPKemail="",e.spkabt="",e.SpkPic="",e.SPKweb="",e.SPKfb="",e.SPKtwitter="",e.SPKlin="",e.ticketval="",e.spkdesg="",e.spkcmpy="",e.btntxt="ADD"):"update"==t&&(e.prtSPVal="ADDSP",e.btntxt="UPDATE",angular.forEach(e.SpkData,function(t){t.username==a&&(e.spname=(t.first_name+" "+t.middle_name+" "+t.last_name).trim(),e.SPKemail=t.contact_email,e.spkabt=t.description,e.SpkPic="",e.imageSrc1=t.profile_picture,e.SPKweb=t.website,e.SPKfb=t.facebook,e.SPKtwitter=t.twitter,e.SPKlin=t.linkedin,e.spkdesg=t.designation,e.spkcmpy=t.company_name,angular.forEach(e.ticketsdata,function(a){a.name==t.ticket_name&&(e.ticketval=a.ticket_code+"")}))}))},e.addSpeaker=function(t){void 0==e.cmpytumblr&&(e.cmpytumblr=""),$("#loading").show(),e.notConnectedNet=!1;navigator.onLine;"/event/add-special-delegate"==window.location.pathname&&localStorage.getItem("convertSp")&&(1==e.convSpeakerInfo.using_yara?(e.isExists_user=1,e.SPKemail=e.convSpeakerInfo.email):e.isExists_user=0),"/event/add-special-delegate"==window.location.pathname&&localStorage.getItem("spEdit")&&(1==e.editSpInfo.using_yara?(e.isExists_user=1,e.SPKemail=e.editSpInfo.email):e.isExists_user=0),e.errormsg=!1;var a=new FormData;a.append("event_code",e.currentval.event_code),a.append("delegate_name",e.spname),a.append("contact_email",e.SPKemail),a.append("description",e.spkabt),angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(e,t){a.append("profile_picture",e.file)});var i=e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID).length;(null!=e.imageSrc1||void 0!=e.imageSrc1)&&i>0?(a.append("profile_picture",e.imageSrc1),a.append("new_picture",1)):0==i&&(a.append("profile_picture",""),a.append("new_picture",0));var l=[{social_provider:"Website",link:e.cmpyweb},{social_provider:"Twitter",link:e.cmpytwitter},{social_provider:"Facebook",link:e.cmpyfb},{social_provider:"LinkedIn",link:e.cmpylink},{social_provider:"Pinterest",link:e.cmpypinterest},{social_provider:"Tumblr",link:e.cmpytumblr},{social_provider:"GitHub",link:e.cmpygithub},{social_provider:"Instagram",link:e.cmpyinstagram}];if(a.append("social_providers",angular.toJson(l)),a.append("user_exists",e.isExists_user),a.append("ticket_code",e.ticktselected),a.append("designation",e.spkdesg),a.append("company_name",e.spkcmpy),a.append("delegate_type",e.delegateIdinfo.id),a.append("direct",e.direct),null!=e.userData){if(null!=e.userData.person_code&&null==e.userData.yara_user_code)var s={profile_picture:e.userData.profile_picture,person_code:e.userData.person_code};else if(null==e.userData.person_code&&null!=e.userData.yara_user_code)var s={profile_picture:e.userData.profile_picture,yara_user_code:e.userData.yara_user_code};else if(null!=e.userData.person_code&&null!=e.userData.yara_user_code)var s={profile_picture:e.userData.profile_picture,person_code:e.userData.person_code,yara_user_code:e.userData.yara_user_code};a.append("user_data",angular.toJson(s))}else a.append("user_data",e.userData);if("create"==e.selType)e.isExists_user,o({method:"POST",url:r.url+"/sp-delegate/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){if(e.cdata=t.data,e.data={},1==e.cdata.result){var a=sessionStorage.getItem("redirect");void 0!=a&&""!=a&&"done"!=a?(sessionStorage.setItem("redirect","done"),window.location=a):(e.prtSPVal="SPList",window.location="people")}else 0==e.cdata.result?(e.errormsg=!0,e.data.error=e.cdata.message,$("#loading").hide(),$("#container").fadeIn()):($("#loading").hide(),$("#container").fadeIn(),e.errormsg=!0,e.data.error=n.errorMsg[1])},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1],$("#loading").hide()});else if("update"==e.selType){""!=e.SkpPic&&i>0?a.append("new_picture",1):(null!=e.imageSrc1||e.imageSrc1,a.append("new_picture",0));var d=JSON.parse(localStorage.getItem("editSpInfo"));a.append("opp","edit"),a.append("sp_delegate_code",d.sp_delegate_code),a.append("sp_delegate_name",e.spname),o({method:"POST",url:r.url+"/sp-delegate-edit/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.udata=t.data,1==e.udata.result?window.location="people":0==e.udata.result?(e.errormsg=!0,e.data.error=e.cdata.message,$("#loading").hide(),$("#container").fadeIn()):(e.errormsg=!0,e.data.error=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn())})}},e.enableDisablepop=function(t,a,i){console.log(t),console.log(a),"dis"==i?(e.enaDisInfo={head:"Disable",otherInfo:t,disable:!0,type:"sp"},$("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/validate_delegate_disable/",data:{event_code:e.currentval.event_code,person_code:a}}).then(function(t){e.response=t,console.log(e.response),1==e.response.data.result?($("#people-delete").modal("show"),$("#loading").hide(),$("#container").fadeIn()):0==e.response.data.result?($("#loading").hide(),$("#container").fadeIn(),e.disableConflictInfo=e.response.data,$("#disable-sp-conflict").modal("show")):(e.errormsg=!0,e.errmsg=n.errorMsg[1]),$("#loading").hide(),$("#container").fadeIn()},function(t){e.errormsg=!0,(t.status==-1||null==t.data)&&0==c.online?e.errmsg=n.errorMsg[0]:e.errmsg=n.errorMsg[1]})):(e.enaDisInfo={head:"Enable",otherInfo:t,disable:!1,type:"sp"},$("#people-delete").modal("show"))},e.enableDisableSpeaker=function(t){t.disable?($("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/disable/",data:{event_code:e.currentval.event_code,person_code:t.otherInfo.person_code,delegate_type:e.f_user}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide"),$("#disable-sp-conflict").modal("hide")),$("#loading").hide(),$("#container").fadeIn()})):($("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/enable/",data:{event_code:e.currentval.event_code,person_code:t.otherInfo.person_code,delegate_type:e.f_user}}).then(function(t){e.data=t.data,1==e.data.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide")),$("#loading").hide()}))},e.resendMail=function(t){e.errormsg=!1,e.errmsg="",e.userInfo=t,$("#people-invite").modal("show")},e.sendMail=function(t){$("#loading").show(),o({method:"POST",url:r.url+"/resend_invitation/",data:{event_code:e.currentval.event_code,email:t}}).then(function(t){e.response=t.data,e.data={},1==e.response.result?(e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-invite").modal("hide")):0==e.response.result?($("#loading").hide(),e.errormsg=!0,e.errmsg=e.response.message):(e.errormsg=!0,e.errmsg=n.errorMsg[1]),$("#loading").hide()},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1]})},e.selectedType=function(t){e.selectedval=t.id;for(var a=0;a<e.convertingPeoplelist.length&&t.id!=e.convertingPeoplelist[a].id;a++);localStorage.setItem("delegateIdinfo",angular.toJson(t))},e.changeTicket=function(t){e.selectedval="",$("#loading").show(),n.getAvilabileTickets({event_code:e.currentval.event_code,email:t.email}).then(function(a){1==a.result&&(e.updatedTicketsdata=a.tickets,e.seleDelInfo=t,e.changingTickets=[],e.seleDelInfo=t,e.aviTicketInfo=a,angular.forEach(e.updatedTicketsdata,function(t,a){e.updatedTicketsdata[a].ticket_code!=e.seltab&&e.changingTickets.push(e.updatedTicketsdata[a])}),$("#loading").hide(),$("#container").fadeIn(),$("#change-ticket").modal("show"))})},e.selectedTicketType=function(t){e.selectedval=t.ticket_code;for(var a=0;a<e.changingTickets.length&&t.ticket_code!=e.changingTickets[a].ticket_code;a++);},e.ticketChange=function(t){$("#loading").show(),o({method:"POST",url:r.url+"/user_ticket/",data:{email:e.seleDelInfo.email,ticket_code:t}}).then(function(t){e.response=t.data,e.data={},1==e.response.result?(e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#change-ticket").modal("hide")):0==e.response.result?($("#loading").hide(),e.errormsg=!0,e.errmsg=e.response.message):(e.errormsg=!0,e.errmsg=n.errorMsg[1]),$("#loading").hide()},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1]})},e.redirectToPeople=function(){window.location="/event/people"},e.deleagteConvertion=function(){window.location="/event/add-special-delegate"},e.editSP=function(e){localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("editSpInfo"),localStorage.removeItem("spEdit"),localStorage.setItem("editSpInfo",angular.toJson(e)),localStorage.setItem("spEdit",!0);var t=angular.fromJson(localStorage.getItem("redirectionInfo"));if(null==t)var t={delegate:!1,speaker:!1,bulk:!1};t.speaker=!0,localStorage.setItem("redirectionInfo",angular.toJson(t)),window.location="/event/add-special-delegate"},e.delToSpeaker=function(t){e.selectedval="",localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("editSpInfo"),localStorage.removeItem("spEdit"),localStorage.setItem("delegateTosp",angular.toJson(t)),localStorage.setItem("convertSp",!0);var a=angular.fromJson(localStorage.getItem("redirectionInfo"));if(null==a)var a={delegate:!1,speaker:!1,bulk:!1};a.speaker=!0,localStorage.setItem("redirectionInfo",angular.toJson(a))},e.convtoSpeaker=function(){e.direct=0,e.ticketsdata=[],e.convSpeakerInfo=angular.fromJson(localStorage.getItem("delegateTosp")),console.log(e.convSpeakerInfo),n.getAvilabileTickets({event_code:e.currentval.event_code,email:e.convSpeakerInfo.email}).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,1==e.convSpeakerInfo.using_yara?(e.SPKemail=e.convSpeakerInfo.invited_email,e.spname=e.convSpeakerInfo.full_name,e.spkdesg=e.convSpeakerInfo.designation,e.spkcmpy=e.convSpeakerInfo.company_name,e.imageSrc1=e.convSpeakerInfo.profile_picture,e.disableName=!1):(e.SPKemail=e.convSpeakerInfo.invited_email,e.disableName=!1,e.checkEmail(e.SPKemail)))})},e.errorScroll=function(){0!=e.speakerForm.$invalid||e.imageSrc1||0!=e.wordlength?e.wordlength&&s(function(){l.scrollJquery("fullname")},100):s(function(){l.scrollJquery("spimage")},100)},e.editSpecialDelegate=function(){e.direct=0,$("#loading").show(),e.ticketsdata=[],e.editSpInfo=angular.fromJson(localStorage.getItem("editSpInfo")),void 0!=e.editSpInfo&&n.getAvilabileTickets({event_code:e.currentval.event_code,email:e.editSpInfo.email}).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,e.SPKemail=e.editSpInfo.invited_email,e.spname=e.editSpInfo.full_name,e.spkdesg=e.editSpInfo.designation,e.spkcmpy=e.editSpInfo.company_name,e.spkabt=e.editSpInfo.description,e.imageSrc1=e.editSpInfo.profile_picture,e.disableName=!1,window.setTimeout(function(){$("textarea").height($("textarea")[0].scrollHeight)},500),null!=e.editSpInfo.sp_social_providers&&(angular.forEach(e.editSpInfo.sp_social_providers,function(t){"Website"==t.social_provider?e.Tcmpyweb=t.link:"Tumblr"==t.social_provider?e.Tcmpytumblr=t.link:"Twitter"==t.social_provider?e.Tcmpytwitter=t.link:"LinkedIn"==t.social_provider?e.Tcmpylink=t.link:"Facebook"==t.social_provider?e.Tcmpyfb=t.link:"Pinterest"==t.social_provider?e.Tcmpypinterest=t.link:"GitHub"==t.social_provider?e.Tcmpygithub=t.link:"Instagram"==t.social_provider&&(e.Tcmpyinstagram=t.link)}),s(function(){e.checkScocialDisabled()},1e3)),$("#loading").hide(),$("#container").fadeIn())})},e.disableMail=!1,"/event/add-special-delegate"==window.location.pathname&&localStorage.getItem("spEdit")?(e.disableMail=localStorage.getItem("spEdit"),e.delegateIdinfo=angular.fromJson(localStorage.getItem("delegateIdinfo")),e.selType="update",e.editSpecialDelegate()):"/event/add-special-delegate"==window.location.pathname&&localStorage.getItem("convertSp")?(e.disableMail=localStorage.getItem("convertSp"),e.delegateIdinfo=angular.fromJson(localStorage.getItem("delegateIdinfo")),e.selType="create",e.convtoSpeaker()):"/event/add-special-delegate"==window.location.pathname&&(e.selType="create",e.delegateIdinfo=angular.fromJson(localStorage.getItem("delegateIdinfo")),e.ticketsdata=[],e.allTickets()),e.getEmails=function(t){e.percent="25%",$("div.progressbars-decipher.progress_bulk_upload.progress_single").animate({width:e.percent},2e3,function(){$("div.progressbars-decipher.progress_bulk_upload.progress_single").children("span").css("opacity","1")}),$("#progress-loader").show(),e.ds.eLists=[],e.ds.eList=[],e.EmailList=[],e.EmailDuplicates=[],e.EmailInvited=[];var a=new FormData;angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(t,o){a.append("email_file",t.file),e.currentfile=t.file.name}),a.append("ticket_code",e.ticktselected),e.errormsg1=!1,o({method:"POST",url:r.url+"/invite/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,console.log(t),1==t.data.result?(e.account=t.data.emails.delegate_account_emails,e.EmailList=t.data.emails.non_account_emails,e.conflictInvitedEmails=t.data.emails.conflict_invited_emails,e.ds.eLists=t.data.emails.non_account_emails,console.log(e.ds.eLists),e.EmailInvited=t.data.emails.invited_emails,e.totalCount=t.data.emails.delegate_account_emails_len+t.data.emails.non_account_emails_len,e.percent="25%",$("div.progressbars-decipher.progress_bulk_upload.progress_single").animate({width:"100%"},2e3,function(){e.percent="100%",e.$apply(),$("div.progressbars-decipher.progress_bulk_upload.progress_single").children("span").css("opacity","1"),s(function(){e.UpStep="step3",e.$apply(),$("#progress-loader").hide()},800)})):0==t.data.result?($("#progress-loader").hide(),console.log(t),e.errormsg1=!0,e.errorMsg=t.data.message):(e.errormsg1=!0,e.errorMsg=n.errorMsg[1],$("#progress-loader").hide()),$("#loading").fadeOut(function(){$("body").css("overflow","auto")})},function(t){$("#progress-loader").hide(),e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.errorMsg=n.errorMsg[0]:e.errorMsg=n.errorMsg[1],$("#loading").fadeOut(function(){$("body").css("overflow","auto")})})},e.enaDisablePop=function(t,a){console.log(t),e.enaDisInfo="dis"==a?{head:"Disable",otherInfo:t,disable:!0,type:"del"}:{head:"Enable",otherInfo:t,disable:!1,type:"del"},$("#people-delete").modal("show")},e.disEnable=function(t){t.disable?($("#loading").show(),o({method:"POST",url:r.url+"/delegate/disable/",data:{event_code:e.currentval.event_code,email:t.otherInfo.invited_email}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide")),$("#loading").hide()})):($("#loading").show(),o({method:"POST",url:r.url+"/delegate/enable/",data:{event_code:e.currentval.event_code,email:t.otherInfo.invited_email}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide")),$("#loading").hide()}))},e.reditoPeople=function(){window.location="/event/people"},e.topUpPackage=function(){window.location="/topup"},0==c.online&&alert("You are not connected to internet"),e.updateSocials=function(){for(var t=["company-website","twitter","facebook","linkedin","pinterest","tumblr","git-hub","instagram"],a=0;a<t.length;a++){var o=0;"company-website"==t[a]&&e.cmpyweb.length>8?o=1:"twitter"==t[a]&&e.cmpytwitter.length>20?o=1:"facebook"==t[a]&&e.cmpyfb.length>25?o=1:"linkedin"==t[a]&&e.cmpylink.length>25?o=1:"pinterest"==t[a]&&e.cmpypinterest.length>26?o=1:"tumblr"==t[a]&&e.cmpytumblr.length>0?o=1:"git-hub"==t[a]&&e.cmpygithub.length>19?o=1:"instagram"==t[a]&&e.cmpyinstagram.length>26&&(o=1);var r=n.getSocailId(t[a]);1==o?$("."+r).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+r).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")}},"/event/add-special-delegate"==window.location.pathname&&null!=localStorage.getItem("editSpInfo")&&s(function(){e.updateSocials()},1e3)}]),app.controller("EventSecurityController",["$scope","$location","$filter","$http","YaraBaseUrl","APPService","vcRecaptchaService","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l,s){e.dashboardsUrl=l.dashboardUrl();var c=localStorage.getItem("selectedEventId");e.setOffset=function(e,t){return l.userOffsetTime(e,t)},void 0===c||null===c?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Security"),e.checkdate=function(e,t,a){return l.startend(e,t,a)},e.key=r.captcha_key,e.sendMessage=function(){o({method:"POST",url:r.url+"/emergency_notification/",data:{event_code:e.currentval.event_code,message:e.emgmsg,title:e.subject}}).then(function(t){console.log(t.data),e.data=t.data,1==e.data.result&&(console.log(e.data),e.errormsg1=!0,e.data.error=e.data.message,e.emgmsg="",e.subject="",e.submitted=!1,$("#myModal-notification").modal("show")),null==e.data.result||void 0==e.data.result?(e.errormsg1=!0,e.data.error=l.errorMsg[1]):0==e.data.result&&(e.errormsg1=!0,e.data.error=e.data.message)},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==s.online?e.data.error=l.errorMsg[0]:e.data.error=l.errorMsg[1]})},e.wipeEvent=function(){console.log(c),o({method:"POST",url:r.url+"/event_edit/",data:{event_code:e.currentval.event_code,opp:"wipe"}}).then(function(t){console.log(t.data),e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg1=!0,e.data.error=l.errorMsg[1]):0==e.data.result?(e.errormsg1=!0,e.data.error=e.data.message):1==e.data.result&&(window.location="/events")},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==s.online?e.data.error=l.errorMsg[0]:e.data.error=l.errorMsg[1]})},e.wipeshown=function(){l.eventLocalTz({tz:e.currentval.event_timezone}).then(function(t){if(1==t.result){e.localTimeNow=t.local_time_now;var a=l.userOffsetTime(e.localTimeNow,0),o=l.userOffsetTime(e.currentval.activation_at,e.currentval.eo);console.log(a,o),e.eventhappen=o<a}})},e.wipeshown(),e.notification=function(){window.location="/event",localStorage.setItem("securityredirect","yes")},"yes"==localStorage.getItem("securityredirect")&&(window.location="/events",localStorage.removeItem("securityredirect")),0==s.online&&alert("You are not connected to internet")}]),app.controller("EventKitsController",["$scope","YaraBaseUrl","$http","$location","GetDataService","$rootScope",function(e,t,a,o,r,n){var i=localStorage.getItem("selectedEventId");void 0!==i&&null!==i||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Kits",e.checkdate=function(e,t,a){return r.startend(e,t,a)},e.setOffset=function(t){return r.userOffsetTime(t,e.currentval.eo)},0==n.online&&alert("You are not connected to internet")}]),app.controller("EventCollabratorsController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$rootScope","$anchorScroll","$timeout",function(e,t,a,o,r,n,i,l,s,c,d){e.headerTitle="Collaborator",e.dashboardsUrl=l.dashboardUrl();var m=localStorage.getItem("selectedEventId");void 0===m||null===m?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Collabrators"),e.locationHref=window.location.pathname;var p=n("date")(e.currentval.start_date,"yyyy-MM-dd"),u=n("date")(e.currentval.end_date,"yyyy-MM-dd");e.dayscount=i.dateDiffInDays(new Date(p),new Date(u)),e.dates=i.Dateslist(p,e.dayscount),e.s=i,e.collaboratorsearch="",e.searchoncollaborator=function(t){return(t.first_name.toLowerCase()+t.middle_name.toLowerCase()+t.last_name.toLowerCase()+t.role.toLowerCase()).indexOf(e.collaboratorsearch)>=0},e.setOffset=function(e,t){return l.userOffsetTime(e,t)},e.selectedPermission=[],e.selpermission=function(t,a){return a?e.selectedPermission.splice(e.selectedPermission.indexOf(t),1):(e.selectedPermission.push(t),e.selectedPermission.length>5&&e.selectedPermission.splice(0,1)),!a},e.Cdata=[],e.scrollTop=function(){c(),e.createcoll=!1},e.getCollabrators=function(){$("#loading").show(),
l.getCollaborators(e.currentval.event_code).then(function(t){1==t.result&&(console.log(t),e.Cdata=t.data,e.uo=t.uo,$("#loading").hide(),$("#container").fadeIn())})},e.getPackage=function(){$("#loading").show(),l.getPackage(e.currentval.event_code).then(function(t){1==t.result&&(e.packagedata=t.event_packages,$("#loading").hide(),$("#container").fadeIn())})},e.createcoll=!1,e.getCollabrators(),e.selType="",e.Colluser="",e.backfun=function(){e.createcoll=!1},e.namecoll="",e.deleteuser="",e.setrevoke=function(t,a,o,r){e.namecoll=(t+" "+a+" "+o).trim(),e.deleteuser=r},e.CS=e,e.ChangeType=function(t,a,o){e.errormsg=!1,l.getCollaboratorPermission(e.currentval.event_code).then(function(o){1==o.result&&(e.selType=t,e.Datevalid=!1,e.permissionlist=o.available_kits,"create"==t?(e.selectedPermission=[],e.collName="",e.role="",e.email="",e.Title="Collaborator Details",e.submitted=!1,e.btntxt="Submit",c()):"update"==t&&(e.Title="Update Collaborator Details",e.selectedPermission=[],e.Colluser=a,e.btntxt="Save",e.submitted=!1,c(),e.collName=(e.Colluser.first_name+" "+e.Colluser.middle_name+" "+e.Colluser.last_name).trim(),e.role=e.Colluser.role,e.email=e.Colluser.contact_email,angular.forEach(e.Colluser.permissions,function(t){e.selectedPermission.push(t),e.permissionlist.indexOf(t)<0&&e.permissionlist.push(t)})),e.createcoll=!0)}),d(function(){$("#collobrator_name").focus()},500)},e.Datevalid=!1,e.validateDates=function(){var t=!1;angular.forEach(e.dates,function(a){e.CS.SelDates[a]&&(t=!0)}),e.Datevalid=!!t,e.collform.$valid&&(e.alldayaccess||e.Datevalid||i.scrollJquery("errorDate"))},e.clearDates=function(){angular.forEach(e.dates,function(t){e.CS.SelDates[t]=!1})},e.addcollfrom=function(){e.errormsg=!1,$("#loading").show(),"create"==e.selType?o({method:"POST",url:a.url+"/collaborator/",data:{event_code:e.currentval.event_code,collaborator_name:e.collName,role:e.role,contact_email:e.email,permissions:angular.toJson(e.selectedPermission)}}).then(function(t){e.cdata=t.data,1==e.cdata.result?(e.createcoll=!1,e.getCollabrators(),$("#myModal-alart-collaborator").modal("show")):0==e.cdata.result&&(e.errormsg=!0,e.showerror=t.data.message),$("#loading").hide()},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==s.online?e.showerror=l.errorMsg[0]:e.showerror=l.errorMsg[1]}):"update"==e.selType&&o({method:"POST",url:a.url+"/collaborator_edit/",data:{event_code:e.currentval.event_code,collaborator_name:e.collName,role:e.role,contact_email:e.email,permissions:angular.toJson(e.selectedPermission),username:e.Colluser.username,opp:"edit"}}).then(function(t){e.udata=t.data,1==e.udata.result&&(e.createcoll=!1,e.getCollabrators()),$("#loading").hide()}),c()},e.DelColl=function(){o({method:"POST",url:a.url+"/collaborator_edit/",data:{event_code:e.currentval.event_code,username:e.deleteuser,opp:"delete"}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.getCollabrators(),$("#myModal-collaborator").modal("hide")),$("#loading").hide()})},e.collActivities=function(t){e.collabratorAct=t,$("#myModal-activities").modal("show")},0==s.online&&alert("You are not connected to internet")}]),app.controller("EventShowCaseController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){e.dashboardsUrl=l.dashboardUrl(),e.headerTitle="ShowCase";var d=localStorage.getItem("selectedEventId");void 0===d||null===d?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.is_time_format_24=localStorage.getItem("is_time_format_24"),document.title="YARA - "+e.currentval.short_name+" - ShowCase"),e.setOffset=function(e,t){return l.userOffsetTime(e,t)},e.locationHref=window.location.pathname,"Admin"==l.getPrivilege()?e.privilege=!0:e.privilege=!1,e.SwtichTab=function(t){e.current=t,e.search="","All"==t?(e.getSponsor(),e.getExhibitor()):"sponsor"==t?e.getSponsor():e.getExhibitor(),c()},e.service=i,e.userActivites=function(t){e.listActivites=t,$("#showcase-Activity").modal("show")},e.ShowCase_revoke=function(t,a,o){e.Runame=t,e.Rtype=a,e.Rpermission=o?"revoke":"enable",console.log(e.Runame,e.Rpermission,e.Rtype),e.ShowCase_Permission(e.Runame,e.Rpermission,e.Rtype)},e.ShowCase_Permission=function(t,r,n){var i=2;"sp"==n&&(i=1),"enable"==r?o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"enable",showcase_type:i,showcase:!0}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&("sp"==n?e.getSponsor():e.getExhibitor())}):"revoke"==r&&o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"revoke",showcase_type:i,showcase:!0}}).then(function(t){e.ddata=t.data,1==e.ddata.result?($("#showcase-delete").modal("hide"),"sp"==n?e.getSponsor():e.getExhibitor()):e.getSponsor()})},e.getSponsor=function(){$("#loading").show(),l.getSponsors(e.currentval.event_code).then(function(t){1==t.result&&(e.SPdata=t.data,$("#loading").hide(),$("#container").fadeIn())})},e.getExhibitor=function(){$("#loading").show(),l.getExhibitors(e.currentval.event_code).then(function(t){1==t.result&&(e.EXdata=t.data,$("#loading").hide(),$("#container").fadeIn())})},e.getSponsor(),e.getExhibitor(),e.resend=function(t,r,n){e.resendemail=t,e.showcasecode=r,e.showcasetype=n,$("#loading").show(),o({method:"POST",url:a.url+"/showcase_resend_invitation/",data:{event_code:e.currentval.event_code,showcase_code:e.showcasecode,email:e.resendemail,showcase_type:e.showcasetype}}).then(function(t){e.data=t.data,1==e.data.result?(console.log("send mail"),$("#showcase-mail").modal("show"),$("#loading").hide()):0==e.data.result&&(console.log("error"),e.errormsg=!0,e.showerror=t.data.message,$("#loading").hide())})},0==s.online&&alert("You are not connected to internet")}]),app.controller("EventPromoteController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c){e.headerTitle="Promotion",e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1;var d=localStorage.getItem("selectedEventId");void 0===d||null===d?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Promote"),e.locationHref=window.location.pathname,"Admin"==l.getPrivilege()?e.privilege=!0:e.privilege=!1,e.setOffset=function(t){return l.userOffsetTime(t,e.currentval.eo)},e.chtype="",e.channelList=[],e.getChannel=function(){$("#loading").show(),l.getPromotion(e.currentval.event_code).then(function(t){1==t.result&&(e.channelList=t.booking_channel_data,console.log(e.channelList),$("#loading").hide(),$("#container").fadeIn())})},e.getChannel(),e.urlvalid=!0,e.urlvalidation=function(){e.urlvalid=!0,e.promotedisable=!1,e.url.length>7&&(/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{2}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.url)?e.urlvalid=!1:e.urlvalid=!0)},e.ChannelType=function(t,a){e.promotedisable=!1,e.title="Add",e.chtype=t,e.urltitle="",e.url="",e.errstatus=!1,e.showfrom=!0,"update"==t&&(e.promotedisable=!0,e.title="Update",e.urltitle=a.tittle,e.url=a.url,e.upCode=a.booking_channel_code,e.urlvalid=!1),s(function(){$("#urltitle").focus()},100)},e.SendData=function(){$("#loading").show(),"create"==e.chtype?o({method:"POST",url:a.url+"/booking_channel/",data:{event_code:e.currentval.event_code,tittle:e.urltitle,url:e.url}}).then(function(t){e.data=t.data,1==e.data.result?(e.showfrom=!1,e.submitted=!1,e.getChannel()):0==e.data.result?(e.errstatus=!0,e.errmsg=e.data.message):(e.errstatus=!0,e.errmsg=l.errorMsg[1]),$("#loading").hide(),$("#container").fadeIn()},function(t){e.errstatus=!0,t.status==-1||null==t.data?e.errmsg=l.errorMsg[0]:e.errmsg=l.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}):"update"==e.chtype&&($("#loading").show(),o({method:"POST",url:a.url+"/booking_channel_edit/",data:{event_code:e.currentval.event_code,tittle:e.urltitle,url:e.url,booking_channel_code:e.upCode,opp:"edit"}}).then(function(t){e.data=t.data,1==e.data.result?(e.getChannel(),e.showfrom=!1):0==e.data.result?(e.errstatus=!0,e.errmsg=e.data.message):(e.errstatus=!0,e.errmsg=l.errorMsg[1]),$("#loading").hide(),$("#container").fadeIn()},function(t){e.errstatus=!0,t.status==-1||null==t.data?e.errmsg=l.errorMsg[0]:e.errmsg=l.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},e.delChannel=function(t,a){e.delCode=a.booking_channel_code,e.delUrltitle=t,e.errstatus=!1},e.deleteChannel=function(){$("#loading").show(),o({method:"POST",url:a.url+"/booking_channel_edit/",data:{event_code:e.currentval.event_code,booking_channel_code:e.delCode,opp:"delete"}}).then(function(t){e.data=t.data,1==e.data.result?(e.getChannel(),$("#adspace-delete").modal("hide")):0==e.data.result?(e.errstatus=!0,e.errmsg=e.data.message):(e.errstatus=!0,e.errmsg=l.errorMsg[1]),$("#loading").hide()},function(t){e.errstatus=!0,t.status==-1||null==t.data?e.errmsg=l.errorMsg[0]:e.errmsg=l.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},0==c.online&&alert("You are not connected to internet")}]),app.controller("EventSponsorController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$anchorScroll","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d){function m(){e.Tcmpyweb=e.SPweb,e.Tcmpyfb=e.SPfb,e.Tcmpytwitter=e.SPtwitter,e.Tcmpylink=e.SPlin,e.Tcmpypinterest=e.SPpinterest,e.Tcmpytumblr=e.SPtumblr,e.Tcmpygithub=e.SPgithub,e.Tcmpyinstagram=e.SPinstagram}function p(e){$(e).css({height:"auto","overflow-y":"hidden"}).height(e.scrollHeight)}e.dashboardsUrl=l.dashboardUrl(),e.headerTitle="Sponsors";var u=localStorage.getItem("selectedEventId");void 0===u||null===u?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Sponsor",e.dashboardsUrl=l.dashboardUrl()),"Admin"==l.getPrivilege()?e.privilege=!0:e.privilege=!1,e.locationHref=window.location.pathname;var g=n("date")(e.currentval.start_date,"yyyy-MM-dd"),f=n("date")(e.currentval.end_date,"yyyy-MM-dd");e.dayscount=i.dateDiffInDays(new Date(g),new Date(f)),e.dates=i.Dateslist(g,e.dayscount),e.spMail="",e.spMailList=[],e.duplicates=[],e.duplicateMail=!1,c(),e.sponsersearch="",e.searchonsponser=function(t){return(t.name.toLowerCase()+t.sponsorship_type.toLowerCase()+t.rank).indexOf(e.sponsersearch.toLowerCase())>=0},e.sort="name",e.sorting_list=function(t){e.sort=0==t?"name":"rank",c()},e.checkSocials=function(){var t=0;"company-website"==e.social_type&&e.SPweb.length>8?t=1:"twitter"==e.social_type&&e.SPtwitter.length>20?t=1:"facebook"==e.social_type&&e.SPfb.length>25?t=1:"linkedin"==e.social_type&&e.SPlin.length>25?t=1:"pinterest"==e.social_type&&e.SPpinterest.length>26?t=1:"tumblr"==e.social_type&&e.SPtumblr.length>0?t=1:"git-hub"==e.social_type&&e.SPgithub.length>19?t=1:"instagram"==e.social_type&&e.SPinstagram.length>26&&(t=1);var a=l.getSocailId(e.social_type);console.log("reach"),console.log(a),1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.checkScocialDisabled=function(){var t=0;"company-website"==e.social_type&&e.Tcmpyweb.length>=7?t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.Tcmpyweb)?1:7==e.Tcmpyweb.length?1:0:"twitter"==e.social_type&&e.Tcmpytwitter.length>=20?t=1:"facebook"==e.social_type&&e.Tcmpyfb.length>=25?t=1:"linkedin"==e.social_type&&e.Tcmpylink.length>=25?t=1:"pinterest"==e.social_type&&e.Tcmpypinterest.length>=26?t=1:"tumblr"==e.social_type&&e.Tcmpytumblr.length>=0?t=1:"git-hub"==e.social_type&&e.Tcmpygithub.length>=19?t=1:"instagram"==e.social_type&&e.Tcmpyinstagram.length>=26&&(t=1),e.isSocialSave=1==t},e.$watchCollection("[Tcmpyweb,Tcmpytwitter,Tcmpyfb,Tcmpylink,Tcmpypinterest,Tcmpytumblr,Tcmpygithub,Tcmpyinstagram]",function(t){e.checkScocialDisabled()}),e.updateSocials=function(){for(var t=["company-website","twitter","facebook","linkedin","pinterest","tumblr","git-hub","instagram"],a=0;a<t.length;a++){var o=0;"company-website"==t[a]&&e.SPweb.length>8?o=1:"twitter"==t[a]&&e.SPtwitter.length>20?o=1:"facebook"==t[a]&&e.SPfb.length>25?o=1:"linkedin"==t[a]&&e.SPlin.length>25?o=1:"pinterest"==t[a]&&e.SPpinterest.length>26?o=1:"tumblr"==t[a]&&e.SPtumblr.length>0?o=1:"git-hub"==t[a]&&e.SPgithub.length>19?o=1:"instagram"==t[a]&&e.SPinstagram.length>26&&(o=1);var r=l.getSocailId(t[a]);1==o?$("."+r).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+r).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")}},e.saveSocials=function(){e.updatedisable=!1,e.typeofchange="save",e.SPweb=e.Tcmpyweb,e.SPfb=e.Tcmpyfb,e.SPtwitter=e.Tcmpytwitter,e.SPlin=e.Tcmpylink,e.SPpinterest=e.Tcmpypinterest,e.SPtumblr=e.Tcmpytumblr,e.SPgithub=e.Tcmpygithub,e.SPinstagram=e.Tcmpyinstagram,e.checkSocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange=""}),$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange="",e.checkScocialDisabled(),setTimeout(function(){$("#"+e.social_type+"_id").focus();var t=$("#"+e.social_type+"_id").val().length;$("#"+e.social_type+"_id")[0].setSelectionRange(t,t)},1e3)}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(m(),e.updateSocials())}),e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=l.dataURItoBlob(t);"cmpylogo"==e.cropType&&(e.imageSrc=t,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"cmpylogo"==e.cropType&&(e.imageSrc="",angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.cmpylogo.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(a,o){e.updatedisable=!1;var r=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(a,o){o!=r-1?a.setType(4):a.file.size>5242880?(e.sponsorform.cmpylogo.$setValidity("minsizeval",!1),a.setType(4),e.imageSrc=""):(e.sponsorform.cmpylogo.$setValidity("minsizeval",!0),t.readAsDataUrl(a.file,e).then(function(t){l.getImgDimensions(t,function(o,r){o>=1024&&r>=1024?(e.sponsorform.cmpylogo.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=t:(e.cropType="cmpylogo",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:t}}),$(".image-editor").cropit("imageSrc",t),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.sponsorform.cmpylogo.$setValidity("minDimension",!1),a.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.s=i,e.getSponsor=function(){$("#loading").show(),e.SPdata=[],l.getSponsors(e.currentval.event_code).then(function(t){1==t.result&&(e.anyenable=t.any_enabled,console.log(e.anyenable),e.SPdata=t.data,$("#loading").hide(),$("#container").fadeIn())})},e.eventLocations=function(){e.showLoc=!1,l.getEventlocations(e.currentval.event_code).then(function(t){1==t.result?(e.evtLoc=t.data,e.evtLoc.length>0&&(e.showLoc=!0)):e.showLoc=!1})},e.locationClick=function(t){e.spoLocation=t.location,e.showLoclist=!1,e.updatedisable=!1},e.isValidLoc=!1,e.locValidation=function(t){e.updatedisable=!1,""!=t&&void 0!=t&&null!=t&&(e.isValidLoc=!1,e.isValidLoc=l.validateLocation(t)),console.log(e.isValidLoc)},e.errorScroll=function(){0==e.invalidSPname&&0==e.diplicte&&e.sponsorform.$valid&&!e.imageSrc?s(function(){console.log(e.spMail.length,e.spMail),i.scrollJquery("errorImg")},100):e.invalidSPname?s(function(){i.scrollJquery("sponsorname")},100):(0==e.invalidSPname&&e.invalidMail||0==e.invalidSPname&&e.diplicte||0==e.invalidSPname&&0==e.spMail.length||0==e.spMailList.length&&0==e.spMail.length)&&s(function(){i.scrollJquery("sponserid")},100)},e.getSponsor(),e.selectUpdateVal="",e.SPtype="",e.cancelscroll=function(){c()},e.countmails=!1,e.addEmail=function(t){e.diplicte=!1,$("#sponserid").focus();var a={mailSp:e.spMail,dupe:!1};void 0==t?e.emailcountsam<=10?(e.spMailList.push(a),e.duplicates.push(!1),"update"==e.SPtype&&e.checkEmaildeletion(e.spMail,"add"),e.spMail="",e.checkMail(),e.countmails=!1):e.countmails=!0:1==isNaN(e.emailcountsam)||e.emailcountsam<9||void 0==e.emailcountsam?(e.spMailList.push(a),e.duplicates.push(!1),"update"==e.SPtype&&e.checkEmaildeletion(e.spMail,"add"),e.spMail="",e.checkMail(),e.countmails=!1,e.emailcountsam++):e.countmails=!0},e.dupemail=function(){e.diplicte=!1,e.updatedisable=!1;for(var t=0;t<e.spMailList.length;t++)e.spMailList[t].mailSp==e.spMail&&(e.diplicte=!0);console.log(e.diplicte)},e.validateMail=function(e){return!!/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(e)},e.checkMail=function(t,a){e.duplicateMail=!1;var o=[];angular.forEach(e.spMailList,function(t,a){if(void 0!=e.spMailList[a]){var r={mail:e.spMailList[a].mailSp,key:a};o.push(r),e.duplicates[a]=!1}}),o=o.sort(function(e,t){var a=e.mail.toLowerCase(),o=t.mail.toLowerCase();return a<o?-1:a>o?1:0});for(var r=o,n=0;n<o.length-1;n++)r[n+1].mail.toLowerCase()==r[n].mail.toLowerCase()&&(e.duplicates[r[n+1].key]=!0,e.duplicateMail=!0);if(void 0!=t&&void 0!=a){var i="invalidmails"+t;e[i]=!1,/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(a)?e[i]=!1:e[i]=!0}},e.removeEmail=function(t,a){10==e.defaultcode?(e.spMailList.splice(a,1),e.duplicates.splice(a,1),"update"==e.SPtype&&e.checkEmaildeletion(t.mailSp,"rev"),e.countmails=!0):(e.spMailList.splice(a,1),e.duplicates.splice(a,1),"update"==e.SPtype&&e.checkEmaildeletion(t.mailSp,"rev"),e.emailcountsam>e.defaultcode&&(e.emailcountsam--,e.countmails=!1)),e.checkMail(),e.dupemail()},e.checkEmaildeletion=function(t,a){angular.forEach(e.preferenceInfo,function(o,r){e.preferenceInfo[r].email==t&&(e.preferenceInfo[r].is_deleted="add"==a?0:1)})},e.changeSP=function(t,a,o,r){e.emailcountsam=o,e.defaultcode=o,c(),e.spoLocation="",e.spMailList=[],e.spMail="",e.eventLocations(),s(function(){$("#sponsorname").focus()},500),e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.SPtype=t,e.submitted=!0,e.updatedisable=!1,e.error=!1,e.selectval=[],e.Updateday=[],"create"==t?(e.SPTitle="Add Sponsor",e.rank="",e.desc="",e.name="",e.SPweb="",e.SPtwitter="",e.SPlin="",e.SPfb="",e.email="",e.createSp=!0,e.btntxt="Submit",e.SPpinterest="",e.SPtumblr="",e.SPgithub="",e.SPinstagram="",e.imgrequired=!0,e.imageSrc="",e.locationCode="",e.SPSHType="",e.spMail="",e.spMailList=[],e.duplicates=[],e.duplicateMail=!1,e.invalidMail=!1,e.preferenceInfo=[],e.showcaseEnable=0,m(),e.updateSocials()):"update"==t&&(e.updatedisable=!0,e.createSp=!0,e.error=!1,e.imgrequired=!1,e.selectUpdateVal=a,e.SPTitle="Update Sponsor",e.btntxt="Save",e.SPpinterest="",e.SPtumblr="",e.SPgithub="",e.SPinstagram="",e.showcaseEnable=r?1:0,angular.forEach(e.SPdata,function(t){t.username==a&&(e.rank=t.rank,e.desc=t.description,e.name=t.name,angular.forEach(t.social_providers,function(t){"Website"==t.social_provider?e.SPweb=t.link:"Twitter"==t.social_provider?e.SPtwitter=t.link:"LinkedIn"==t.social_provider?e.SPlin=t.link:"Facebook"==t.social_provider?e.SPfb=t.link:"Pinterest"==t.social_provider?e.SPpinterest=t.link:"GitHub"==t.social_provider?e.SPgithub=t.link:"Instagram"==t.social_provider?e.SPinstagram=t.link:"Tumblr"==t.social_provider&&(e.SPtumblr=t.link)}),e.email=t.email,e.picChange=0,e.SPSHType=t.sponsorship_type,e.imageSrc=t.profile_picture,e.restImage=t.profile_picture,null!=t.location&&(e.spoLocation=t.location.location_name),void 0!=t.days&&(t.days.length==e.dayscount?e.alldayaccess=!0:(e.alldayaccess=!1,e.selectval=e.Updateday=t.days)),e.sponsor_code=t.sponsor_code,e.spMail="",e.spMailList=[],e.duplicates=[],e.duplicateMail=!1,e.invalidMail=!1,e.preferenceInfo=[],angular.forEach(t.preferences,function(a,o){console.log(t.preferences[o].email),e.spMail=t.preferences[o].email;var r={email:t.preferences[o].email,preference:t.preferences[o].preference,is_deleted:0};e.preferenceInfo.push(r),e.addEmail()}),console.log(e.preferenceInfo))}),m(),e.updateSocials()),s(function(){$("textarea").each(function(){p(this)})},500)},e.selectval=[],e.selectedtype=function(t){e.selectval.indexOf(t)>=0?e.selectval.splice(e.selectval.indexOf(t),1):e.selectval.push(t)},e.invalidSPname=!1,e.checkSponsername=function(){if(e.invalidSPname=!1,e.updatedisable=!1,void 0!=e.name){var t=e.name.toLowerCase(),a=/^sponsor[1-9][0-9]*$/,o=/^sponsor[^a-zA-Z0-9][0-9][0-9]*$/,r=/^sponsor no[^a-zA-Z0-9][0-9][0-9]*$/;"sponsor"==t?e.invalidSPname=!0:(a.test(t)||o.test(t)||r.test(t))&&(e.invalidSPname=!0)}},e.addAttendForm=function(){$("#loading").show();var t={mailSp:e.spMail,dupe:!1};e.spMailList.push(t),e.duplicates.push(!1),"update"==e.SPtype&&e.checkEmaildeletion(e.spMail,"add"),e.spMail="",e.checkMail(),e.existLocation=!1,e.showLoc&&angular.forEach(e.evtLoc,function(t,a){e.evtLoc[a].location.toLowerCase()===e.spoLocation.toLowerCase()&&(e.existLocation=!0,e.locationCode=e.evtLoc[a].location_code)});var r=[],n=0;angular.forEach(e.spMailList,function(t,a){if(1==e.validateMail(e.spMailList[a].mailSp)){n++;var o={email:e.spMailList[a].mailSp,preference:n};r.push(o)}}),"update"==e.SPtype&&angular.forEach(e.preferenceInfo,function(t,a){if(1==e.preferenceInfo[a].is_deleted){e.preferenceInfo[a].email,Number(e.preferenceInfo[a].preference);r.push(e.preferenceInfo[a])}});var i=new FormData;i.append("event_code",e.currentval.event_code),i.append("rank",e.rank),i.append("description",e.desc),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){i.append("profile_picture",e.file)});var l=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;0==l&&i.append("profile_picture","");var s=[{social_provider:"Website",link:e.SPweb},{social_provider:"Twitter",link:e.SPtwitter},{social_provider:"Facebook",link:e.SPfb},{social_provider:"LinkedIn",link:e.SPlin},{social_provider:"Pinterest",link:e.SPpinterest},{social_provider:"Tumblr",link:e.SPtumblr},{social_provider:"GitHub",link:e.SPgithub},{social_provider:"Instagram",link:e.SPinstagram}];i.append("social_providers",angular.toJson(s)),i.append("sponsor_name",e.name),i.append("showcase_enable",e.showcaseEnable),i.append("preferences",angular.toJson(r)),i.append("sponsorship_type",e.SPSHType),""!=e.spoLocation&&(null!=e.locationCode&&void 0!=e.locationCode&&""!=e.locationCode?i.append("location",e.locationCode):i.append("location",e.spoLocation)),i.append("is_location_exist",e.existLocation);var c=[];if(c=0==e.alldayaccess?e.selectval:e.dates,0==e.alldayaccess&&0==c.length&&(c=e.dates),i.append("days",angular.toJson(c)),"create"==e.SPtype)o({method:"POST",url:a.url+"/sponsor/",data:i,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.cdata=t.data,console.log(t),1==e.cdata.result?(e.createSp=!1,e.getSponsor()):(e.error=!0,e.errormsg=e.cdata.message,$("#loading").hide())});else if("update"==e.SPtype){i.append("sponsor_code",e.sponsor_code),i.append("opp","edit");var l=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;e.picChange=l<=0?0:1,i.append("new_picture",e.picChange),o({method:"POST",url:a.url+"/sponsor_edit/",data:i,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.udata=t.data,1==e.udata.result?(e.createSp=!1,e.spoLocation="",e.getSponsor()):(e.error=!0,e.errormsg=e.udata.message,$("#loading").hide())})}},e.nameSP="",e.deleteuser="",e.setrevoke=function(t,a,o){e.nameSP=t.trim(),e.deleteuser=o},e.delSponsor=function(){o({method:"POST",url:a.url+"/sponsor_edit/",data:{opp:"delete",event_code:e.currentval.event_code,sponsor_code:e.deleteuser}}).then(function(t){1==t.data.result&&e.getSponsor()})},e.resendMail=function(t,r){e.emailid=t,$("#loading").show(),o({method:"POST",url:a.url+"/showcase_resend_invitation/",data:{event_code:e.currentval.event_code,showcase_code:r,email:t,showcase_type:1}}).then(function(t){e.data=t.data,1==e.data.result?(console.log("send mail"),$("#loading").hide(),$("#modal-resendMail").modal("show")):0==e.data.result&&(console.log("error"),e.errormsg=!0,e.showerror=t.data.message,$("#loading").hide())})},e.disablesponsor=function(t,a,o,r){e.associate=!1,e.spocode=t,e.sponame=a,e.per=o?"disable":"enable",e.type=r,console.log(e.per)},e.DisSponser=function(){e.ShowCase_Permission(e.spocode,e.per,e.type)},e.ShowCase_Permission=function(t,r,n){var i=2;"sp"==n&&(i=1),"enable"==r?o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"enable",showcase_type:i,showcase:!1}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&("sp"==n&&e.getSponsor(),$("#myModal-sponsor-enable").modal("hide"))}):"disable"==r&&o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"revoke",showcase_type:i,showcase:!1}}).then(function(t){e.ddata=t.data,1==e.ddata.result?("sp"==n&&e.getSponsor(),$("#myModal-sponsor-enable").modal("hide"),e.associate=!1):0==e.ddata.result&&(e.associatesponsor=e.ddata.message,e.associate=!0)})},$("textarea").each(function(){p(this)}).on("input",function(){p(this)}),0==d.online&&alert("You are not connected to internet")}]),app.controller("EventExhibitorController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$document","$timeout","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c,d,m){function p(){e.Tcmpyweb=e.EXweb,e.Tcmpyfb=e.EXfb,e.Tcmpytwitter=e.EXtwitter,e.Tcmpylink=e.EXlin,e.Tcmpypinterest=e.EXpinterest,e.Tcmpytumblr=e.EXtumblr,e.Tcmpygithub=e.EXgithub,e.Tcmpyinstagram=e.EXinstagram}function u(e){$(e).css({height:"auto","overflow-y":"hidden"}).height(e.scrollHeight)}e.headerTitle="Exhibitor",e.dashboardsUrl=l.dashboardUrl();var g=localStorage.getItem("selectedEventId");void 0===g||null===g?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Exhibitor"),e.locationHref=window.location.pathname,"Admin"==l.getPrivilege()?e.privilege=!0:e.privilege=!1,e.setOffset=function(e,t){return l.userOffsetTime(e,t)};var f=e.setOffset(e.currentval.start_date,e.currentval.eo),v=e.setOffset(e.currentval.end_date,e.currentval.eo),h=n("date")(f,"yyyy-MM-dd"),y=n("date")(v,"yyyy-MM-dd");e.betdays=function(){var t=new Date(h),a=new Date(y),o=e.getDates(t,a);e.dates=o},e.getDates=function(e,t){for(var a=[],o=new Date(e);o<=t;)a.push(n("date")(new Date(o),"yyyy-MM-dd")),o.setDate(o.getDate()+1);return a},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:n("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),e.dates=e.eventDaysInfo,console.log(e.dates),e.exhibitorsearch="",e.searchonexhibitor=function(t){return t.name.toLowerCase().indexOf(e.exhibitorsearch)>=0},e.checkSocials=function(){var t=0;"company-website"==e.social_type&&e.EXweb.length>7?t=1:"twitter"==e.social_type&&e.EXtwitter.length>20?t=1:"facebook"==e.social_type&&e.EXfb.length>25?t=1:"linkedin"==e.social_type&&e.EXlin.length>25?t=1:"pinterest"==e.social_type&&e.EXpinterest.length>26?t=1:"tumblr"==e.social_type&&e.EXtumblr.length>0?t=1:"git-hub"==e.social_type&&e.EXgithub.length>19?t=1:"instagram"==e.social_type&&e.EXinstagram.length>26&&(t=1);var a=l.getSocailId(e.social_type);1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.updateSocials=function(){for(var t=["company-website","twitter","facebook","linkedin","pinterest","tumblr","git-hub","instagram"],a=0;a<t.length;a++){var o=0;"company-website"==t[a]&&e.EXweb.length>7?o=1:"twitter"==t[a]&&e.EXtwitter.length>20?o=1:"facebook"==t[a]&&e.EXfb.length>25?o=1:"linkedin"==t[a]&&e.EXlin.length>25?o=1:"pinterest"==t[a]&&e.EXpinterest.length>26?o=1:"tumblr"==t[a]&&e.EXtumblr.length>0?o=1:"git-hub"==t[a]&&e.EXgithub.length>19?o=1:"instagram"==t[a]&&e.EXinstagram.length>26&&(o=1);var r=l.getSocailId(t[a]);1==o?$("."+r).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+r).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")}},e.checkScocialDisabled=function(){var t=0;"company-website"==e.social_type&&e.Tcmpyweb.length>=7?t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.Tcmpyweb)?1:7==e.Tcmpyweb.length?1:0:"twitter"==e.social_type&&e.Tcmpytwitter.length>=20?t=1:"facebook"==e.social_type&&e.Tcmpyfb.length>=25?t=1:"linkedin"==e.social_type&&e.Tcmpylink.length>=25?t=1:"pinterest"==e.social_type&&e.Tcmpypinterest.length>=26?t=1:"tumblr"==e.social_type&&e.Tcmpytumblr.length>=0?t=1:"git-hub"==e.social_type&&e.Tcmpygithub.length>=19?t=1:"instagram"==e.social_type&&e.Tcmpyinstagram.length>=26&&(t=1),e.isSocialSave=1==t},e.$watchCollection("[Tcmpyweb,Tcmpytwitter,Tcmpyfb,Tcmpylink,Tcmpypinterest,Tcmpytumblr,Tcmpygithub,Tcmpyinstagram]",function(t){e.checkScocialDisabled()}),e.saveSocials=function(){e.exhibitordisable=!1,e.typeofchange="save",e.EXweb=e.Tcmpyweb,e.EXfb=e.Tcmpyfb,e.EXtwitter=e.Tcmpytwitter,e.EXlin=e.Tcmpylink,e.EXpinterest=e.Tcmpypinterest,e.EXtumblr=e.Tcmpytumblr,e.EXgithub=e.Tcmpygithub,e.EXinstagram=e.Tcmpyinstagram,e.checkSocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange=""}),$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange="",e.checkScocialDisabled(),setTimeout(function(){$("#"+e.social_type+"_id").focus();var t=$("#"+e.social_type+"_id").val().length;$("#"+e.social_type+"_id")[0].setSelectionRange(t,t)},1e3)}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(p(),e.updateSocials())}),e.selectval=[],e.selectedtype=function(t){e.disexhi=!1,e.exhibitordisable=!1,e.selectval.indexOf(t.dayID)>=0?e.selectval.splice(e.selectval.indexOf(t.dayID),1):e.selectval.push(t.dayID),0==e.selectval.length&&(e.disexhi=!0)},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=l.dataURItoBlob(t);"cmpylogo"==e.cropType&&(e.imageSrc=t,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"cmpylogo"==e.cropType&&(e.imageSrc="",angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.cmpylogo.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(a,o){e.exhibitordisable=!1
;var r=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(a,o){o!=r-1?a.setType(4):a.file.size>5242880?(e.exhibitorform.cmpylogo.$setValidity("minsizeval",!1),a.setType(4),e.imageSrc=""):(e.exhibitorform.cmpylogo.$setValidity("minsizeval",!0),t.readAsDataUrl(a.file,e).then(function(t){l.getImgDimensions(t,function(o,r){o>=1024&&r>=1024?(e.exhibitorform.cmpylogo.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=t:(e.cropType="cmpylogo",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:t}}),$(".image-editor").cropit("imageSrc",t),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.exhibitorform.cmpylogo.$setValidity("minDimension",!1),a.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.s=i,e.getExhibitor=function(){$("#loading").show(),l.getExhibitors(e.currentval.event_code).then(function(t){1==t.result&&(e.EXdata=t.data,$("#loading").hide(),$("#container").fadeIn())})},e.invalidExname=!1,e.checkExhibitorname=function(){if(e.invalidExname=!1,e.exhibitordisable=!1,void 0!=e.name){var t=e.name.toLowerCase(),a=/^exhibitor[1-9][0-9]*$/,o=/^exhibitor[^a-zA-Z0-9][0-9][0-9]*$/,r=/^exhibitor no[^a-zA-Z0-9][0-9][0-9]*$/;"exhibitor"==t?e.invalidExname=!0:(a.test(t)||o.test(t)||r.test(t))&&(e.invalidExname=!0)}},e.eventLocations=function(){e.showLoc=!1,l.getEventlocations(e.currentval.event_code).then(function(t){1==t.result?(e.evtLoc=t.data,console.log(e.evtLoc),e.showLoc=!0):e.showLoc=!1})},e.eventLocations(),e.isValidLoc=!1,e.locValidation=function(t){e.exhibitordisable=!1,e.isValidLoc=!1,e.isValidLoc=l.validateLocation(t)},e.locationClick=function(t){e.spoLocation=t.location,e.showLoclist=!1,e.exhibitordisable=!1},e.spMail="",e.spMailList=[],e.duplicates=[],e.duplicateMail=!1,e.countmails=!1,e.addEmail=function(t){e.diplicte=!1,$("#exhifocus").focus();var a={mailSp:e.spMail,dupe:!1};void 0==t?e.emailcountsam<=10?(e.spMailList.push(a),e.duplicates.push(!1),"update"==e.EXType&&e.checkEmaildeletion(e.spMail,"add"),e.spMail="",e.checkMail(),e.countmails=!1):e.countmails=!0:void 0==e.emailcountsam||e.emailcountsam<9||1==isNaN(e.emailcountsam)?(e.spMailList.push(a),e.duplicates.push(!1),"update"==e.EXType&&e.checkEmaildeletion(e.spMail,"add"),e.spMail="",e.checkMail(),e.countmails=!1,void 0!=t&&e.emailcountsam++):e.countmails=!0},e.dupemail=function(){e.diplicte=!1,e.exhibitordisable=!1;for(var t=0;t<e.spMailList.length;t++)e.spMailList[t].mailSp==e.spMail&&(e.diplicte=!0)},e.validateMail=function(e){return!!/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(e)},e.checkMail=function(t,a){e.duplicateMail=!1;var o=[];angular.forEach(e.spMailList,function(t,a){if(void 0!=e.spMailList[a]){var r={mail:e.spMailList[a].mailSp,key:a};o.push(r),e.duplicates[a]=!1}}),o=o.sort(function(e,t){var a=e.mail.toLowerCase(),o=t.mail.toLowerCase();return a<o?-1:a>o?1:0});for(var r=o,n=0;n<o.length-1;n++)r[n+1].mail.toLowerCase()==r[n].mail.toLowerCase()&&(e.duplicates[r[n+1].key]=!0,e.duplicateMail=!0);if(void 0!=t&&void 0!=a){var i="invalidmails"+t;e[i]=!1,/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(a)?e[i]=!1:e[i]=!0}},e.removeEmail=function(t,a){10==e.defaultcode?(e.spMailList.splice(a,1),e.duplicates.splice(a,1),"update"==e.EXType&&e.checkEmaildeletion(t.mailSp,"rev"),e.countmails=!0):(e.spMailList.splice(a,1),e.duplicates.splice(a,1),"update"==e.EXType&&e.checkEmaildeletion(t.mailSp,"rev"),e.emailcountsam>e.defaultcode&&(e.emailcountsam--,e.countmails=!1)),e.checkMail(),e.dupemail()},e.checkEmaildeletion=function(t,a){angular.forEach(e.preferenceInfo,function(o,r){e.preferenceInfo[r].email==t&&(e.preferenceInfo[r].is_deleted="add"==a?0:1)})},e.errorScroll=function(){0==e.invalidExname&&0==e.diplicte&&e.exhibitorform.$valid&&!e.imageSrc?c(function(){i.scrollJquery("errorImg")},100):e.invalidExname?c(function(){i.scrollJquery("exhibiname")},100):(0==e.invalidExname&&e.invalidMail||0==e.invalidExname&&e.diplicte||0==e.invalidExname&&0==e.spMail.length)&&c(function(){i.scrollJquery("exhifocus")},100)},e.getExhibitor(),e.scroll=function(){m()},e.EXType="",e.EXUpdateVal="",e.Updateday=[],e.ChangeType=function(t,a,o,r){e.emailcountsam=o,e.defaultcode=o,e.checkSocials(),e.eventLocations(),m(),c(function(){$("#exhibiname").focus()},500),e.exhibitordisable=!1,e.spoLocation="",e.EXType=t,e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.imageSrc="",e.submitted=!0,e.selectval=[],e.error=!1,"create"==t?(e.desc="",e.name="",e.locationCode="",e.EXweb="",e.EXfb="",e.EXtwitter="",e.email="",e.EXlin="",e.EXloc="",e.Updateday=[],e.createEx=!0,e.alldayaccess=!0,e.btntxt="Submit",e.imgrequired=!0,e.imageSrc="",e.EXpinterest="",e.EXtumblr="",e.EXgithub="",e.EXinstagram="",e.spMail="",e.spMailList=[],e.duplicates=[],e.duplicateMail=!1,e.invalidMail=!1,e.preferenceInfo=[],e.showcaseEnable=0,e.Title="Add New Exhibitor",p(),e.updateSocials()):"update"==t&&(e.exhibitordisable=!0,e.EXUpdateVal=a,e.imgrequired=!1,e.createEx=!0,e.btntxt="Save",e.Title="Update Exhibitor",e.picChange=0,e.EXpinterest="",e.Updateday=[],e.EXtumblr="",e.EXgithub="",e.EXinstagram="",e.showcaseEnable=r?1:0,angular.forEach(e.EXdata,function(t){t.username==a&&(e.desc=t.description,e.name=t.name,angular.forEach(t.social_providers,function(t){"Website"==t.social_provider?e.EXweb=t.link:"Twitter"==t.social_provider?e.EXtwitter=t.link:"LinkedIn"==t.social_provider?e.EXlin=t.link:"Facebook"==t.social_provider?e.EXfb=t.link:"Pinterest"==t.social_provider?e.EXpinterest=t.link:"GitHub"==t.social_provider?e.EXgithub=t.link:"Instagram"==t.social_provider?e.EXinstagram=t.link:"Tumblr"==t.social_provider&&(e.EXtumblr=t.link)}),e.spoLocation=t.location.location_name,angular.forEach(e.evtLoc,function(a,o){e.evtLoc[o].location_code===t.location&&e.locationClick(e.evtLoc[o])}),e.imageSrc=t.profile_picture,e.restImage=t.profile_picture,t.days.length==e.dayscount?e.alldayaccess=!0:(e.alldayaccess=!1,e.selectval=[],angular.forEach(t.days,function(a,o){e.selectval.push(t.days[o].day_id)}),e.Updateday=e.selectval),e.exhibitor_code=t.exhibitor_code,e.spMail="",e.spMailList=[],e.duplicates=[],e.duplicateMail=!1,e.invalidMail=!1,e.preferenceInfo=[],angular.forEach(t.preferences,function(a,o){e.spMail=t.preferences[o].email;var r={email:t.preferences[o].email,preference:t.preferences[o].preference,is_deleted:0};e.preferenceInfo.push(r),e.addEmail()}))}),p(),e.updateSocials()),c(function(){$("textarea").each(function(){u(this)})},500)},e.exbialldayaccess=function(){0==e.alldayaccess?e.disexhi=!0:e.disexhi=!1},e.addAttendForm=function(){var t={mailSp:e.spMail,dupe:!1};e.spMailList.push(t),e.duplicates.push(!1),"update"==e.EXType&&e.checkEmaildeletion(e.spMail,"add"),e.checkMail(),e.existLocation=!1,e.showLoc&&angular.forEach(e.evtLoc,function(t,a){e.evtLoc[a].location.toLowerCase()===e.spoLocation.toLowerCase()&&(e.existLocation=!0,e.locationCode=e.evtLoc[a].location_code)});var r=[],n=0;angular.forEach(e.spMailList,function(t,a){if(1==e.validateMail(e.spMailList[a].mailSp)){n++;var o={email:e.spMailList[a].mailSp,preference:n};r.push(o)}}),"update"==e.EXType&&angular.forEach(e.preferenceInfo,function(t,a){if(1==e.preferenceInfo[a].is_deleted){e.preferenceInfo[a].email,Number(e.preferenceInfo[a].preference);r.push(e.preferenceInfo[a])}});var i=new FormData;i.append("event_code",e.currentval.event_code),i.append("showcase_enable",e.showcaseEnable),i.append("description",e.desc),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){i.append("profile_picture",e.file)});var l=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;0==l&&i.append("profile_picture",""),i.append("exhibitor_name",e.name);var s=[{social_provider:"Website",link:e.EXweb},{social_provider:"Twitter",link:e.EXtwitter},{social_provider:"Facebook",link:e.EXfb},{social_provider:"LinkedIn",link:e.EXlin},{social_provider:"Pinterest",link:e.EXpinterest},{social_provider:"Tumblr",link:e.EXtumblr},{social_provider:"GitHub",link:e.EXgithub},{social_provider:"Instagram",link:e.EXinstagram}];i.append("social_providers",angular.toJson(s)),i.append("preferences",angular.toJson(r)),null!=e.locationCode&&void 0!=e.locationCode&&""!=e.locationCode?i.append("location",e.locationCode):i.append("location",e.spoLocation),i.append("is_location_exist",e.existLocation);var c=[];if(0==e.alldayaccess?c=e.selectval:angular.forEach(e.dates,function(t,a){1==e.dates[a].isDayActive&&c.push(e.dates[a].dayID)}),0==e.alldayaccess&&0==c.length&&angular.forEach(e.dates,function(t,a){1==e.dates[a].isDayActive&&c.push(e.dates[a].dayID)}),$("#loading").show(),console.log(c),console.log(angular.toJson(c)),i.append("days",angular.toJson(c)),"create"==e.EXType)o({method:"POST",url:a.url+"/exhibitor/",data:i,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.spMail="",e.cdata=t.data,1==e.cdata.result?(e.spoLocation="",e.createEx=!1,e.getExhibitor(),m()):(e.error=!0,e.errormsg=e.cdata.message),$("#loading").hide()});else if("update"==e.EXType){i.append("exhibitor_code",e.exhibitor_code),i.append("opp","edit");var l=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;e.picChange=l<=0?0:1,i.append("new_picture",e.picChange),o({method:"POST",url:a.url+"/exhibitor_edit/",data:i,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.udata=t.data,1==e.udata.result?(e.spoLocation="",e.createEx=!1,e.getExhibitor(),m()):(e.error=!0,e.errormsg=e.udata.message),$("#loading").hide()})}},e.nameEX="",e.deleteuser="",e.setrevoke=function(t,a,o){e.nameEX=t.trim(),e.deleteuser=o},e.DelEx=function(){o({method:"POST",url:a.url+"/exhibitor_edit/",data:{opp:"delete",event_code:e.currentval.event_code,exhibitor_code:e.deleteuser}}).then(function(t){1==t.data.result&&(e.getExhibitor(),$("#myModal-exhibitor").modal("hide"))})},e.resendMail=function(t,r){e.resendemailid=t,$("#loading").show(),o({method:"POST",url:a.url+"/showcase_resend_invitation/",data:{event_code:e.currentval.event_code,showcase_code:r,email:t,showcase_type:2}}).then(function(t){e.data=t.data,1==e.data.result?($("#loading").hide(),$("#modal-resendMail").modal("show")):0==e.data.result&&(e.errormsg=!0,e.showerror=t.data.message)})},e.disablesponsor=function(t,a,o,r){e.spocode=t,e.sponame=a,e.per=o?"disable":"enable",e.type=r},e.DisSponser=function(){e.ShowCase_Permission(e.spocode,e.per,e.type)},e.ShowCase_Permission=function(t,r,n){"enable"==r?o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"enable",showcase_type:2,showcase:!1}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.getExhibitor(),$("#myModal-exhibitor-enable").modal("hide"))}):"disable"==r&&o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"revoke",showcase_type:2,showcase:!1}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&($("#myModal-exhibitor-enable").modal("hide"),e.getExhibitor())})},$("textarea").each(function(){u(this)}).on("input",function(){u(this)}),0==d.online&&alert("You are not connected to internet")}]),app.controller("HappyhelpController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$anchorScroll","$rootScope",function(e,t,a,o,r,n,i,l,s,c){document.title="YARA - HappyHelp",e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.Eventlist=[],e.s=i,e.key=a.captcha_key,e.issue=!1;var d=sessionStorage.getItem("redirectFrom"),m="";e.rdEvent=!1,"Event"==d&&(e.issue=!0,sessionStorage.setItem("redirectFrom",""),m=localStorage.getItem("selectedEventId"),e.rdEvent=!0),l.getEvents().then(function(t){if(1==t.result){e.Eventlist=t.events;var a=n("filter")(e.Eventlist,{is_active:!0});a.length>0&&(e.selectedval=a[0].event_code),e.rdEvent&&(e.selectedval=m),$("#loading").hide()}else e.errorstatus=!0}),e.setOffset=function(t){return l.userOffsetTime(t,e.userOffset)},e.checkdate=function(e){var t,a=new Date(e.end_date),o=n("date")(a,"yyyy-MM-dd");if(angular.forEach(e.days,function(e,a){var r=new Date(a);r=n("date")(r,"yyyy-MM-dd"),o==r&&(t=e.endtime)}),void 0==t||null==t||""==t)return!1;var r=t.split(" "),i=r[0].split(":");return"PM"==r[1]&&(i[0]=Number(i[0])+12),a.setHours(i[0]),a.setMinutes(i[1]),moment(a).add(48,"hours")>=moment()},e.changeEvent=function(t){e.selectedval=t},e.issuesList=[],e.getAllIssues=function(){l.getAllIssues().then(function(t){1==t.result&&(e.issuesList=t.issues,e.inView&&angular.forEach(e.issuesList,function(t){t.issue_code==e.valView.issue_code&&(e.valView=t)}))})},e.getAllIssues(),e.subtitle="",e.defIssueslist=["Raise a ticket to this event ","Feedback","Bug Report","General Enquiry","Bills and Payments","Sales Related","Other"],e.Selectsubtype=function(t){e.subtitle=t},e.selectedval=0,e.createIssue=function(){var t;e.showEvent?(e.selectedval="",t={issue_name:e.subtitle,description:e.issuedesc,issue_sub_type:e.subtitle}):t={event_code:e.selectedval,issue_name:e.subtitle,description:e.issuedesc,issue_sub_type:e.subtitle},o({method:"POST",url:a.url+"/happy_help/",data:t}).then(function(t){e.res=t.data,1==e.res.result?(e.subtitle="",e.selectedval=0,e.issuedesc="",e.othertopic="",e.errorStatus=!1,e.submitted=!1,e.getAllIssues(),s(0),e.rdEvent=!1,e.captchaInvalid=!0,location.reload()):0==e.res.result?(e.errorStatus=!0,e.errormsg=e.res.message):(e.errorStatus=!0,e.errormsg=l.errorMsg[1])},function(t){e.errorStatus=!0,t.status==-1||null==t.data?(e.errormsg=l.errorMsg[0],0==c.online?e.errormsg=l.errorMsg[0]:e.errormsg=l.errorMsg[1]):e.errormsg=l.errorMsg[1]})},e.setView=function(t){e.valView=t,e.inView=!0,s()},e.scrollanchar=function(){s()},e.replyForm=function(){$("#loading").show(),e.replyRes={},o({method:"POST",url:a.url+"/happy_help/user_responds/",data:{issue_code:e.valView.issue_code,responds:e.posttxt}}).then(function(t){e.replyRes=t.data,1==e.replyRes.result?($("#happyReply").modal("hide"),e.posttxt="",e.getAllIssues(),e.replySubmitted=!1,$("#loading").hide()):0==e.replyRes.result?(e.replyRes.result=0,e.replyRes.error=e.replyRes.message):(e.replyRes.result=0,e.replyRes.error=l.errorMsg[1])},function(t){e.replyRes.result=0,(t.status==-1||null==t.data)&&0==c.online?e.replyRes.error=l.errorMsg[0]:e.replyRes.error=l.errorMsg[1]})},e.ishelpful=function(t){$("#loading").show(),o({method:"POST",url:a.url+"/happy_help/helpfull/",data:{issue_code:e.valView.issue_code,is_helpfull:!0,response_code:t}}).then(function(t){1==t.data.result?(e.getAllIssues(),$("#loading").hide()):$("#loading").hide()})},e.issueClosed=function(t){$("#loading").show(),o({method:"POST",url:a.url+"/happy_help/update_issue/",data:{issue_code:e.valView.issue_code,status:t}}).then(function(t){1==t.data.result?(e.getAllIssues(),$("#loading").hide()):$("#loading").hide()})},0==c.online&&alert("You are not connected to internet")}]),app.controller("EventFloorMapController",["$scope","$http","YaraBaseUrl","$location","GetDataService","fileReader","$timeout","APPService","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){e.headerTitle="FloorMap",e.dashboardsUrl=r.dashboardUrl();var d=localStorage.getItem("selectedEventId");void 0===d||null===d?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - FloorMap"),e.locationHref=window.location.pathname,"Admin"==r.getPrivilege()?e.privilege=!0:e.privilege=!1,e.getFloor=function(){r.getFloorMap(e.currentval.event_code).then(function(t){1==t.result&&(e.floordata=t.floor_maps,$("#loading").hide(),$("#container").fadeIn())})},e.getFloor(),e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=r.dataURItoBlob(t);"floorPic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"floorPic"==e.cropType&&(e.imageSrc="",angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.floorPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){var o=e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?(e.floormapform.floorPic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.floormapform.floorPic.$setValidity("minsizeval",!0),n.readAsDataUrl(t.file,e).then(function(a){r.getImgDimensions(a,function(o,r){o>=600&&r>=600?(e.floormapform.floorPic.$setValidity("minDimension",!0),e.imageSrc=a):(e.floormapform.floorPic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.resetfields=function(){c(),e.submitted=!0,e.floorname="",e.imageSrc="",e.errorstatus=!1,i(function(){$("#floorname").focus()},500),e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length>0&&angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})},e.closing=function(){c(),e.errorstatus=!1},e.setrevoke=function(t){e.floorname=t.floor_name,e.floorCode=t.floor_map_code},e.DelFM=function(){$("#loading").show(),t({method:"POST",url:a.url+"/floor_map_edit/",data:{opp:"delete",event_code:e.currentval.event_code,floor_map_code:e.floorCode}}).then(function(t){1==t.data.result&&(e.getFloor(),$("#myModal-exhibitor").modal("hide"))})},e.checkFloormapname=function(){if(e.invalidFMname=!1,e.errorstatus=!1,void 0!=e.floorname){var t=e.floorname.toLowerCase(),a=/^floor map[0-9][0-9]*$/,o=/^floor map[^a-zA-Z0-9][0-9][0-9]*$/,r=/^floormap[0-9][0-9]*$/,n=/^floormap[^a-zA-Z0-9][0-9][0-9]*$/,i=/^(?:1st|[1-9][0-9]st|2nd|[1-9][0-9]nd|3rd|[1-9][0-9]rd|4th|[1-9][0-9]th)*$/,l=/^(?:1st floormap|[1-9][0-9]st floormap|2nd floormap|[1-9][0-9]nd floormap|3rd floormap|[1-9][0-9]rd floormap|4th floormap|[1-9][0-9]th floormap)*$/,s=/^(?:1st floor map|[1-9][0-9]st floor map|2nd floor map|[1-9][0-9]nd floor map|3rd floor map|[1-9][0-9]rd floor map|4th floor map|[1-9][0-9]th floor map)*$/,c=/^map[0-9][0-9]*$/,d=/^map[^a-zA-Z0-9][0-9][0-9]*$/,m=/^(?:1st map|[1-9][0-9]st map|2nd map|[1-9][0-9]nd map|3rd map|[1-9][0-9]rd map|4th map|[1-9][0-9]th map)*$/;"floormap"==t||"floor map"==t||"map"==t?e.invalidFMname=!0:a.test(t)||o.test(t)||r.test(t)||n.test(t)||i.test(t)||l.test(t)||s.test(t)?e.invalidFMname=!0:(c.test(t)||d.test(t)||m.test(t))&&(e.invalidFMname=!0)}},e.checkFloormapedit=function(){if(e.invalidFMedit=!1,e.errorstatus=!1,void 0!=e.floormapedit){var t=e.floormapedit.toLowerCase(),a=/^floor map[0-9][0-9]*$/,o=/^floor map[^a-zA-Z0-9][0-9][0-9]*$/,r=/^floormap[0-9][0-9]*$/,n=/^floormap[^a-zA-Z0-9][0-9][0-9]*$/,i=/^(?:1st|[1-9][0-9]st|2nd|[1-9][0-9]nd|3rd|[1-9][0-9]rd|4th|[1-9][0-9]th)*$/,l=/^(?:1st floormap|[1-9][0-9]st floormap|2nd floormap|[1-9][0-9]nd floormap|3rd floormap|[1-9][0-9]rd floormap|4th floormap|[1-9][0-9]th floormap)*$/,s=/^(?:1st floor map|[1-9][0-9]st floor map|2nd floor map|[1-9][0-9]nd floor map|3rd floor map|[1-9][0-9]rd floor map|4th floor map|[1-9][0-9]th floor map)*$/,c=/^map[0-9][0-9]*$/,d=/^map[^a-zA-Z0-9][0-9][0-9]*$/,m=/^(?:1st map|[1-9][0-9]st map|2nd map|[1-9][0-9]nd map|3rd map|[1-9][0-9]rd map|4th map|[1-9][0-9]th map)*$/;"floormap"==t||"floor map"==t||"map"==t?e.invalidFMedit=!0:a.test(t)||o.test(t)||r.test(t)||n.test(t)||i.test(t)||l.test(t)||s.test(t)?e.invalidFMedit=!0:(c.test(t)||d.test(t)||m.test(t))&&(e.invalidFMedit=!0)}},e.addfloormap=function(){$("#loading").show();var o=new FormData;o.append("event_code",e.currentval.event_code),angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){o.append("image",e.file)}),0==e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length&&o.append("image",""),o.append("floor_name",e.floorname),t({method:"POST",url:a.url+"/floor_map/",data:o,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,0==e.data.result?(e.errorstatus=!0,e.errormsg=e.data.message):(e.createFM=!1,e.getFloor(),e.resetfields()),$("#loading").hide(),$("#container").fadeIn()},function(t){e.errorstatus=!0,e.shownav=!1,t.status!=-1&&null!=t.data||0!=s.online?e.errormsg=r.errorMsg[1]:e.errormsg=r.errorMsg[0],$("#loading").hide(),$("#container").fadeIn()})},e.setedit=function(t){e.fmapcode=t.floor_map_code,e.floormapedit=t.floor_name},e.editfloormap=function(){$("#loading").show(),t({method:"POST",url:a.url+"/floor_map_edit/",data:{opp:"edit",floor_name:e.floormapedit,floor_map_code:e.fmapcode}}).then(function(t){1==t.data.result?(e.getFloor(),e.floormapedit="",$("#floor_map").modal("hide")):(e.errorstatus=!0,$("#loading").hide())})},0==s.online&&alert("You are not connected to internet")}]),app.controller("VenueGreetController",["$scope","$http","YaraBaseUrl","$location","GetDataService","$rootScope","$timeout",function(e,t,a,o,r,n,i){function l(e){$(e).css({height:"auto","overflow-y":"hidden"}).height(e.scrollHeight)}e.headerTitle="VenueGreet";var s=localStorage.getItem("selectedEventId");void 0===s||null===s?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - VenueGreet"),e.locationHref=window.location.pathname,"Admin"==r.getPrivilege()?e.privilege=!0:e.privilege=!1,e.greetList=[],e.spdelegate=e.currentval.sp_people;var c={group_tittle:"Delegates",id:10,single_entity_tittle:"Delegate"};e.spdelegate.push(c),e.getspDelegatename=function(t){for(var a=e.spdelegate.length-1;a>=0;a--)if(e.spdelegate[a].id==t)return e.spdelegate[a].group_tittle},e.getVenueGreet=function(){$("#loading").show(),r.getVenueGreet(e.currentval.event_code).then(function(t){if(1==t.result&&($("#loading").hide(),$("#container").fadeIn(),e.greetList=t.geo_circles,e.foundDeg=!1,e.foundSK=!1,e.create=!0,e.hideSK=!1,e.hideDeg=!1,e.lists=[],e.greetList.length>0)){for(var a=0;a<e.greetList.length;a++)for(var o=0;o<e.greetList[a].message_for.length;o++)e.lists.push(e.greetList[a].message_for[o]);e.spdelegate.length==e.lists.length&&(e.create=!1)}})},e.getVenueGreet(),e.addGreet=function(){e.venue_greet=!0,e.attendval=[],i(function(){$("textarea").each(function(){l(this)})},100)},e.attendval=[],e.attendspdel=function(t){e.specialdel=t;var a=e.attendval.indexOf(t.id);a>-1?e.attendval.splice(a,1):e.attendval.push(t.id),e.attendval.length>0?e.attendDeg=!0:e.attendDeg=!1},e.checkval=function(t){e.vsl=!1;for(var a=0;a<e.attendval.length;a++)e.attendval[a]==t.id&&(e.vsl=!0);return e.vsl},e.addGreetMsg=function(){$("#loading").show(),t({method:"POST",url:a.url+"/geo_circle/",data:{event_code:e.currentval.event_code,message_for:e.attendval,message:e.msg}}).then(function(t){e.data=t.data,0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message,$("#loading").hide(),$("#container").fadeIn()):1==e.data.result&&(e.submitted=!1,e.venue_greet=!1,e.errormsg=!1,e.msg="",e.getVenueGreet(),e.attendSK=!1,e.attendDeg=!1,e.attendval=[],$("#loading").hide(),$("#container").fadeIn())},function(t){e.data={},e.errormsg=!0,t.status==-1||null==t.data?e.data.error=r.errorMsg[0]:e.data.error=r.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.setDel=function(t){e.DelCode=t},e.delGreetMsg=function(){$("#loading").show(),t({method:"POST",url:a.url+"/geo_circle_edit/",data:{event_code:e.currentval.event_code,opp:"delete",geo_circle_code:e.DelCode}}).then(function(t){e.data=t.data,0==e.data.result?(e.errormsg1=!0,e.data.error=e.data.message,$("#loading").hide(),$("#container").fadeIn()):1==e.data.result&&(e.errormsg1=!1,e.getVenueGreet(),$("#loading").hide(),$("#container").fadeIn(),$("#venue_delete").modal("hide"))},function(t){e.data={},e.errormsg1=!0,t.status==-1||null==t.data?(e.data.error=r.errorMsg[0],0==n.online?e.data.error=r.errorMsg[0]:e.data.error=r.errorMsg[1]):e.data.error=r.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.clearveniue=function(){e.msg="",e.attendval=[],i(function(){$("textarea").each(function(){l(this)})},100)},$("textarea").each(function(){l(this)}).on("input",function(){l(this)}),0==n.online&&alert("You are not connected to internet")}]),app.controller("EventWifiController",["$scope","$http","YaraBaseUrl","$location","GetDataService","$timeout","APPService","$rootScope",function(e,t,a,o,r,n,i,l){e.dashboardsUrl=r.dashboardUrl(),e.headerTitle="Wifi Spots";var s=localStorage.getItem("selectedEventId");if(void 0===s||null===s)window.location="/events";else{e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.admCntrycode=e.currentval.phone_number.split(" ",1),e.spPeople=e.currentval.sp_people;var c={group_tittle:"Delegates",id:10,single_entity_tittle:"Delegate"};e.spPeople.push(c),console.log(e.spPeople),e.defaultSelection=function(){console.log("reach here"),console.log(e.spPeople);for(var t=e.spPeople.length-1;t>=0;t--)e.spPeople[t].clicked=!1},e.defaultSelection(),console.log(e.spPeople),document.title="YARA - "+e.currentval.short_name+" - WiFi"}e.selectedpeople=[],e.locationHref=window.location.pathname,"Admin"==r.getPrivilege()?e.privilege=!0:e.privilege=!1,e.forAll=!1,e.forPeople=!1,e.forTickets=!1,e.getWifiData=function(){$("#loading").show(),e.WifiData=[],r.getWifi(e.currentval.event_code).then(function(t){1==t.result&&(e.WifiData=t.wifi_data,e.WifiInfo=t,e.selectedpeople=[],e.assigntickets=[],e.WifiData.length>0&&(e.forAll=t.for_all,e.forPeople=t.for_people,e.forTickets=t.for_tickets),angular.forEach(e.WifiData,function(t){angular.forEach(t.tickets,function(t){e.assigntickets.push(t.ticket_code)}),angular.forEach(t.people_types,function(t){e.selectedpeople.push(t)})}),$("#loading").hide(),$("#container").fadeIn())})},e.getWifiData(),e.ticktselected=[],e.changetselect=function(t,a){if(0==t)e.ticktselected.push(a);else{for(var o=[],r=0;r<e.ticktselected.length;r++)e.ticktselected[r]!=a&&o.push(e.ticktselected[r]);e.ticktselected=o}return!t},e.spTypeSelection=function(t){for(var a=e.spPeople.length-1;a>=0;a--)e.spPeople[a].id==t.id&&(0==t.clicked?(e.spPeople[a].clicked=!0,e.peopleMissing=!1):e.spPeople[a].clicked=!1);console.log(e.spPeople)},e.ChangesWifi=function(t,a){r.getTickets(e.currentval.event_code).then(function(t){e.ticketsdata=t.tickets,angular.forEach(e.ticketsdata,function(t){0<=e.assigntickets.indexOf(t.ticket_code)?t.isAssigned=!0:t.isAssigned=!1})}),e.tranWifiType=t,"create"==t?(e.WifiTitle="Create New WiFi Spot",e.btntxt="ADD",e.createwifi=!0,e.wifiname="",e.wifiSSID="",e.wifipwd="",e.admName=void 0,e.admPh=void 0,e.WifiUser="",e.reqPhone=!1,e.reqName=!1,e.ticktselected=[],e.tempticket=[],e.removeSel=function(t){e.selstatus=!1;for(var a=0;a<e.selectedpeople.length;a++)t==e.selectedpeople[a]&&(e.selstatus=!0);return!e.selstatus}):"update"==t&&(e.selectedWifi_code=a,e.ticktselected=[],e.WifiTitle="Update WiFi Spot",e.createwifi=!0,e.btntxt="Update",angular.forEach(e.WifiData,function(t){if(t.wifi_code==a){console.log(t),e.wifiSSID=t.ssid,""==t.admin_name?e.admName=void 0:e.admName=t.admin_name,e.wifipwd=t.password;var o=t.admin_phone.split(" ");if(console.log(o),console.log(o[0]),2==o.length?(""==o[1]?e.admPh=void 0:e.admPh=o[1],e.admCntrycode=o[0]):""!=t.admin_phone?e.admPh=t.admin_phone:e.admPh=void 0,e.defaultSelection(),1==e.WifiInfo.for_people){e.WifiUser="People",console.log(t.people_types);for(var r=e.spPeople.length-1;r>=0;r--)for(var n=t.people_types.length-1;n>=0;n--)e.spPeople[r].id==t.people_types[n]&&(e.spPeople[r].clicked=!0);e.removeSel=function(t){e.selstatus=!1;for(var a=0;a<e.selectedpeople.length;a++)t==e.selectedpeople[a]&&(e.selstatus=!0);return e.selstatus,!0}}else 1==e.WifiInfo.for_tickets?(e.WifiUser="Ticket",angular.forEach(t.tickets,function(t){e.ticktselected.push(t.ticket_code)})):1==e.WifiInfo.for_all&&(e.WifiUser="forall")}}),e.tempticket=e.ticktselected),n(function(){$("#wifiadd").focus()},100)},e.deleteWifi=function(t){console.log(t),e.fname=t.ssid,e.wificode=t.wifi_code,console.log(e.fname,e.wificode)},e.wifirevoke=function(){t({method:"POST",url:a.url+"/wifi_edit/",data:{opp:"delete",wifi_code:e.wificode,event_code:e.currentval.event_code}}).then(function(t){1==t.data.result&&(e.forAll=!1,e.forPeople=!1,e.forTickets=!1,e.getWifiData(),$("#wifi-delete").modal("hide"))})},e.addWifi=function(){e.ticketMissing=!1,e.peopleMissing=!1,console.log("reach");var o=[],r=0,n=0;if("People"==e.WifiUser)for(var i=e.spPeople.length-1;i>=0;i--)1==e.spPeople[i].clicked&&o.push(e.spPeople[i].id);"People"==e.WifiUser?(r=0,n=0,0==o.length&&(e.peopleMissing=!0)):"forall"==e.WifiUser?(r=1,n=0):"Ticket"==e.WifiUser&&(r=0,n=1,0==e.ticktselected.length&&(e.ticketMissing=!0));var l="";console.log(e.admPh),void 0!=e.admPh&&""!=e.admPh&&null!=e.admPh&&(l=e.admCntrycode+" "+e.admPh),void 0!=e.admName&&""!=e.admName&&null!=e.admPh||(e.admName=""),0==e.ticketMissing&&0==e.peopleMissing&&("create"==e.tranWifiType?t({method:"POST",url:a.url+"/wifi/",data:{event_code:e.currentval.event_code,connection_name:e.wifiname,ssid:e.wifiSSID,password:e.wifipwd,admin_name:e.admName,admin_phone:l,ticket_codes:e.ticktselected,for_tickets:n,for_all:r,people_type:o}}).then(function(t){1==t.data.result?(e.createwifi=!1,e.forAll=!1,e.forPeople=!1,e.forTickets=!1,e.getWifiData(),e.errorStatus=!1,e.admName=void 0,e.admPh=void 0):0==t.data.result&&(e.errorStatus=!0,e.msg=t.data.message)}):"update"==e.tranWifiType&&t({method:"POST",url:a.url+"/wifi_edit/",data:{opp:"edit",event_code:e.currentval.event_code,wifi_code:e.selectedWifi_code,connection_name:e.wifiname,ssid:e.wifiSSID,password:e.wifipwd,admin_name:e.admName,admin_phone:l,ticket_codes:e.ticktselected,for_tickets:n,for_all:r,people_type:o}}).then(function(t){1==t.data.result?(e.createwifi=!1,e.getWifiData(),e.errorStatus=!1,e.admName=void 0,e.admPh=void 0):0==t.data.result&&(e.errorStatus=!0,e.msg=t.data.message)}))},e.errorScroll=function(){e.reqPhone||e.reqName?n(function(){i.scrollJquery("adnameId")},100):(void 0!=e.admName||e.admName||null!=e.admName)&&(e.wordlength||e.firstNameMaxLength||e.middleNameMaxLength||e.lastNameMaxLength)&&n(function(){i.scrollJquery("adnameId")},100)},e.fullNameCheck=function(){return void 0==e.admName&&!e.admName&&null==e.admName||(!(e.wordlength||e.firstNameMaxLength||e.middleNameMaxLength||e.lastNameMaxLength)||(e.errorScroll(),!1))},e.ticketAvilabile=function(t){return console.log(t),"update"==e.tranWifiType?0!=t.isAssigned||1!=t.is_validity_over:1!=t.isAssigned&&1!=t.is_validity_over},e.reqPhone=!1,e.reqName=!1,e.$watchCollection("[admPh,admName]",function(t){void 0==e.admPh&&null==e.admPh||void 0!=e.admName&&e.admName&&null!=e.admName?void 0!=e.admPh&&null!=e.admPh||void 0!=e.admName&&e.admName&&null!=e.admName?void 0!=e.admPh&&null!=e.admPh||void 0==e.admName&&!e.admName&&null==e.admName?void 0==e.admPh&&null==e.admPh||void 0==e.admName&&!e.admin_name&&null==e.admName||(e.reqPhone=!1,e.reqName=!1,console.log("4")):(e.reqPhone=!0,e.reqName=!1,console.log("3")):(e.reqPhone=!1,e.reqName=!1,console.log("2")):(e.reqPhone=!1,e.reqName=!0,console.log("1"))}),0==l.online&&alert("You are not connected to internet")}]),app.controller("EventReadyCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService","$q","$rootScope",function(e,t,a,o,r,n,i,l,s){
var c=angular.fromJson(localStorage.getItem("eventReadyRedirection"));void 0!=c&&1!=c.eventready||(window.location="/dashboard"),e.setOffset=function(e,t){return i.userOffsetTime(e,t)},o(function(){e.checkdate=function(e,t,a){return console.log(e,t,a),i.startend(e,t,a)}},500);var d=localStorage.getItem("selectedEventId");void 0===d||null===d?window.location="/events":i.getEvent(d).then(function(t){$("#loading").show(),1==t.result&&(console.log(t),e.eventsdata=t.events,e.currentval=e.eventsdata[0],console.log(e.currentval),e.s_date=e.setOffset(e.currentval.start_date,e.currentval.eo),e.e_date=e.setOffset(e.currentval.end_date,e.currentval.eo),localStorage.setItem("selEventsData",angular.toJson(e.currentval)),$("#loading").hide(),$("#container").fadeIn())}),e.gotoTrack=function(){c.eventready=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(c)),window.location="/event-tracks"},0==s.online&&alert("You are not connected to internet")}]),app.controller("UseGatekeeperCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){var s=angular.fromJson(localStorage.getItem("eventReadyRedirection"));void 0!=s&&1!=s.gk||(window.location="/events"),e.setOffset=function(e,t){return i.userOffsetTime(e,t)};var c=localStorage.getItem("selectedEventId");if(void 0===c||null===c)window.location="/events";else{var d=localStorage.getItem("selEventsData");e.currentval=angular.fromJson(d),e.s_date=e.setOffset(e.currentval.start_date,e.currentval.eo),e.e_date=e.setOffset(e.currentval.end_date,e.currentval.eo)}e.s=t,e.EventSetup=function(t){n({method:"POST",url:r.url+"/event_kit/",data:{event_code:e.currentval.event_code,kit:"GateKeeper",is_enabled:t}}).then(function(t){e.data=t.data,0==e.data.result?(e.errormsg=!0,e.errmsg=e.data.message):1==e.data.result&&(s.gk=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(s)),1==e.currentval.is_private?window.location="/posting-pin":window.location="/event-setup-promotion")},function(t){e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.errmsg=i.errorMsg[0]:e.errmsg=i.errorMsg[1]})}}]),app.controller("UseMessagingCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService",function(e,t,a,o,r,n,i){var l=localStorage.getItem("CreatedEventDetails"),s=angular.fromJson(localStorage.getItem("CreatedEventData"));e.loc="/events",void 0==l||null==l?window.location.replace("/events"):(e.data=angular.fromJson(l),e.data.event_activation_time=s.event_activation_time,e.data.is_private||void 0==s.kits.Promote||(e.loc="/event-setup-promotion")),e.s=t,e.EventSetup=function(t){n({method:"POST",url:r.url+"/event_kit/",data:{event_code:s.event_code,kit:"Messaging",is_enabled:t}}).then(function(t){e.data=t.data,0==e.data.result?(e.errormsg=!0,e.errmsg=e.data.message):(e.cdate=angular.fromJson(l),e.cdate.is_private?(localStorage.removeItem("CreatedEventDetails"),window.location.replace("/events")):window.location.replace(e.loc))},function(t){e.errormsg=!0,(t.status==-1||null==t.data)&&0==$rootScope.online?e.errmsg=i.errorMsg[0]:e.errmsg=i.errorMsg[1]})}}]),app.controller("UsePromotionCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){var s=angular.fromJson(localStorage.getItem("eventReadyRedirection"));void 0!=s&&1!=s.promote||(window.location="/dashboard"),e.setOffset=function(e,t){return i.userOffsetTime(e,t)};var c=localStorage.getItem("selectedEventId");if(void 0===c||null===c)window.location="/events";else{var d=localStorage.getItem("selEventsData");e.currentval=angular.fromJson(d),e.s_date=e.setOffset(e.currentval.start_date,e.currentval.eo),e.e_date=e.setOffset(e.currentval.end_date,e.currentval.eo)}e.s=t,e.EventSetup=function(t){n({method:"POST",url:r.url+"/event_kit/",data:{event_code:e.currentval.event_code,kit:"Promote",is_enabled:t}}).then(function(t){e.data=t.data,0==e.data.result?(e.errormsg=!0,e.errmsg=e.data.message):1==e.data.result&&(localStorage.removeItem("redirectionInfo"),localStorage.removeItem("phonInfo"),localStorage.removeItem("lng"),localStorage.removeItem("lat"),localStorage.removeItem("isEventPrvt"),localStorage.removeItem("epData"),localStorage.removeItem("country"),s.promote=!0,s.pin=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(s)),i.getEvent(c).then(function(t){1==t.result&&(e.eventsdata=t.events,e.currentval=e.eventsdata[0],localStorage.setItem("selEventsData",angular.toJson(e.currentval)),window.location.replace("/event"))}))},function(t){e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.errmsg=i.errorMsg[0]:e.errmsg=i.errorMsg[1]})},0==l.online&&alert("You are not connected to internet")}]),app.controller("pinCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){var s=angular.fromJson(localStorage.getItem("eventReadyRedirection"));void 0!=s&&1!=s.pin||(window.location="/dashboard"),e.setOffset=function(e,t){return i.userOffsetTime(e,t)};var c=localStorage.getItem("selectedEventId");if(void 0===c||null===c)window.location="/events";else{var d=localStorage.getItem("selEventsData");e.currentval=angular.fromJson(d),e.s_date=e.setOffset(e.currentval.start_date,e.currentval.eo),e.e_date=e.setOffset(e.currentval.end_date,e.currentval.eo)}e.EventSetup=function(t){n({method:"POST",url:r.url+"/setup-event-pinTopulse/",data:{event_code:e.currentval.event_code,is_enabled:t}}).then(function(t){e.data=t.data,0==e.data.result?(e.errormsg=!0,e.errmsg=e.data.message):1==e.data.result&&(localStorage.removeItem("redirectionInfo"),localStorage.removeItem("phonInfo"),localStorage.removeItem("lng"),localStorage.removeItem("lat"),localStorage.removeItem("isEventPrvt"),localStorage.removeItem("epData"),localStorage.removeItem("country"),i.getEvent(c).then(function(t){1==t.result&&(console.log(t),e.eventsdata=t.events,e.currentval=e.eventsdata[0],console.log(e.currentval),localStorage.setItem("selEventsData",angular.toJson(e.currentval)),window.location.replace("/event"))}))},function(t){e.errormsg=!0,(t.status==-1||null==t.data)&&0==l.online?e.errmsg=i.errorMsg[0]:e.errmsg=i.errorMsg[1]})},0==l.online&&alert("You are not connected to internet")}]),app.controller("CollaboratorDashboardCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService","$rootScope",function($scope,APPService,fileReader,$timeout,YaraBaseUrl,$http,GetDataService,$rootScope){$scope.permission=GetDataService.permission,$scope.selectedPermission=[],$scope.setOffset=function(e,t){return GetDataService.userOffsetTime(e,t)};var d=$("#data").val();if(void 0!=d&&null!=d&&""!=d){var s=d,json=JSON.stringify(eval("("+s+")"));s=JSON.parse(json),localStorage.setItem("Logininfo",JSON.stringify(s));var dashboardUrl="collaborator-dashboard";localStorage.setItem("dashboardUrl","collaborator-dashboard"),window.location.replace("/collaborator-dashboard")}void 0!=angular.fromJson(localStorage.getItem("Logininfo"))&&($scope.collabratorInfo=angular.fromJson(localStorage.getItem("Logininfo")),"empty"==$scope.collabratorInfo.user_offset?window.location="/settings":GetDataService.eventInfo(Number($scope.collabratorInfo.event_code)).then(function(e){1==e.result&&($scope.currentval=e.event_data,console.log($scope.currentval),$scope.collabaroterPermission=$scope.collabratorInfo.permissions,$scope.s_date=$scope.setOffset($scope.currentval.start_date,$scope.currentval.eo),$scope.e_date=$scope.setOffset($scope.currentval.end_date,$scope.currentval.eo),angular.forEach($scope.collabaroterPermission,function(e,t){angular.forEach($scope.permission,function(e,a){if($scope.collabaroterPermission[t].toLowerCase()==a.toLowerCase()){var o={name:a,url:$scope.permission[a]};$scope.selectedPermission.push(o)}})}),localStorage.setItem("selectedPermission",JSON.stringify($scope.selectedPermission)),localStorage.setItem("selEventsData",JSON.stringify(e.event_data)),localStorage.setItem("selectedEventId",Number($scope.collabratorInfo.event_code)))})),$scope.checkGatekeeper=function(){if("empty"!=$scope.collabratorInfo.user_offset)if(0==$scope.currentval.gate_keeper){localStorage.removeItem("infoPageErrors");var e={errorNum:2,heading:$scope.currentval.name,subHeading:"",description:""};localStorage.setItem("infoPageErrors",angular.toJson(e)),window.location="/info"}else window.location="/collaborator/gatekeeper"},$scope.Logout=function(){GetDataService.Signout().then(function(e){1==e.result&&(localStorage.clear(),window.location=YaraBaseUrl.yara)})},0==$rootScope.online&&alert("You are not connected to internet")}]),app.controller("ShowcaseDashboardCtrl",["$scope","APPService","fileReader","$timeout","YaraBaseUrl","$http","GetDataService","$rootScope",function($scope,APPService,fileReader,$timeout,YaraBaseUrl,$http,GetDataService,$rootScope){$scope.setOffset=function(e,t){return GetDataService.userOffsetTime(e,t)};var d=$("#data").val();if(void 0!=d&&null!=d&&""!=d){var s=d,json=JSON.stringify(eval("("+s+")"));s=JSON.parse(json),localStorage.setItem("Logininfo",JSON.stringify(s));var dashboardUrl="showcase-dashboard";localStorage.setItem("dashboardUrl","showcase-dashboard"),window.location.replace("/showcase-dashboard")}void 0!=angular.fromJson(localStorage.getItem("Logininfo"))&&($scope.sponExhibInfo=angular.fromJson(localStorage.getItem("Logininfo")),"empty"==$scope.sponExhibInfo.user_offset?window.location="/settings":GetDataService.eventInfo(Number($scope.sponExhibInfo.event_code)).then(function(e){1==e.result&&($scope.currentval=e.event_data,$scope.s_date=$scope.setOffset($scope.currentval.start_date,$scope.currentval.eo),$scope.e_date=$scope.setOffset($scope.currentval.end_date,$scope.currentval.eo),localStorage.setItem("selEventsData",JSON.stringify(e.event_data)),localStorage.setItem("selectedEventId",Number($scope.sponExhibInfo.event_code)))})),$scope.permission={Pin:"/showcase/app-pulse",Coupons:"/event/coupon","Validate Coupon":"/event/validate-coupon"},$scope.Logout=function(){GetDataService.Signout().then(function(e){1==e.result&&(localStorage.clear(),window.location=YaraBaseUrl.yara)})}}]),app.controller("ErrorMsgController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c){e.errMsgList=[],e.ds=e,e.AddErrorMsg=function(){e.keyval=0,angular.forEach(e.errMsgList,function(t,a){e.keyval=a}),++e.keyval>1&&o({method:"POST",url:a.url+"/ui_message/",data:{opp:"add",key:Number(e.keyval),value:e.msg}}).then(function(t){s(function(){e.getErrormsg()},1e3),e.showadd=!1,e.msg=""},function(e){e.status==-1||e.data})},e.UpdateErrorMsg=function(t){e.ds.errordis[t]=!0,o({method:"POST",url:a.url+"/ui_message/",data:{opp:"edit",key:Number(t),value:e.ds.error[t]}}).then(function(t){e.getErrormsg()},function(t){t.status!=-1&&null!=t.data||(e.errMsgList=[]),e.errMsgList=[]})},e.getErrormsg=function(){o({method:"GET",url:a.url+"/ui_message/"}).then(function(t){e.errMsgList=t.data.ui_messages},function(t){t.status!=-1&&null!=t.data||(e.errMsgList=[]),e.errMsgList=[]})},e.getErrormsg(),0==c.online&&alert("You are not connected to internet")}]),app.controller("timeZoneController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c){e.showTzlist=!1,e.getTimezones=function(){$("#loading").show(),l.getTimezone().then(function(t){1==t.result&&(e.timeZones=t.timezones,e.currentTimeZone=t.current_timezone,e.selectedTimeZone=t.current_timezone,e.is24Hours=t.is_time_format_24,e.fullName=t.user_full_name,$("#loading").hide(),$("#container").fadeIn())})},e.getTimezones(),e.showTimeZones=function(){e.showTzlist=!0},e.selectTimeZone=function(t){e.selectedTimeZone=t,e.showTzlist=!1},e.Pname="",e.middileNameMax=!1,e.lastNameMax=!1,e.firstNameMax=!1,e.saveTimeZone=function(){$("#loading").show(),o({method:"POST",url:a.url+"/timezone-list/",data:{current_timezone:e.selectedTimeZone,is_time_format_24:e.is24Hours}}).then(function(t){1==t.data.result?(window.location="/dashboard",$("#loading").hide(),$("#container").fadeIn()):(e.errorStatus=!0,e.msg=t.data.message,$("#loading").hide(),$("#container").fadeIn())},function(e){e.status==-1||e.data})},0==c.online&&alert("You are not connected to internet")}]),app.controller("eventLocationController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c){void 0!=localStorage.getItem("epData")&&""!=localStorage.getItem("epData")?(e.EPdata=localStorage.getItem("epData"),e.EPdata=angular.fromJson(e.EPdata).ep_code):window.location.replace("/packages");var d=angular.fromJson(localStorage.getItem("redirectionInfo"));if(e.db,e.hideLocation=!1,e.saveMap=function(){e.hideLocation=!0,e.noAddress=!1,e.addLine1="",e.addLine2="",e.city="",e.state="",e.country="",e.zipCode="",e.searchVal="",e.venue="";var t=angular.fromJson(localStorage.getItem("addressComp"));null!=localStorage.getItem("placeName")&&(e.venue=localStorage.getItem("placeName")),angular.forEach(t,function(a,o){"street_number"==t[o].types[0]?e.addLine1+=t[o].long_name+",":"route"==t[o].types[0]?e.addLine1+=t[o].long_name+",":"sublocality_level_2"==t[o].types[0]?e.addLine2+=t[o].long_name:"sublocality_level_1"==t[o].types[0]?e.addLine2=t[o].long_name+",":"locality"==t[o].types[0]?e.addLine2+=t[o].long_name:"administrative_area_level_2"==t[o].types[0]?e.city=t[o].long_name:"administrative_area_level_1"==t[o].types[0]?e.state=t[o].long_name:"country"==t[o].types[0]?(e.country=t[o].long_name,e.country_short_name=t[o].short_name):"postal_code"==t[o].types[0]&&(e.zipCode=t[o].long_name)}),localStorage.removeItem("addressComp"),localStorage.removeItem("placeName"),""!=e.addLine1&&""!=e.city&&""!=e.state&&""!=e.country&&""!=e.zipCode&&""!=e.venue||(e.noAddress=!0)},e.getDialCode=function(){o({method:"GET",url:"../dial_code_json"}).then(function(t){e.dailcode=t.data,console.log(e.dailcode)})},e.getDialCode(),e.manualLocation=function(){null!=d&&d.locPlace&&d.editlocPlace&&(d.editeventInfo=!0),localStorage.setItem("redirectionInfo",JSON.stringify(d)),window.location="/create-event-set-location-manually"},e.saveLocinfo=function(){var t={venu:e.venue,addLine1:e.addLine1,addLine2:e.addLine2,city:e.city,state:e.state,country:e.country,zipCode:e.zipCode,shortName:e.country_short_name,geoloc:{lat:localStorage.getItem("lat"),lng:localStorage.getItem("lng")}};localStorage.setItem("latandLong",JSON.stringify({lat:localStorage.getItem("lat"),lng:localStorage.getItem("lng")})),d.locPlace=!0,""==e.dailcode[e.country_short_name]?e.phdialreq=!1:e.phdialreq=!0,e.dailcode[e.country_short_name].indexOf("and")<0?e.phDailCode=e.dailcode[e.country_short_name]:e.phDailCode=e.dailcode[e.country_short_name].split("and")[0],""!=e.phDailCode&&e.phDailCode.indexOf("+")<0&&(e.phDailCode="+"+e.phDailCode);var a={phDailCode:e.phDailCode,phdialreq:e.phdialreq};localStorage.setItem("phonInfo",JSON.stringify(a)),localStorage.setItem("country",e.country),e.addtoIndexdb(t)},e.clearDb=function(){console.log("empty"),e.db.transaction(["locInfo"],"readwrite").objectStore("locInfo").clear().onsuccess=function(e){console.log("empty")}},e.addtoIndexdb=function(t){var a=window.indexedDB.open("yaraDB9.db",1);a.onsuccess=function(a){e.db=a.target.result,console.log("db created success"),console.log(a),e.addlocInfo(t)},a.onerror=function(e){console.log("error")},a.onupgradeneeded=function(t){console.log("new db"),e.db=t.target.result,e.db.createObjectStore("locInfo",{keyPath:"itemId"})}},null!=d&&d.locPlace&&!d.editlocPlace)window.location="/dashboard";else if(null!=d&&d.locPlace&&d.editlocPlace){e.hideLocation=!0,e.noAddress=!1,e.eventInformation=[],e.keyVal=[];var m=function(){e.timeInMs+=500,s(m,500)};s(m,500);var p=window.indexedDB.open("yaraDB9.db",1);p.onsuccess=function(t){e.db=t.target.result,console.log("db created success"),console.log(t),e.getAllinfo()},p.onerror=function(e){console.log("error")},p.onupgradeneeded=function(t){console.log("new db"),e.db=t.target.result,e.db.createObjectStore("locInfo",{keyPath:"itemId"})},e.getAllinfo=function(){console.log("calling index db");var t=e.db.transaction(["locInfo"],"readonly");t.objectStore("locInfo").openCursor().onsuccess=function(t){var a=t.target.result;a?(e.eventInformation.push(a.value),e.keyVal.push(a.key),a.continue()):console.log("no more results")},t.oncomplete=function(t){e.eventLoc=e.eventInformation[2].location,console.log(e.keyVal),e.displayInfo()}}}e.displayInfo=function(){console.log(e.eventLoc),e.addLine1=e.eventLoc.addLine1,e.addLine2=e.eventLoc.addLine2,e.city=e.eventLoc.city,e.state=e.eventLoc.state,e.country=e.eventLoc.country,e.zipCode=e.eventLoc.zipCode,e.venue=e.eventLoc.venu,e.country_short_name=e.eventLoc.shortName,localStorage.setItem("lat",e.eventLoc.geoloc.lat),localStorage.setItem("lng",e.eventLoc.geoloc.lng)},e.addlocInfo=function(t){null!=d&&d.locPlace&&d.editlocPlace&&(d.editeventInfo=!0),e.db.transaction(["locInfo"],"readwrite").objectStore("locInfo").put({itemId:"location",location:t}).onsuccess=function(e){localStorage.setItem("redirectionInfo",JSON.stringify(d)),window.location.href="/create-event-info"}},0==c.online&&alert("You are not connected to internet")}]),app.controller("EventTracksController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c){var d=angular.fromJson(localStorage.getItem("eventReadyRedirection"));void 0!=d&&1!=d.tracks||(window.location="/dashboard"),e.setOffset=function(e,t){return l.userOffsetTime(e,t)};var m=localStorage.getItem("selectedEventId");if(void 0===m||null===m)window.location="/events";else{var p=localStorage.getItem("selEventsData");e.currentval=angular.fromJson(p),e.trackName="",e.trackList=[],e.duplicates=[],e.duplicateTrack=!1}e.addTrackname=function(){e.validTrack=!1,e.invalidTrack=!1,e.invalidTracknum=!1;var t=/^track[1-9][0-9]*$/,a=/^track[^a-zA-Z0-9][0-9][0-9]*$/,o=e.trackName.toLowerCase();if("track"==e.trackName.toLowerCase()?(e.invalidTrack=!0,e.validTrack=!0):(t.test(o)||a.test(o))&&(console.log("invalid"),e.invalidTrack=!0,e.validTrack=!0),0==e.validTrack){var r={trackNme:e.trackName,dupe:!1};e.trackList.push(r),e.duplicates.push(!1),e.checkTrackname(),e.trackName=""}$("#text-focus").focus()},e.deleteTrack=function(t){e.trackList.splice(t,1),e.duplicates.splice(t,1),e.checkTrackname()},e.trackfocus=function(){s(function(){$("#text-focus").focus()},100)},e.checkTrackname=function(){e.duplicateTrack=!1;var t=[];angular.forEach(e.trackList,function(a,o){if(void 0!=e.trackList[o]){var r={track:e.trackList[o].trackNme,key:o};t.push(r),e.duplicates[o]=!1}}),t=t.sort(function(e,t){var a=e.track.toLowerCase(),o=t.track.toLowerCase();return a<o?-1:a>o?1:0});for(var a=t,o=0;o<t.length-1;o++)a[o+1].track.toLowerCase()==a[o].track.toLowerCase()&&(e.duplicates[a[o+1].key]=!0,e.duplicateTrack=!0)},e.tracknamecheck=function(t,a){e.trackvalue=!1;var o="invalidTrack"+t;e[o]=!1,e.tkname=a;var r=/^track[1-9][0-9]*$/,n=/^track[^a-zA-Z0-9][0-9][0-9]*$/,i=e.tkname.toLowerCase();"track"==e.tkname.toLowerCase()?(e[o]=!0,e.trackvalue=!0):(r.test(i)||n.test(i))&&(e[o]=!0,e.trackvalue=!0)},e.saveTrack=function(){$("#loading").show(),e.trackName.length>0&&e.addTrackname();var t=[];angular.forEach(e.trackList,function(a,o){""!=e.trackList[o].trackNme&&t.push(e.trackList[o].trackNme)}),0==e.duplicateTrack&&t.length>0?o({method:"POST",url:a.url+"/track/",data:{event_code:e.currentval.event_code,name:t,track_based:1}}).then(function(t){console.log(t),e.trackdata=t.data,1==e.trackdata.result?(d.tracks=!0,localStorage.setItem("eventReadyRedirection",JSON.stringify(d)),window.location="/event-setup-gatekeeper"):0==e.trackdata.result?($("#loading").hide(),$("#container").fadeIn(),e.trackdata.error=e.trackdata.message):e.trackdata.error=l.errorMsg[1]},function(t){e.trackdata={},$("#loading").hide(),$("#container").fadeIn(),(t.status==-1||null==t.data)&&0==c.online?e.trackdata.error=l.errorMsg[0]:e.trackdata.error=l.errorMsg[1]}):0==e.duplicateTrack&&0==t.length&&0==e.trackList.length?e.defaultTracks(0):e.trackList.length>0&&0==t.length&&($("#loading").hide(),$("#container").fadeIn())},e.defaultTracks=function(t){o({method:"POST",url:a.url+"/track/",data:{event_code:e.currentval.event_code,track_based:t}}).then(function(t){console.log(t),e.trackdata=t.data,1==e.trackdata.result?(d.tracks=!0,localStorage.setItem("eventReadyRedirection",angular.toJson(d)),window.location="/event-setup-gatekeeper"):0==e.trackdata.result?e.trackdata.error=e.trackdata.message:e.trackdata.error=l.errorMsg[1]},function(t){e.trackdata={},(t.status==-1||null==t.data)&&0==c.online?e.trackdata.error=l.errorMsg[0]:e.trackdata.error=l.errorMsg[1]})},0==c.online&&alert("You are not connected to internet")}]),app.controller("SessionEngageController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$document","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d){e.dashboardsUrl=i.dashboardUrl();var m=localStorage.getItem("selectedEventId");e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.locationHref=window.location.pathname,"Admin"==i.getPrivilege()?e.privilege=!0:e.privilege=!1,void 0!==m&&null!==m||window.location.replace("/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+"- Session Engage",localStorage.removeItem("sessId"),localStorage.removeItem("editSession"),e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.currentLocalTime=function(){i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(t){1==t.result&&(e.timeNow=t.local_time_now,e.localTimeNow=new Date)})},e.currentLocalTime(),e.checkTimeNow=function(t){var a=((new Date).getTime()-e.localTimeNow.getTime())/1e3;return a/=60,!(e.setOffset(e.timeNow,Math.abs(Math.round(a)))>e.setOffset(t,e.currentval.eo))};var p=e.setOffset(e.currentval.start_date,e.currentval.eo),u=e.setOffset(e.currentval.end_date,e.currentval.eo),g=r("date")(p,"yyyy-MM-dd"),f=r("date")(u,"yyyy-MM-dd");e.dayscount=t.dateDiffInDays(new Date(g),new Date(f)),e.dates=t.Dateslist(g,e.dayscount),e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),console.log(e.eventDaysInfo),e.seltab=e.eventDaysInfo[0].dayID,e.expday=e.eventDaysInfo[0].isDayActive,e.dbutton=e.eventDaysInfo.length-3,c(function(){$(".slider").length>0&&$(".slider").diyslider({width:"100%",height:"51px",minSlides:2,loop:!1,moveSlides:1})},100),e.setDayInfo=function(){angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.days[t]=e.eventDaysInfo[o])})})},e.setDayInfo(),e.dates={},e.dayscount=Object.keys(e.currentval.days).length;var v=t.Dateslist(g,e.dayscount);e.service=t,angular.forEach(v,function(t){e.dates[t]=e.currentval.days[t]}),e.sessionData=[],e.exScope=e,e.selecttab=function(t){console.log(t),e.seltab=t.dayID,e.expday=t.isDayActive},e.seslist="",e.listallSessions=function(){$("#loading").show();var t={bs:0,event_code:e.currentval.event_code};i.getallSessions(t).then(function(t){console.log(e.currentval.event_code),1==t.result&&(console.log(t),e.sessionList=t.sessions,e.eo=t.eo,$("#loading").hide(),$("#container").fadeIn())})},e.listallSessions(),e.sessionEngage=function(t,a,o,r){$("#loading").show(),e.sessionname=o,e.sessioncode=a,e.speaker_engage=r,e.satuschange(t,a,r)},e.filtersort=function(t){e.sorts=t},e.satuschange=function(t,r,n){e.speakerengage=1!=n,o({method:"POST",url:a.url+"/speaker_engage/",data:{event_code:e.currentval.event_code,session_code:r,speaker_engage:e.speakerengage,day_id:e.seltab}}).then(function(t){1==t.data.result&&e.listallSessions()},function(e){console.log(e)})},0==d.online&&alert("You are not connected to internet")}]),app.controller("EventCupponValidationCtrl",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$document","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c,d){var m=localStorage.getItem("selectedEventId");void 0!=m&&""!=m&&null!=m||(window.location="/showcase-dashboard"),e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.currentval=angular.fromJson(localStorage.getItem("selEventsData")),e.spPeople=e.currentval.sp_people;var p={group_tittle:"Delegates",id:10,single_entity_tittle:"Delegate"};e.spPeople.push(p),c(function(){$("#dcid").focus()},500),e.showdatas=!0,e.validateCoupon=function(){e.showerror=!1,$("#loading").show();var t={event_code:e.currentval.event_code,delegate_code:e.usercode};i.delegateCoupons(t).then(function(t){if(console.log(t),1==t.result){e.showdatas=!1,e.shockvalue=t,e.pass=t.user_data;for(var a=e.spPeople.length-1;a>=0;a--)e.spPeople[a].id==t.user_data.delegate_type&&(e.delegateType=e.spPeople[a].single_entity_tittle);$("#loading").hide(),$("#container").fadeIn()}else 0==t.result&&(e.showerror=!0,e.errmsg=t.message,$("#loading").hide(),$("#container").fadeIn())})},e.reedeemCoupon=function(t){o({method:"POST",url:a.url+"/coupon_zone/",data:{event_code:e.currentval.event_code,delegate_code:e.usercode,coupon_code:t}}).then(function(t){1==t.data.result&&e.validateCoupon()},function(e){console.log(e)})},e.Logout=function(){i.Signout().then(function(e){1==e.result&&(localStorage.clear(),window.location=a.yara)})}}]),app.filter("imagefilterQ2",function(){return function(e){var t=e;if(void 0!=e||null!=e){var a=e.split(".").pop();t=e.replace("."+a,"_Q2."+a)}return t}}),app.filter("imagefilterQ1",function(){return function(e){var t=e;if(void 0!=e||null!=e){var a=e.split(".").pop();t=e.replace("."+a,"_Q1."+a)}return t}}),app.controller("EventGeneralController",["$scope","fileReader","$timeout","$location","$filter","GetDataService","$http","YaraBaseUrl","APPService","$rootScope",function(e,t,a,o,r,n,i,l,s,c){function d(){e.Teventph=e.eventph,e.TeventEmail=e.eventemail,e.Teventweb=e.eventweb,e.Teventfb=e.eventfb,e.Teventtwitter=e.eventtwitter}e.dashboardsUrl=n.dashboardUrl();var m=localStorage.getItem("selectedEventId");e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,void 0===m||null===m?window.location="/events":(e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.pintopulse=e.currentval.kits["Pin To Pulse"],document.title="YARA - "+e.currentval.short_name+" - General",e.showMap=!1),e.setOffset=function(e,t){return n.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return n.startend(e,t,a)},"Admin"==n.getPrivilege(12)?e.privilege=!0:e.privilege=!1,e.key=l.captcha_key,e.service=s;var p=e.setOffset(e.currentval.start_date,e.currentval.eo),u=e.setOffset(e.currentval.end_date,e.currentval.eo),g=r("date")(p,"yyyy-MM-dd"),f=r("date")(u,"yyyy-MM-dd");e.dayscount=s.dateDiffInDays(new Date(g),new Date(f)),e.dates=s.Dateslist(g,e.dayscount),e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),e.setDayInfo=function(){angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.days[t]=e.eventDaysInfo[o])})})},e.setDayInfo(),e.checkSocials=function(){var t=0;"company-website"==e.social_type&&e.eventweb.length>7?t=1:"twitter"==e.social_type&&20!=e.eventtwitter.length?t=1:"facebook"==e.social_type&&25!=e.eventfb.length?t=1:"phone"==e.social_type&&void 0!=e.eventph&&0!=e.eventph.length?t=1:"message"==e.social_type&&void 0!=e.eventemail&&0!=e.eventemail.length&&(t=1);var a=n.getSocailId(e.social_type);1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.updateSocials=function(){for(var t=["company-website","twitter","facebook","phone","message"],a=0;a<t.length;a++){var o=0;"company-website"==t[a]&&e.eventweb.length>7?o=1:"twitter"==t[a]&&20!=e.eventtwitter.length?o=1:"facebook"==t[a]&&25!=e.eventfb.length?o=1:"phone"==t[a]&&void 0!=e.eventph&&0!=e.eventph.length?o=1:"message"==t[a]&&void 0!=e.eventemail&&0!=e.eventemail.length&&(o=1);var r=n.getSocailId(t[a]);1==o?$("."+r).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+r).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")}},e.saveSocials=function(){e.eventph=e.Teventph,e.eventweb=e.Teventweb,e.eventfb=e.Teventfb,e.eventtwitter=e.Teventtwitter,e.eventemail=e.TeventEmail,e.checkSocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange=""}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(d(),e.checkSocials())}),window.onbeforeunload=function(t){if(e.infoUpdate||e.contactUpdate){var a="Do you want to discard changes?";return void 0===t&&(t=window.event),t&&(t.returnValue=a),a}},e.infoUpdate=!1,e.changeInfo=function(){e.infoUpdate=!1,e.currentval.short_name!=e.evtshrtname&&(e.infoUpdate=!0),e.currentval.description!=e.evtdesc&&(e.infoUpdate=!0),e.currentval.agenda_image!=e.imageSrc1&&(e.infoUpdate=!0),e.currentval.event_logo!=e.cmpyimageSrc&&(e.infoUpdate=!0)},e.$watchCollection("[evtshrtname,evtdesc,imageSrc1,cmpyimageSrc]",function(){e.changeInfo()}),e.contactUpdate=!1,e.changeContact=function(){e.contactUpdate=!1,e.currentval.phone_number!=e.phDailCode+" "+e.eventph&&(e.contactUpdate=!0),e.currentval.website!=e.eventweb&&(e.contactUpdate=!0),e.currentval.facebook!=e.eventfb&&(e.contactUpdate=!0),e.currentval.twitter!=e.eventtwitter&&(e.contactUpdate=!0),e.currentval.email!=e.eventemail&&(e.contactUpdate=!0)},e.$watchCollection("[phDailCode,eventph,eventweb,eventfb,eventtwitter,eventemail]",function(){e.changeContact()}),e.cmpyimageSrc=e.currentval.event_logo,e.imageSrc1=e.currentval.agenda_image,e.searchloc={latitude:e.currentval.latitude,longitude:e.currentval.longitude},e.evtname=e.currentval.name,e.evtshrtname=e.currentval.short_name,e.evtcatg=e.currentval.event_type,e.evtsubcatg=e.currentval.event_sub_type,e.evtdesc=e.currentval.description;var v=r("date")(e.currentval.start_date);e.evntstartdate=e.setOffset(v,e.currentval.eo),e.evntenddate=e.setOffset(r("date")(e.currentval.end_date),e.currentval.eo),e.dayscount=Object.keys(e.currentval.days).length;s.Dateslist(e.currentval.start_date,e.dayscount);e.venu=e.currentval.venue,e.addrline1=e.currentval.address_line1,e.addrline2=e.currentval.address_line2,e.addrline2="undefined"==e.addrline2?"":e.addrline2,e.venucity=e.currentval.city,e.venustate=e.currentval.state,e.venucountry=e.currentval.country,e.venupincode=e.currentval.zip,e.isEventPrvt=e.currentval.is_private;var h=e.currentval.phone_number;h=h.split(" "),e.phDailCode=h[0],e.eventph=h[1],e.phdialreq=!0,h[0].length>8&&(e.phDailCode="",e.eventph=h[0],e.phdialreq=!1),e.eventemail=e.currentval.email,e.eventweb=e.currentval.website,e.eventfb=e.currentval.facebook,
e.eventtwitter=e.currentval.twitter,d(),e.updateSocials(),e.dates=[],angular.forEach(e.datelisting,function(t){angular.forEach(t,function(t,a){e.dates.push(a)})}),e.changeInfo(),e.changeContact(),e.typechange="",e.errorscroll=function(){!e.infoForm.$invalid||""!=e.evtdesc&&void 0!=e.evtdesc&&null!=e.evtdesc?e.infoForm.$valid&&""==e.cmpyimageSrc&&a(function(){s.scrollJquery("logo_error")},100):a(function(){s.scrollJquery("eventdesc")},100)},e.removedAgendaImanage,e.$watch("imageSrc1",function(t,a){""==e.imageSrc1&&(e.removedAgendaImanage=1)},!0),e.updateinfo=function(t){$("#loading").show(),e.typechange=t,""==e.imageSrc1&&(e.imageSrc1=e.currentval.agenda_image);var a=new FormData;if(a.append("opp","edit"),a.append("event_code",e.currentval.event_code),"info"==t){a.append("short_name",e.evtshrtname),a.append("description",e.evtdesc),a.append("website",e.currentval.website),a.append("facebook",e.currentval.facebook),a.append("twitter",e.currentval.twitter),a.append("email",e.currentval.email),a.append("phone_number",e.currentval.phone_number);var o=!1;angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){a.append("event_logo",e.file),o=!0});var r=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;0==r?(a.append("event_logo",""),a.append("new_event_logo",0)):a.append("new_event_logo",1);var s=!1;angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){a.append("agenda_image",e.file),s=!0}),r=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length,0==r&&(a.append("agenda_image",""),1==e.removedAgendaImanage?a.append("new_agenda_image",1):a.append("new_agenda_image",0)),(0==e.removedAgendaImanage||r>0)&&a.append("new_agenda_image",1)}else a.append("short_name",e.currentval.short_name),a.append("description",e.currentval.description),a.append("phone_number",e.phDailCode+" "+e.eventph),a.append("website",e.eventweb),a.append("facebook",e.eventfb),a.append("twitter",e.eventtwitter),a.append("email",e.eventemail);e.data={},i({method:"POST",url:l.url+"/event_edit/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(a){e.data=a.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=n.errorMsg[1]):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message):1==e.data.result&&(e.errormsg=!0,e.data.error=e.data.message,n.getEvent(m).then(function(a){1==a.result&&(e.eventsdata=a.events,e.currentval=e.eventsdata[0],localStorage.setItem("selEventsData",angular.toJson(e.currentval)),"info"==t?(e.currentval.short_name=e.evtshrtname,e.currentval.description=e.evtdesc,e.cmpyimageSrc=e.currentval.event_logo,e.imageSrc1=e.currentval.agenda_image,e.changeInfo()):(e.currentval.phone_number=e.phDailCode+" "+e.eventph,e.currentval.website=e.eventweb,e.currentval.facebook=e.eventfb,e.currentval.twitter=e.eventtwitter,e.currentval.email=e.eventemail,e.changeContact()),$("#loading").hide(),$("#container").fadeIn())}))},function(t){e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1]})},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=n.dataURItoBlob(t);"cmpylogo"==e.cropType?(e.cmpyimageSrc=t,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})):"coverimg"==e.cropType&&(e.imageSrc1=t,angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"cmpylogo"==e.cropType?(e.cmpyimageSrc=e.currentval.event_logo,angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})):"coverimg"==e.cropType&&(e.imageSrc1=e.currentval.agenda_image,angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.cmpylogo.allowedExtensions(["png","jpg","jpeg"]),e.coverimg.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(o,r){e.lodinghide=!1;var i=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;i>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(o,r){r!=i-1?o.setType(4):o.file.size>5242880?(e.infoForm.cmpylogo.$setValidity("minsizeval",!1),o.setType(4),e.cmpyimageSrc=e.currentval.event_logo):(e.infoForm.cmpylogo.$setValidity("minsizeval",!0),t.readAsDataUrl(o.file,e).then(function(t){n.getImgDimensions(t,function(r,n){r>=1024&&n>=1024?(e.infoForm.cmpylogo.$setValidity("minDimension",!0),1024==r&&1024==n?e.cmpyimageSrc=t:(e.cropType="cmpylogo",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:t}}),$(".image-editor").cropit("imageSrc",t),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"),a(function(){e.lodinghide=!0},2e3))):(e.infoForm.cmpylogo.$setValidity("minDimension",!1),o.setType(4),e.cmpyimageSrc=e.currentval.event_logo),e.$apply()})}))}),(i=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length)>0&&angular.forEach(e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID),function(o,r){r!=i-1?o.setType(4):o.file.size>5242880?(e.infoForm.coverimg.$setValidity("minsizeval",!1),o.setType(4),e.imageSrc1=e.currentval.agenda_image):(e.infoForm.coverimg.$setValidity("minsizeval",!0),t.readAsDataUrl(o.file,e).then(function(t){n.getImgDimensions(t,function(r,n){r>=1024&&n>=1024?(e.infoForm.coverimg.$setValidity("minDimension",!0),1024==r&&1024==n?e.imageSrc1=t:(e.cropType="coverimg",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:t}}),$(".image-editor").cropit("imageSrc",t),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"),a(function(){e.lodinghide=!0},2e3))):(e.infoForm.coverimg.$setValidity("minDimension",!1),o.setType(4),e.imageSrc1=e.currentval.agenda_image),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){var t=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;t<=0&&(e.cmpyimageSrc=e.currentval.event_logo),(t=e.coverimg.getFiles(e.coverimg.FILE_TYPES.VALID).length)<=0&&(e.imageSrc1=e.currentval.agenda_image)}),e.$on("$dropletError",function(){}),e.getRefund=function(){e.refundAvilabile=!1,i({method:"POST",url:l.url+"/event_cancel_refund/",data:{event_code:e.currentval.event_code}}).then(function(t){e.data1=t.data,null==e.data1.result||void 0==e.data1.result?(e.errormsg1=!0,e.data1.error=n.errorMsg[1]):0==e.data1.result?(e.errormsg1=!0,e.data1.error=e.data1.message):1==e.data1.result&&(a(function(){$("#reason_id").focus()},1e3),0!==e.data1.refund&&(e.refundAvilabile=!0),e.errormsg1=!0,e.data1.error=e.data1.message,e.evtcls=!0)},function(t){e.data1={},e.errormsg1=!0,t.status==-1||null==t.data?e.data1.error=n.errorMsg[0]:e.data1.error=n.errorMsg[1]})},e.reasonLength=function(t){e.enableCancel=!1,console.log(e.enableCancel),(void 0==t||null==t||""==t||t.trim().length<=10)&&(e.enableCancel=!0)},e.errscroll=function(){e.showerr=!0,a(function(){1==e.enableCancel&&s.scrollJquery("reason_id")},100)},e.DelEvent=function(){$("#loading").show(),i({method:"POST",url:l.url+"/event_edit/",data:{event_code:e.currentval.event_code,reason:e.reason,opp:"cancel"}}).then(function(t){e.data2=t.data,null==e.data2.result||void 0==e.data2.result?(e.errormsg2=!0,e.data2.error=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()):0==e.data2.result?(e.errormsg2=!0,e.data2.error=e.data2.message,$("#loading").hide(),$("#container").fadeIn()):1==e.data2.result&&(e.errormsg2=!0,e.data2.error=e.data2.message,localStorage.removeItem("selEventsData",""),localStorage.removeItem("selectedEventId",""),window.location="/events")},function(t){e.data2={},e.errormsg2=!0,t.status==-1||null==t.data?(e.data2.error=n.errorMsg[0],0==c.online?e.data2.error=n.errorMsg[0]:e.data2.error=n.errorMsg[1]):e.data2.error=n.errorMsg[1]})},e.onchange=function(){e.step1="location"},0==c.online&&alert("You are not connected to internet")}]),app.controller("EventDecipherCtrl",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$document","$timeout","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c,d,m){var p=parseInt(localStorage.getItem("selecteddecEventId"));console.log(p),e.decifier=function(){i.getDecipherEventsDash().then(function(t){if(1==t.result)for(var a=0;a<t.events.length;a++)t.events[a].event_code==p&&(e.dechipertotdata=t.events[a],e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)},e.currentval=e.dechipertotdata)})},e.decifier(),document.title="YARA - DeCipher-Events",i.getDechiperdashboard(p).then(function(t){if(1==t.result){$("#loading").hide(),e.dechiper=t.decipher_data;for(var a=0;a<e.dechiper.gatekeeper.length;a++){var o=e.dechiper.gatekeeper[a].checkin_data;!function(e,t){c(function(){console.log(t);var a=document.createElement("div"),o=-(~~$("html").css("padding-left").replace("px","")+~~$("body").css("margin-left").replace("px",""));a.className="ex-tooltip",document.body.appendChild(a);var r={yScale:"linear",xScale:"time",main:[{data:t}]},n={dataFormatX:function(e){return d3.time.format("%H:%M").parse(e)},tickFormatX:function(e){return d3.time.format("%I:%M")(e)},mouseover:function(e,t){var r=$(this).offset();$(a).text(d3.time.format("%I:%M")(e.x)+": "+e.y).css({top:-2+r.top,left:r.left+o}).show()},mouseout:function(e){$(a).hide()}},i="#example"+e;new xChart("line-dotted",r,i,n)},1e3)}(a,o)}}}),c(function(){$(".progressbars-decipher").jprogress(),$(".progressbarsone").jprogress({background:"#FF2D55"})},1e3),e.filterdname=function(t){e.dyanme=t,m()}}]),app.controller("ManageLocationController",["$scope","YaraBaseUrl","$http","$location","GetDataService","$rootScope","$timeout","$anchorScroll",function(e,t,a,o,r,n,i,l){e.dashboardsUrl=r.dashboardUrl(),e.headerTitle="Location";var s=localStorage.getItem("selectedEventId");void 0!==s&&null!==s||(window.location="/events"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Location",e.setOffset=function(t){return r.userOffsetTime(t,e.currentval.eo)},e.eventLocations=function(){$("#loading").show(),r.getEventlocations(e.currentval.event_code).then(function(t){if(1==t.result){var a=t.data;e.evtLoc=[];for(var o=0;o<a.length;o++){var r=a[o].sponsors+a[o].exhibitions+a[o].sessions,n=a[o];n.total=r,e.evtLoc.push(n)}console.log(e.evtLoc),$("#loading").hide(),$("#container").fadeIn()}else 0==t.result&&(e.evtLoc=[],e.showerror=t.message,$("#loading").hide(),$("#container").fadeIn())})},e.eventLocations(),e.selectRenameLoc=function(t,a){e.locations=[],e.locDupe=!1,e.errormsg=!1,angular.forEach(e.evtLoc,function(a,o){e.evtLoc[o].location_code!=t.location_code&&e.locations.push(e.evtLoc[o])}),e.locInfo=t,e.locationName=t.location},e.addedLocation=function(){e.locationName="",e.locDupe=!1,e.errormsg=!1},e.renameLocation=function(){e.locDupe=e.checkDuplicateLocations(e.locations,e.locationName),e.locDupe||($("#loading").show(),a({method:"POST",url:t.url+"/event_location/rename/",data:{location_code:e.locInfo.location_code,location_name:e.locationName,event_code:e.currentval.event_code}}).then(function(t){console.log(t.data),1==t.data.result?($("#location-title").modal("hide"),$("#loading").hide(),$("#container").fadeIn(),e.eventLocations()):0==t.data.result&&(e.errormsg=!0,e.showerror=t.data.message,$("#loading").hide(),$("#container").fadeIn())},function(t){$("#loading").hide(),$("#container").fadeIn(),e.data={},e.errormsg=!0,(t.status==-1||null==t.data)&&0==n.online?e.showerror=r.errorMsg[0]:e.showerror=r.errorMsg[1]}))},e.sorting_list=function(t){e.sort=0==t?"location":"-total",l()},e.saveLoc=function(){e.locDupe=e.checkDuplicateLocations(e.evtLoc,e.addlocation),e.locDupe||($("#loading").show(),a({method:"POST",url:t.url+"/event_location/",data:{event_code:e.currentval.event_code,location_name:e.addlocation}}).then(function(t){1==t.data.result?(e.addlocation="",$("#location-title-add").modal("hide"),$("#loading").hide(),$("#container").fadeIn(),e.eventLocations(),l()):0==t.data.result&&(e.errormsg=!0,e.showerror=t.data.message,$("#loading").hide(),$("#container").fadeIn())},function(t){$("#loading").hide(),$("#container").fadeIn(),e.data={},console.log(t),e.errormsg=!0,(t.status==-1||null==t.data)&&0==n.online?e.showerror=r.errorMsg[0]:e.showerror=r.errorMsg[1]}))},e.isValidLoc=!1,e.locValidation=function(t){e.req=!1,e.isValidLoc=!1,e.isValidLoc=r.validateLocation(t),console.log(e.isValidLoc)},e.selectRevokeLoc=function(t){e.locInfo=t,e.locationName=t.location},e.revokeLocation=function(){console.log(e.locationName),a({method:"POST",url:t.url+"/event_location/revoke/",data:{location_code:e.locInfo.location_code}}).then(function(t){console.log(t.data),1==t.data.result?(e.eventLocations(),$("#myModal-location").modal("hide")):0==t.data.result&&(e.errormsg=!0,e.showerror=t.data.message)},function(t){e.data={},console.log(t),e.errormsg=!0,(t.status==-1||null==t.data)&&0==n.online?e.showerror=r.errorMsg[0]:e.showerror=r.errorMsg[1]})},e.duplicates=[],e.checkDuplicateLocations=function(e,t){for(var a=!1,o=e.length-1;o>=0;o--)if(e[o].location.toLowerCase()==t.toLowerCase()){a=!0;break}return a},$("#location-title-add").on("show.bs.modal",function(e){setTimeout(function(){$("#managelocation").focus()},1e3)}),$("#location-title").on("show.bs.modal",function(e){setTimeout(function(){$("#manage_location").focus()},1e3)}),0==n.online&&alert("You are not connected to internet")}]),app.controller("EventsDechiperController",["$scope","APPService","YaraBaseUrl","$http","$location","$filter","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l){e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,"Admin"==i.getPrivilege(3)?e.privilege=!0:e.privilege=!1,e.eventsdata=[],e.shownav=!0,document.title="YARA - Events",e.errorstatus=!1,i.getDecipherEvents().then(function(t){1==t.result?(e.eventsdata=t.events,e.setOffset=function(e,t){return i.userOffsetTime(e,t)},console.log(e.eventsdata),$("#loading").hide()):e.errorstatus=!0}),e.deciph=function(t){localStorage.setItem("selecteddecEventId",t);for(var a=0;a<e.eventsdata.length;a++)e.eventsdata[a].event_code==t&&(localStorage.setItem("selEventsData",angular.toJson(e.eventsdata[a])),window.location="/decipher-event")};var s="";e.getdata=function(e){return s=angular.fromJson(JSON.parse(e.replace(/'/g,'"')))},e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)},0==l.online&&alert("You are not connected to internet")}]),app.controller("CollabratorPeopleController",["$scope","fileReader","$location","$http","YaraBaseUrl","GetDataService","$filter","APPService","$timeout","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c,d){e.dashUrl=n.dashboardUrl(),e.deleTypeinfo={id:10,group_tittle:"Delegates",single_entity_tittle:"Delegate"},e.f_sort=1,e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1,e.setOffset=function(e,t){if(void 0!=e)return n.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return n.startend(e,t,a)},e.isFocusDemo=!0;var m=localStorage.getItem("selectedEventId");if(void 0===m||null===m)window.location="/collaborator-dashboard";else{e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata);var p=e.setOffset(e.currentval.start_date,e.currentval.eo),u=e.setOffset(e.currentval.end_date,e.currentval.eo),g=i("date")(p,"yyyy-MM-dd"),f=i("date")(u,"yyyy-MM-dd");if(e.betdays=function(){var t=new Date(g),a=new Date(f),o=e.getDates(t,a);e.dates=o},e.getDates=function(e,t){for(var a=[],o=new Date(e);o<=t;)a.push(i("date")(new Date(o),"yyyy-MM-dd")),o.setDate(o.getDate()+1);return a},e.betdays(),e.convertingPeoplelist=[],e.delegateDetails=e.currentval.sp_people[0],e.specPeople=[],angular.forEach(e.currentval.sp_people,function(t,a){10!=e.currentval.sp_people[a].id&&(e.specPeople.push(e.currentval.sp_people[a]),e.convertingPeoplelist.push(e.currentval.sp_people[a]))}),"/collaborator/people"==window.location.pathname){var v={delegate:!1,speaker:!1,bulk:!1};localStorage.setItem("redirectionInfo",angular.toJson(v)),localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("editSpInfo"),localStorage.removeItem("spEdit")}var h=angular.fromJson(localStorage.getItem("redirectionInfo"));"/collaborator/add-special-delegate"==window.location.pathname?0!=h.speaker&&null!=h.speaker||(window.location="/collaborator-dashboard"):"/collaborator/add-delegate"==window.location.pathname?0!=h.delegate&&null!=h.delegate||(window.location="/collaborator-dashboard"):"/collaborator/upload-bulk-list"==window.location.pathname&&(0!=h.bulk&&null!=h.bulk||(window.location="/collaborator-dashboard")),e.diffDays=e.currentval.date_diff,null!==localStorage.getItem("sort")?e.f_sort=localStorage.getItem("sort"):e.f_sort=1,e.currentLogin=angular.fromJson(localStorage.getItem("Logininfo"))}e.setTitle=function(t){document.title="YARA - "+e.currentval.short_name+" - "+t},"Admin"==n.getPrivilege()?e.privilege=!0:e.privilege=!1;var g=i("date")(e.currentval.start_date,"yyyy-MM-dd"),f=i("date")(e.currentval.end_date,"yyyy-MM-dd");e.headerTitle="People",e.checkScocials=function(){var t=0;"company-website"==e.social_type&&7!=e.cmpyweb.length?t=1:"twitter"==e.social_type&&20!=e.cmpytwitter.length?t=1:"facebook"==e.social_type&&25!=e.cmpyfb.length?t=1:"linkedin"==e.social_type&&25!=e.cmpylink.length?t=1:"pinterest"==e.social_type&&26!=e.cmpypinterest.length?t=1:"tumblr"==e.social_type&&0!=e.cmpytumblr.length?t=1:"git-hub"==e.social_type&&19!=e.cmpygithub.length?t=1:"instagram"==e.social_type&&26!=e.cmpyinstagram.length&&(t=1);var a=n.getSocailId(e.social_type);1==t?$("."+a).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+a).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")},e.checkScocialDisabled=function(){var t=0;"company-website"==e.social_type&&e.Tcmpyweb.length>=7?t=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.Tcmpyweb)?1:7==e.Tcmpyweb.length?1:0:"twitter"==e.social_type&&e.Tcmpytwitter.length>=20?t=1:"facebook"==e.social_type&&e.Tcmpyfb.length>=25?t=1:"linkedin"==e.social_type&&e.Tcmpylink.length>=25?t=1:"pinterest"==e.social_type&&e.Tcmpypinterest.length>=26?t=1:"tumblr"==e.social_type&&e.Tcmpytumblr.length>=0?t=1:"git-hub"==e.social_type&&e.Tcmpygithub.length>=19?t=1:"instagram"==e.social_type&&e.Tcmpyinstagram.length>=26&&(t=1),e.isSocialSave=1==t},e.$watchCollection("[Tcmpyweb,Tcmpytwitter,Tcmpyfb,Tcmpylink,Tcmpypinterest,Tcmpytumblr,Tcmpygithub,Tcmpyinstagram]",function(t){e.checkScocialDisabled()}),setTimeout(function(){e.cmpytumblr=e.Tcmpytumblr,e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram},1e3),e.saveSocials=function(){e.typeofchange="save",e.cmpyweb=e.Tcmpyweb,e.cmpyfb=e.Tcmpyfb,e.cmpytwitter=e.Tcmpytwitter,e.cmpylink=e.Tcmpylink,e.cmpypinterest=e.Tcmpypinterest,e.cmpytumblr=e.Tcmpytumblr,e.cmpygithub=e.Tcmpygithub,e.cmpyinstagram=e.Tcmpyinstagram,e.checkScocials(),$("#myModal-social").modal("hide")},$("#myModal-social").on("show.bs.modal",function(t){e.typeofchange="",setTimeout(function(){$("#"+e.social_type+"_id").focus();var t=$("#"+e.social_type+"_id").val().length;$("#"+e.social_type+"_id")[0].setSelectionRange(t,t)},1e3)}),$("#myModal-social").on("hidden.bs.modal",function(t){"save"!=e.typeofchange&&(e.Tcmpyweb=e.cmpyweb,e.Tcmpyfb=e.cmpyfb,e.Tcmpytwitter=e.cmpytwitter,e.Tcmpylink=e.cmpylink,e.Tcmpypinterest=e.cmpypinterest,e.Tcmpytumblr=e.cmpytumblr,e.Tcmpygithub=e.cmpygithub,e.Tcmpyinstagram=e.cmpyinstagram)});var y=angular.fromJson(localStorage.getItem("delegateIdinfo"));e.ListPeoples=[],e.EndList=!1,void 0!=y?(e.f_user=y.id,e.f_username=y.single_entity_tittle):(e.f_user=10,e.f_username="Delegate"),e.params={offset:0,limit:0,type:e.f_user,initialize_ticket:1,event_code:e.currentval.event_code,s:e.f_sort},e.tickets=function(){if(e.delegateStep="step1",e.UpStep="step1",e.ticketsdata.length>1&&(e.delegateStep="step1",e.UpStep="step1"),e.ticketval="",void 0!=angular.fromJson(localStorage.getItem("ticketTabinfo"))){var t=angular.fromJson(localStorage.getItem("ticketTabinfo"));e.ticktselected=t.ticketCode,e.seltab=t.ticketCode,e.ticketinValid=t.ticketinValid}else e.ticktselected=e.ticketsdata[0].ticket_code,e.seltab=e.ticketsdata[0].ticket_code,e.ticketinValid=e.ticketsdata[0].is_validity_over;e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.getAllpeople(),e.ticket_name=e.ticketsdata[0].name;var a=sessionStorage.getItem("TicketSelected");void 0!=a&&(e.ticktselected=a,sessionStorage.removeItem("TicketSelected")),e.dbutton=e.ticketsdata.length-3,s(function(){$(".slider").length>0&&$(".slider").diyslider({width:"100%",height:"51px",minSlides:2,loop:!1,moveSlides:1})},100);var o=angular.fromJson(localStorage.getItem("ticketTabinfo"));if(void 0!=angular.fromJson(localStorage.getItem("ticketTabinfo"))&&null!=angular.fromJson(localStorage.getItem("ticketTabinfo"))){e.freshtab=!0;for(var r=0;r<e.ticketsdata.length;r++)e.ticketsdata[r].ticket_code==o.ticketCode&&(e.seltab=o.ticketCode,e.tottab=r,e.freshtab=!1,e.ticketinValid=o.ticketinValid)}e.freshtab&&(e.seltab=e.ticketsdata[0].ticket_code),s(function(){if(e.ddbt=e.tottab+1,e.ddbt>3){e.forl=e.ddbt-3;for(var t=0;t<e.forl;t++)$(".slider").diyslider("move","forth"),e.dbutton--}},100)},e.$watch("searchPeople",function(t,a){void 0!=t&&null!=t&&t.length>0?(e.searchParam={},e.searchParam.q=t,e.searchParam.event_code=e.currentval.event_code,e.searchParam.ticket_code=e.seltab,e.searchParam.on=e.f_user,e.searchParam.limit=50,e.searchParam.offset=0,e.searchParam.day_id=null,e.searchParam.s=e.f_sort,e.ListPeoples=[],e.reachEnd=!1,e.searchCall=!0,e.getSearchPeople()):void 0!=t&&""!=t&&null!=t||void 0==a||(e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.searchCall=!1,e.getAllpeople())},!0),e.getSearchPeople=function(){0==e.reachEnd&&void 0!=e.searchParam&&(e.blockScroll=!0,n.getPeoplesearchInfo(e.searchParam).then(function(t){if(1==t.result&&(e.blockScroll=!1,e.ListPeoples=e.ListPeoples.concat(t.search_data),e.searchCall=!1,e.reachEnd=t.end,0==t.end)){var a=e.ListPeoples.length;e.searchParam.offset=a,e.searchParam.limit=a+50}}))},e.removeSearch=function(){e.searchPeople="",e.searchCall=!1},e.getAllpeople=function(){$("#loading").hide(),0==e.EndList&&(e.blockScroll=!0,n.getPeopleInfo(e.params).then(function(t){1==t.result&&(e.blockScroll=!1,e.ListPeoples=e.ListPeoples.concat(t.delegates),e.EndList=t.end,1==e.params.initialize_ticket&&(e.ticketsdata=t.tickets,e.tickets()),e.delegateDetails=e.deleTypeinfo,void 0!=t.event_package_info.number_of_attendee&&(e.number_of_attendee_added=t.event_package_info.number_of_attendee_added,e.number_of_attendee=t.event_package_info.number_of_attendee))}))},"event/add-special-delegate"!=window.location.pathname&&e.getAllpeople(),e.allTickets=function(){e.ticketsdata=[],$("#loading").show(),n.getTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,$("#loading").hide(),$("#container").fadeIn())})},e.avilabileTickets=function(){n.getAvilabileTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.updatedTicketsdata=t.tickets)})},e.sortingOption=function(t){d(),localStorage.setItem("sort",t),e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,e.reachEnd=!1,e.f_sort=t,e.params.s=t,e.ListPeoples=[],void 0!=e.searchPeople||null!=e.searchPeople?e.getSearchPeople():e.getAllpeople()},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=n.dataURItoBlob(t);"SpkPic"==e.cropType&&(e.imageSrc1=t,angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"SpkPic"==e.cropType&&(e.imageSrc1="",angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){void 0!=e.sharefiles&&e.sharefiles.allowedExtensions(["xlsx","xls","csv","txt"]),void 0!=e.SpkPic&&e.SpkPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(a,o){if(e.cropPic="",void 0!=e.sharefiles){var r=e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID).length;r>0&&angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(e,t){t<r-1?e.setType(4):e.file.size>52428800&&e.setType(4)})}void 0!=e.SpkPic&&(r=e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID).length)>0&&angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(a,o){o!=r-1?a.setType(4):a.file.size>5242880?(e.speakerForm.SpkPic.$setValidity("minsizeval",!1),a.setType(4),e.imageSrc1=""):(e.speakerForm.SpkPic.$setValidity("minsizeval",!0),t.readAsDataUrl(a.file,e).then(function(t){n.getImgDimensions(t,function(o,r){o>=512&&r>=512?(e.speakerForm.SpkPic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc1=t:(e.cropPic="profile",e.cropType="SpkPic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:t}}),$(".image-editor").cropit("imageSrc",t),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.05),$("#crop-image").modal("show"))):(e.speakerForm.SpkPic.$setValidity("minDimension",!1),a.setType(4),e.imageSrc1=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){void 0!=e.SpkPic&&(len=e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID).length,len<=0&&(e.imageSrc1=""))}),e.$on("$dropletError",function(){}),e.searchScrollCall=!1,e.selecttab=function(t){e.seltab=t.ticket_code,e.ticketinValid=t.is_validity_over;var a={ticketCode:e.seltab,ticketinValid:e.ticketinValid};localStorage.setItem("ticketTabinfo",angular.toJson(a)),e.ListFrom=0,e.ListTo=10,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=t.ticket_code,e.params.initialize_ticket=0,e.params.limit=50,e.params.offset=0,e.getAllpeople()},e.ticketDays=function(t,a){var o="",r="",n="",l="";return e.ds.food={},e.ds.acc={},e.ds.msg={},angular.forEach(a,function(t,a){var s=new Date(t.day);s=i("date")(s,"yyyy-MM-dd"),pos=e.dates.indexOf(s)+1,l+="Day "+pos+", ",t.food_coupon&&(o+="Day "+pos+", "),t.messaging&&(n+="Day "+pos+", "),t.tracks.length>0&&(r+="Day "+pos+", ")}),e.ds.food[t]=o.slice(0,-2),e.ds.acc[t]=r.slice(0,-2),e.ds.msg[t]=n.slice(0,-2),l.slice(0,-2)},e.ds=e,e.ticktselected="",e.changetselect=function(t){var a={ticketCode:t.ticket_code,ticketinValid:t.is_validity_over};localStorage.setItem("ticketTabinfo",angular.toJson(a)),e.ticket_name=t.name,e.ticktselected=t.ticket_code,e.ticketinValid=t.is_validity_over},e.isExists_user=0,e.fliterPeopleList=function(t){localStorage.setItem("delegateIdinfo",angular.toJson(t)),e.f_user=t.id,e.f_username=t.single_entity_tittle,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople()},e.preSelectTicket=function(e,t,a){var o=angular.fromJson(localStorage.getItem("redirectionInfo"));if(null==o)var o={delegate:!1,speaker:!1,bulk:!1};"add-delegate"==t?(o.delegate=!0,localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("delegateIdinfo",angular.toJson(a))):"add-special-delegate"==t?(o.speaker=!0,localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("delegateIdinfo",angular.toJson(a))):"upload-bulk-list"==t&&(o.bulk=!0,localStorage.setItem("redirectionInfo",angular.toJson(o)),localStorage.setItem("delegateIdinfo",angular.toJson(a))),localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),sessionStorage.setItem("TicketSelected",e),window.location=t},e.addMoreItems=function(){e.EndList||void 0!=e.searchPeople&&0!=e.searchPeople.length?e.getSearchPeople():(e.params.ticket_code=e.seltab,e.params.offset=e.params.limit,e.params.limit=e.params.limit+50,e.params.type=e.f_user,e.getAllpeople())},e.blockCreation=!1,e.userData=null,e.checkEmail=function(t){var a=(localStorage.getItem("convertSp"),localStorage.getItem("editSpInfo"),localStorage.getItem("spEdit"));"true"!=a&&(console.log("reach inside"),e.isExists_user=0,e.blockCreation=!1,e.spname="",e.imageSrc1="",e.spkdesg="",e.spkcmpy="",e.spkabt="",e.Tcmpyweb="",e.Tcmpyfb="",e.Tcmpytwitter="",e.Tcmpylink="",e.Tcmpypinterest="",e.Tcmpytumblr="",e.Tcmpygithub="",e.Tcmpyinstagram="",s(function(){e.checkScocialDisabled(),e.saveSocials(),e.updateSocials()},1e3),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)&&"true"!=a&&($("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/sp_delegate_validate/",data:{email:t,event_code:e.currentval.event_code}}).then(function(t){e.direct=1,1==t.data.result?(d(),e.mailInfo=t.data,e.userData=t.data.user_data,void 0!=e.userData?(e.spname=e.userData.full_name,e.spkdesg=e.userData.designation,e.spkcmpy=e.userData.company_name,e.imageSrc1=e.userData.profile_picture,window.setTimeout(function(){$("textarea").height($("textarea")[0].scrollHeight)},500),void 0!=e.userData.socials&&e.userData.socials.length>0&&(angular.forEach(e.userData.socials,function(t){"Website"==t.social_provider?e.Tcmpyweb=t.link:"Tumblr"==t.social_provider?e.Tcmpytumblr=t.link:"Twitter"==t.social_provider?e.Tcmpytwitter=t.link:"LinkedIn"==t.social_provider?e.Tcmpylink=t.link:"Facebook"==t.social_provider?e.Tcmpyfb=t.link:"Pinterest"==t.social_provider?e.Tcmpypinterest=t.link:"GitHub"==t.social_provider?e.Tcmpygithub=t.link:"Instagram"==t.social_provider&&(e.Tcmpyinstagram=t.link)}),s(function(){e.checkScocialDisabled(),e.saveSocials(),e.updateSocials()},1e3))):e.userData=null,$("#loading").hide(),$("#container").fadeIn()):0==t.data.result&&(e.spname="",e.imageSrc1="",e.Tcmpyweb="",e.Tcmpyfb="",e.Tcmpytwitter="",e.Tcmpylink="",e.Tcmpypinterest="",e.Tcmpytumblr="",e.Tcmpygithub="",e.Tcmpyinstagram="",e.spkdesg="",e.spkcmpy="",e.spkabt="",s(function(){e.checkScocialDisabled(),e.saveSocials(),e.updateSocials()},1e3),e.errorMsg=t.data.message,e.blockCreation=!0,$("#loading").hide(),$("#container").fadeIn())},function(t){(t.status==-1||null==t.data)&&0==c.online?e.showerror=n.errorMsg[0]:e.showerror=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})))},e.manageTicket=function(){localStorage.setItem("redirectPpl",1),window.location="/collaborator/ticket"},e.existsData={},e.checkDuplicates=function(){for(var t,a=!0,o=0;o<e.ds.emailDel.length;o++)if(""!=e.ds.emailDel[o]){var r=i("filter")(e.ds.emailDel,e.ds.emailDel[o]).length;if(r>1){a=!1,t=e.ds.emailDel.indexOf(e.ds.emailDel[o],o+1);break}}return void 0!=t&&null!=t&&l.scrollJquery("email_"+t),a},e.delegateCheck=function(t,a){$("#loading").show(),e.ds.exError[t].status=!1;var i=[a];o({method:"POST",url:r.url+"/delegate/",data:{emails:i,ticket_code:e.ticktselected}}).then(function(a){$("#loading").hide(),$("#container").fadeIn();var o=a.data;if(1==o.result)if(o.invited_emails.length>0)e.ds.exError[t].status=!0,e.ds.exError[t].msg=2;else if(o.non_account_emails.length>0)"/collaborator/upload-bulk-list"==window.location.pathname?(e.ds.eLists.splice(t,1),
e.ds.eLists.splice(t,0,o.non_account_emails[0])):(e.foundDelegate.non_account_emails.splice(t,1,o.non_account_emails[0]),e.ds.eListDis[t]=!0);else if(o.delegate_account_emails.length>0)if("/collaborator/upload-bulk-list"==window.location.pathname)e.ds.eListDis[t]=!0,e.account.push(o.delegate_account_emails[0]),e.deleteDelegate(t),e.ds.eListDis[t]=!0;else{var r=e.ds.eListDis;e.ds.eListDis=[],angular.forEach(r,function(a,o){o!=t&&e.ds.eListDis.push(a)}),e.foundDelegate.delegate_account_emails.push(o.delegate_account_emails[0]),e.foundDelegate.non_account_emails.splice(t,1),e.ds.eList.splice(t,1)}else o.conflict_invited_emails.length>0&&(e.ds.exError[t].status=!0,e.ds.exError[t].msg=3);else 0==o.result?(e.ds.exError[t].status=!0,e.ds.exError[t].msg=4,e.errorMsg=e.existsData.message):(e.ds.exError[t].status=!0,e.ds.exError[t].msg=1)},function(a){e.ds.exError[t].status=!0,(a.status==-1||null==a.data)&&0==c.online?e.ds.exError[t].msg=n.errorMsg[0]:e.ds.exError[t].msg=n.errorMsg[1]})},e.delegateAdd=function(){e.addDelgData={},e.foundDelegate={},e.delegateAddemails=[],angular.forEach(e.ds.emailDel,function(t,a){1==e.validateMail(t)&&e.delegateAddemails.push(t)}),o({method:"POST",url:r.url+"/delegate/",data:{emails:e.delegateAddemails,ticket_code:e.ticktselected}}).then(function(t){if(1==t.data.result){e.foundDelegate=t.data,e.userOffset=t.data.uo;e.foundDelegate.total_emails_len>1?(e.ds.eList=[],e.ds.eListDis=[],e.ds.eListDeleted=[],e.delegateStep="step3"):(e.invitedAppuserActive=!0,e.invitedAppuser=[],e.invitedUser=[],e.checkoutAppuserActive=!0,e.checkoutAppuser=[],e.checkoutUser=[],e.delegateStep="step4",e.foundDelegate.invited_emails.length>0&&(e.foundDelegate.invited_emails[0].account_email?(e.invitedAppuser=e.foundDelegate.invited_emails,e.invitedAppuserActive=!1):e.invitedUser=e.foundDelegate.invited_emails),e.foundDelegate.delegate_account_emails.length>0?e.foundDelegate.delegate_account_emails[0].account_email&&(e.checkoutAppuser=e.foundDelegate.delegate_account_emails[0],e.checkoutAppuserActive=!1):e.foundDelegate.non_account_emails.length>0&&(console.log(e.foundDelegate.non_account_emails),e.checkoutUser=e.foundDelegate.non_account_emails))}else 0==e.existsData.result?e.existsData.error=e.existsData.message:e.existsData.error=n.errorMsg[1]},function(t){e.existsData={},(t.status==-1||null==t.data)&&0==c.online?e.existsData.error=n.errorMsg[0]:e.existsData.error=n.errorMsg[1]}),d()},e.validateMail=function(e){return!!/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(e)},e.addSingleDelegate=function(t){var a=[];$("#loading").show(),a.push(t),o({method:"POST",url:r.url+"/delegate/add/",data:{emails:a,ticket_code:e.ticktselected,validate:!0}}).then(function(t){e.addDelgData=t.data,1==e.addDelgData.result?window.location="people":0==e.addDelgData.result?e.addDelgData.error=e.addDelgData.message:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()},function(t){e.addDelgData={},(t.status==-1||null==t.data)&&0==c.online?e.addDelgData.error=n.errorMsg[0]:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()})},e.addDelgData={},e.delegateCreateFrom=function(){var t=[],a=[];$("#loading").show(),a=a.concat(e.ds.eList),void 0!=e.foundDelegate.delegate_account_emails&&e.foundDelegate.delegate_account_emails.length>0&&(angular.forEach(e.foundDelegate.delegate_account_emails,function(e){t.push(e.email)}),a=a.concat(t)),o({method:"POST",url:r.url+"/delegate/add/",data:{emails:a,ticket_code:e.ticktselected,validate:!0}}).then(function(t){e.addDelgData=t.data,1==e.addDelgData.result?window.location="people":0==e.addDelgData.result?e.addDelgData.error=e.addDelgData.message:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()},function(t){e.addDelgData={},t.status==-1||null==t.data?e.addDelgData.error=n.errorMsg[0]:e.addDelgData.error=n.errorMsg[1],$("#loading").hide()})},e.countEmails=function(){var t=0;return t+=e.foundDelegate.other_account_emails.length,t+=e.foundDelegate.delegate_account_emails.length,t+=e.foundDelegate.non_account_emails.length,t+=e.foundDelegate.non_account_emails.length,t+=e.foundDelegate.conflict_invited_emails.length},e.DelCheck=function(){var t=[],a=[],o=[],r=[];void 0!=e.account&&(angular.forEach(e.ds.eListboxD,function(a,o){a||t.push(e.account[o])}),angular.forEach(t,function(e){a.push(!1)}),e.ds.eListboxD=a,e.account=t),angular.forEach(e.ds.eListbox,function(t,a){t||o.push(e.ds.eList[a])}),angular.forEach(o,function(e){r.push(!1)}),e.ds.eListbox=r,e.ds.eList=o,e.ds.eLists=o},e.deleteDelegate=function(t){e.ds.eListDeleted[t]=!0},e.DelDelegate=function(t){var a=[];angular.forEach(e.ds.eListbox,function(e,o){o!=t&&a.push(e)}),e.ds.eListbox=a,e.ds.eList.splice(t,1),e.ds.eLists.splice(t,1)},e.DelDelegateList=function(t){var a=[];angular.forEach(e.ds.eListboxD,function(e,o){o!=t&&a.push(e)}),e.ds.eListboxD=a,e.account.splice(t,1)},e.allselCheck=function(){if(e.selAllList){var t=e.number_of_attendee-e.number_of_attendee_added,a=t;void 0!=e.account&&(a=Math.abs(t-e.account.length),angular.forEach(e.ds.eListboxD,function(a,o){e.ds.eListboxD[o]=o<t})),angular.forEach(e.ds.eListbox,function(t,o){e.ds.eListbox[o]=o<a})}else void 0!=e.account&&angular.forEach(e.ds.eListboxD,function(t,a){e.ds.eListboxD[a]=!1}),angular.forEach(e.ds.eListbox,function(t,a){e.ds.eListbox[a]=!1})},e.changeCheck=function(t){var a=e.number_of_attendee-e.number_of_attendee_added,o=e.ds.eList.length,r=i("FilterBoolObj")(e.ds.eListbox,!0).length;if(void 0!=e.account&&(o+=e.account.length,r+=i("FilterBoolObj")(e.ds.eListboxD,!0).length),a>o)e.selAllList=r==o;else{var n=Math.abs(a-o);e.selAllList=r==n}},e.delegateBulkFrom=function(){var t=[],a=[];angular.forEach(e.account,function(a,o){void 0!=e.account[o].email&&1==e.ds.eListboxD[o]&&t.push(e.account[o].email)}),angular.forEach(e.ds.eLists,function(t,o){1==e.ds.eListbox[o]&&0==e.ds.eListDeleted[o]&&a.push(e.ds.eLists[o])});var i={delegate_account_emails:t,non_account_emails:a};o({method:"POST",url:r.url+"/invite/",data:{event_code:e.currentval.event_code,ticket_code:e.ticktselected,emails:i}}).then(function(t){e.addDelgData=t.data,1==e.addDelgData.result?$("#successMsg").modal("show"):0==e.addDelgData.result?e.addDelgData.error=e.addDelgData.message:e.addDelgData.error=n.errorMsg[1]},function(t){e.addDelgData={},(t.status==-1||null==t.data)&&0==c.online?e.addDelgData.error=n.errorMsg[0]:e.addDelgData.error=n.errorMsg[1]})},e.InboxFocus=function(e){setTimeout(function(){$("#"+e).focus()},500)},e.ChecklistUpdate=function(){e.UpStep="step4"},e.selType="",e.selUpdateUser="",e.changeType=function(t,a){e.selUpdateUser=a,e.isExists_user=0,"create"==t?(e.spname="",e.SPKemail="",e.spkabt="",e.SpkPic="",e.SPKweb="",e.SPKfb="",e.SPKtwitter="",e.SPKlin="",e.ticketval="",e.spkdesg="",e.spkcmpy="",e.btntxt="ADD"):"update"==t&&(e.prtSPVal="ADDSP",e.btntxt="UPDATE",angular.forEach(e.SpkData,function(t){t.username==a&&(e.spname=(t.first_name+" "+t.middle_name+" "+t.last_name).trim(),e.SPKemail=t.contact_email,e.spkabt=t.description,e.SpkPic="",e.imageSrc1=t.profile_picture,e.SPKweb=t.website,e.SPKfb=t.facebook,e.SPKtwitter=t.twitter,e.SPKlin=t.linkedin,e.spkdesg=t.designation,e.spkcmpy=t.company_name,angular.forEach(e.ticketsdata,function(a){a.name==t.ticket_name&&(e.ticketval=a.ticket_code+"")}))}))},e.addSpeaker=function(t){void 0==e.cmpytumblr&&(e.cmpytumblr=""),$("#loading").show(),e.notConnectedNet=!1;navigator.onLine;"/collaborator/add-special-delegate"==window.location.pathname&&localStorage.getItem("convertSp")&&(1==e.convSpeakerInfo.using_yara?(e.isExists_user=1,e.SPKemail=e.convSpeakerInfo.email):e.isExists_user=0),"/collaborator/add-special-delegate"==window.location.pathname&&localStorage.getItem("spEdit")&&(1==e.editSpInfo.using_yara?(e.isExists_user=1,e.SPKemail=e.editSpInfo.email):e.isExists_user=0),e.errormsg=!1;var a=new FormData;a.append("event_code",e.currentval.event_code),a.append("delegate_name",e.spname),a.append("contact_email",e.SPKemail),a.append("description",e.spkabt),angular.forEach(e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID),function(e,t){a.append("profile_picture",e.file)});var i=e.SpkPic.getFiles(e.SpkPic.FILE_TYPES.VALID).length;(null!=e.imageSrc1||void 0!=e.imageSrc1)&&i>0?(a.append("profile_picture",e.imageSrc1),a.append("new_picture",1)):0==i&&(a.append("profile_picture",""),a.append("new_picture",0));var l=[{social_provider:"Website",link:e.cmpyweb},{social_provider:"Twitter",link:e.cmpytwitter},{social_provider:"Facebook",link:e.cmpyfb},{social_provider:"LinkedIn",link:e.cmpylink},{social_provider:"Pinterest",link:e.cmpypinterest},{social_provider:"Tumblr",link:e.cmpytumblr},{social_provider:"GitHub",link:e.cmpygithub},{social_provider:"Instagram",link:e.cmpyinstagram}];if(a.append("social_providers",angular.toJson(l)),a.append("user_exists",e.isExists_user),a.append("ticket_code",e.ticktselected),a.append("designation",e.spkdesg),a.append("company_name",e.spkcmpy),a.append("delegate_type",e.delegateIdinfo.id),a.append("direct",e.direct),null!=e.userData){if(null!=e.userData.person_code&&null==e.userData.yara_user_code)var s={profile_picture:e.userData.profile_picture,person_code:e.userData.person_code};else if(null==e.userData.person_code&&null!=e.userData.yara_user_code)var s={profile_picture:e.userData.profile_picture,yara_user_code:e.userData.yara_user_code};else if(null!=e.userData.person_code&&null!=e.userData.yara_user_code)var s={profile_picture:e.userData.profile_picture,person_code:e.userData.person_code,yara_user_code:e.userData.yara_user_code};a.append("user_data",angular.toJson(s))}else a.append("user_data",e.userData);if("create"==e.selType)e.isExists_user,o({method:"POST",url:r.url+"/sp-delegate/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){if(e.cdata=t.data,e.data={},1==e.cdata.result){var a=sessionStorage.getItem("redirect");void 0!=a&&""!=a&&"done"!=a?(sessionStorage.setItem("redirect","done"),window.location=a):(e.prtSPVal="SPList",window.location="people")}else 0==e.cdata.result?(e.errormsg=!0,e.data.error=e.cdata.message,$("#loading").hide(),$("#container").fadeIn()):($("#loading").hide(),$("#container").fadeIn(),e.errormsg=!0,e.data.error=n.errorMsg[1])},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1],$("#loading").hide()});else if("update"==e.selType){""!=e.SkpPic&&i>0?a.append("new_picture",1):(null!=e.imageSrc1||e.imageSrc1,a.append("new_picture",0));var d=JSON.parse(localStorage.getItem("editSpInfo"));a.append("opp","edit"),a.append("sp_delegate_code",d.sp_delegate_code),a.append("sp_delegate_name",e.spname),o({method:"POST",url:r.url+"/sp-delegate-edit/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.udata=t.data,1==e.udata.result?window.location="people":0==e.udata.result?(e.errormsg=!0,e.data.error=e.cdata.message,$("#loading").hide(),$("#container").fadeIn()):(e.errormsg=!0,e.data.error=n.errorMsg[1],$("#loading").hide(),$("#container").fadeIn())})}},e.enableDisablepop=function(t,a,i){console.log(t),console.log(a),"dis"==i?(e.enaDisInfo={head:"Disable",otherInfo:t,disable:!0,type:"sp"},$("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/validate_delegate_disable/",data:{event_code:e.currentval.event_code,person_code:a}}).then(function(t){e.response=t,console.log(e.response),1==e.response.data.result?($("#people-delete").modal("show"),$("#loading").hide(),$("#container").fadeIn()):0==e.response.data.result?($("#loading").hide(),$("#container").fadeIn(),e.disableConflictInfo=e.response.data,$("#disable-sp-conflict").modal("show")):(e.errormsg=!0,e.errmsg=n.errorMsg[1]),$("#loading").hide(),$("#container").fadeIn()},function(t){e.errormsg=!0,(t.status==-1||null==t.data)&&0==c.online?e.errmsg=n.errorMsg[0]:e.errmsg=n.errorMsg[1]})):(e.enaDisInfo={head:"Enable",otherInfo:t,disable:!1,type:"sp"},$("#people-delete").modal("show"))},e.enableDisableSpeaker=function(t){t.disable?($("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/disable/",data:{event_code:e.currentval.event_code,person_code:t.otherInfo.person_code,delegate_type:e.f_user}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide"),$("#disable-sp-conflict").modal("hide")),$("#loading").hide(),$("#container").fadeIn()})):($("#loading").show(),o({method:"POST",url:r.url+"/sp-delegate/enable/",data:{event_code:e.currentval.event_code,person_code:t.otherInfo.person_code,delegate_type:e.f_user}}).then(function(t){e.data=t.data,1==e.data.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide")),$("#loading").hide()}))},e.resendMail=function(t){e.errormsg=!1,e.errmsg="",e.userInfo=t,$("#people-invite").modal("show")},e.sendMail=function(t){$("#loading").show(),o({method:"POST",url:r.url+"/resend_invitation/",data:{event_code:e.currentval.event_code,email:t}}).then(function(t){e.response=t.data,e.data={},1==e.response.result?(e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-invite").modal("hide")):0==e.response.result?($("#loading").hide(),e.errormsg=!0,e.errmsg=e.response.message):(e.errormsg=!0,e.errmsg=n.errorMsg[1]),$("#loading").hide()},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1]})},e.selectedType=function(t){e.selectedval=t.id;for(var a=0;a<e.convertingPeoplelist.length&&t.id!=e.convertingPeoplelist[a].id;a++);localStorage.setItem("delegateIdinfo",angular.toJson(t))},e.changeTicket=function(t){e.selectedval="",$("#loading").show(),n.getAvilabileTickets({event_code:e.currentval.event_code,email:t.email}).then(function(a){1==a.result&&(e.updatedTicketsdata=a.tickets,e.seleDelInfo=t,e.changingTickets=[],e.seleDelInfo=t,e.aviTicketInfo=a,angular.forEach(e.updatedTicketsdata,function(t,a){e.updatedTicketsdata[a].ticket_code!=e.seltab&&e.changingTickets.push(e.updatedTicketsdata[a])}),$("#loading").hide(),$("#container").fadeIn(),$("#change-ticket").modal("show"))})},e.selectedTicketType=function(t){e.selectedval=t.ticket_code;for(var a=0;a<e.changingTickets.length&&t.ticket_code!=e.changingTickets[a].ticket_code;a++);},e.ticketChange=function(t){$("#loading").show(),o({method:"POST",url:r.url+"/user_ticket/",data:{email:e.seleDelInfo.email,ticket_code:t}}).then(function(t){e.response=t.data,e.data={},1==e.response.result?(e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#change-ticket").modal("hide")):0==e.response.result?($("#loading").hide(),e.errormsg=!0,e.errmsg=e.response.message):(e.errormsg=!0,e.errmsg=n.errorMsg[1]),$("#loading").hide()},function(t){e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.data.error=n.errorMsg[0]:e.data.error=n.errorMsg[1]})},e.redirectToPeople=function(){window.location="/collaborator/people"},e.deleagteConvertion=function(){window.location="/collaborator/add-special-delegate"},e.editSP=function(e){localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("editSpInfo"),localStorage.removeItem("spEdit"),localStorage.setItem("editSpInfo",angular.toJson(e)),localStorage.setItem("spEdit",!0);var t=angular.fromJson(localStorage.getItem("redirectionInfo"));if(null==t)var t={delegate:!1,speaker:!1,bulk:!1};t.speaker=!0,localStorage.setItem("redirectionInfo",angular.toJson(t)),window.location="/collaborator/add-special-delegate"},e.delToSpeaker=function(t){e.selectedval="",localStorage.removeItem("delegateTosp"),localStorage.removeItem("convertSp"),localStorage.removeItem("editSpInfo"),localStorage.removeItem("spEdit"),localStorage.setItem("delegateTosp",angular.toJson(t)),localStorage.setItem("convertSp",!0);var a=angular.fromJson(localStorage.getItem("redirectionInfo"));if(null==a)var a={delegate:!1,speaker:!1,bulk:!1};a.speaker=!0,localStorage.setItem("redirectionInfo",angular.toJson(a))},e.convtoSpeaker=function(){e.direct=0,e.ticketsdata=[],e.convSpeakerInfo=angular.fromJson(localStorage.getItem("delegateTosp")),console.log(e.convSpeakerInfo),n.getAvilabileTickets({event_code:e.currentval.event_code,email:e.convSpeakerInfo.email}).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,1==e.convSpeakerInfo.using_yara?(e.SPKemail=e.convSpeakerInfo.invited_email,e.spname=e.convSpeakerInfo.full_name,e.spkdesg=e.convSpeakerInfo.designation,e.spkcmpy=e.convSpeakerInfo.company_name,e.imageSrc1=e.convSpeakerInfo.profile_picture,e.disableName=!1):(e.SPKemail=e.convSpeakerInfo.invited_email,e.disableName=!1,e.checkEmail(e.SPKemail)))})},e.errorScroll=function(){0!=e.speakerForm.$invalid||e.imageSrc1||0!=e.wordlength?e.wordlength&&s(function(){l.scrollJquery("fullname")},100):s(function(){l.scrollJquery("spimage")},100)},e.editSpecialDelegate=function(){e.direct=0,$("#loading").show(),e.ticketsdata=[],e.editSpInfo=angular.fromJson(localStorage.getItem("editSpInfo")),void 0!=e.editSpInfo&&n.getAvilabileTickets({event_code:e.currentval.event_code,email:e.editSpInfo.email}).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,e.SPKemail=e.editSpInfo.invited_email,e.spname=e.editSpInfo.full_name,e.spkdesg=e.editSpInfo.designation,e.spkcmpy=e.editSpInfo.company_name,e.spkabt=e.editSpInfo.description,e.imageSrc1=e.editSpInfo.profile_picture,e.disableName=!1,window.setTimeout(function(){$("textarea").height($("textarea")[0].scrollHeight)},500),null!=e.editSpInfo.sp_social_providers&&(angular.forEach(e.editSpInfo.sp_social_providers,function(t){"Website"==t.social_provider?e.Tcmpyweb=t.link:"Tumblr"==t.social_provider?e.Tcmpytumblr=t.link:"Twitter"==t.social_provider?e.Tcmpytwitter=t.link:"LinkedIn"==t.social_provider?e.Tcmpylink=t.link:"Facebook"==t.social_provider?e.Tcmpyfb=t.link:"Pinterest"==t.social_provider?e.Tcmpypinterest=t.link:"GitHub"==t.social_provider?e.Tcmpygithub=t.link:"Instagram"==t.social_provider&&(e.Tcmpyinstagram=t.link)}),s(function(){e.checkScocialDisabled()},1e3)),$("#loading").hide(),$("#container").fadeIn())})},e.disableMail=!1,"/collaborator/add-special-delegate"==window.location.pathname&&localStorage.getItem("spEdit")?(e.disableMail=localStorage.getItem("spEdit"),e.delegateIdinfo=angular.fromJson(localStorage.getItem("delegateIdinfo")),e.selType="update",e.editSpecialDelegate()):"/collaborator/add-special-delegate"==window.location.pathname&&localStorage.getItem("convertSp")?(e.disableMail=localStorage.getItem("convertSp"),e.delegateIdinfo=angular.fromJson(localStorage.getItem("delegateIdinfo")),e.selType="create",e.convtoSpeaker()):"/collaborator/add-special-delegate"==window.location.pathname&&(e.selType="create",e.delegateIdinfo=angular.fromJson(localStorage.getItem("delegateIdinfo")),e.ticketsdata=[],e.allTickets()),e.getEmails=function(t){e.percent="25%",$("div.progressbars-decipher.progress_bulk_upload.progress_single").animate({width:e.percent},2e3,function(){$("div.progressbars-decipher.progress_bulk_upload.progress_single").children("span").css("opacity","1")}),$("#progress-loader").show(),e.ds.eLists=[],e.ds.eList=[],e.EmailList=[],e.EmailDuplicates=[],e.EmailInvited=[];var a=new FormData;angular.forEach(e.sharefiles.getFiles(e.sharefiles.FILE_TYPES.VALID),function(t,o){a.append("email_file",t.file),e.currentfile=t.file.name}),a.append("ticket_code",e.ticktselected),e.errormsg1=!1,o({method:"POST",url:r.url+"/invite/",data:a,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,1==t.data.result?(e.account=t.data.emails.delegate_account_emails,e.EmailList=t.data.emails.non_account_emails,e.conflictInvitedEmails=t.data.emails.conflict_invited_emails,e.ds.eLists=t.data.emails.non_account_emails,e.EmailInvited=t.data.emails.invited_emails,e.totalCount=t.data.emails.delegate_account_emails_len+t.data.emails.non_account_emails_len,e.percent="25%",$("div.progressbars-decipher.progress_bulk_upload.progress_single").animate({width:"100%"},2e3,function(){e.percent="100%",e.$apply(),$("div.progressbars-decipher.progress_bulk_upload.progress_single").children("span").css("opacity","1"),s(function(){e.UpStep="step3",e.$apply(),$("#progress-loader").hide()},800)})):0==t.data.result?($("#progress-loader").hide(),e.errormsg1=!0,e.errorMsg=t.data.message):(e.errormsg1=!0,e.errorMsg=n.errorMsg[1],$("#progress-loader").hide()),$("#loading").fadeOut(function(){$("body").css("overflow","auto")})},function(t){$("#progress-loader").hide(),e.data={},e.errormsg1=!0,(t.status==-1||null==t.data)&&0==c.online?e.errorMsg=n.errorMsg[0]:e.errorMsg=n.errorMsg[1],$("#loading").fadeOut(function(){$("body").css("overflow","auto")})})},e.enaDisablePop=function(t,a){console.log(t),e.enaDisInfo="dis"==a?{head:"Disable",otherInfo:t,disable:!0,type:"del"}:{head:"Enable",otherInfo:t,disable:!1,type:"del"},$("#people-delete").modal("show")},e.disEnable=function(t){t.disable?($("#loading").show(),o({method:"POST",url:r.url+"/delegate/disable/",data:{event_code:e.currentval.event_code,email:t.otherInfo.invited_email}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide")),$("#loading").hide()})):($("#loading").show(),o({method:"POST",url:r.url+"/delegate/enable/",data:{event_code:e.currentval.event_code,email:t.otherInfo.invited_email}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&(e.searchPeople="",e.searching=!1,e.ListPeoples=[],e.EndList=!1,e.params.ticket_code=e.seltab,e.params.initialize_ticket=0,e.params.offset=0,e.params.limit=50,e.params.type=e.f_user,0==e.params.offset&&e.getAllpeople(),$("#people-delete").modal("hide")),$("#loading").hide()}))},e.reditoPeople=function(){window.location="/collaborator/people"},e.topUpPackage=function(){window.location="/topup"},0==c.online&&alert("You are not connected to internet"),e.updateSocials=function(){for(var t=["company-website","twitter","facebook","linkedin","pinterest","tumblr","git-hub","instagram"],a=0;a<t.length;a++){var o=0;"company-website"==t[a]&&e.cmpyweb.length>8?o=1:"twitter"==t[a]&&e.cmpytwitter.length>20?o=1:"facebook"==t[a]&&e.cmpyfb.length>25?o=1:"linkedin"==t[a]&&e.cmpylink.length>25?o=1:"pinterest"==t[a]&&e.cmpypinterest.length>26?o=1:"tumblr"==t[a]&&e.cmpytumblr.length>0?o=1:"git-hub"==t[a]&&e.cmpygithub.length>19?o=1:"instagram"==t[a]&&e.cmpyinstagram.length>26&&(o=1);var r=n.getSocailId(t[a]);1==o?$("."+r).removeClass("bootstrap-font-icon-gray").addClass("bootstrap-font-icon-black"):$("."+r).removeClass("bootstrap-font-icon-black").addClass("bootstrap-font-icon-gray")}},"/collaborator/add-special-delegate"==window.location.pathname&&null!=localStorage.getItem("editSpInfo")&&s(function(){e.updateSocials()},1e3)}]),app.controller("CollaboratorGatekeeperController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$rootScope","$anchorScroll","$timeout",function(e,t,a,o,r,n,i,l,s,c,d){e.dashboardsUrl=i.dashboardUrl(),"Admin"==i.getPrivilege(5)?e.privilege=!0:e.privilege=!1,e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1;var m=localStorage.getItem("selectedEventId");void 0!==m&&null!==m||(window.location="/collaborator-dashboard"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.selectedPermission=angular.fromJson(localStorage.getItem("selectedPermission")),e.peopleMange=!1;for(var p=e.selectedPermission.length-1;p>=0;p--)if("People"==e.selectedPermission[p].name){e.peopleMange=!0;break}e.setTitle=function(t){document.title="YARA - "+e.currentval.short_name+" - "+t},e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)};var u=e.setOffset(e.currentval.start_date,e.currentval.eo),g=e.setOffset(e.currentval.end_date,e.currentval.eo),f=r("date")(u,"yyyy-MM-dd"),v=r("date")(g,"yyyy-MM-dd");e.dayscount=t.dateDiffInDays(new Date(f),new Date(v)),e.dates=t.Dateslist(f,e.dayscount),e.selectedval=[],e.s=t,e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),e.preCheckinTime=function(){angular.forEach(e.pre_checkin_data,function(t,a){e.seltab==e.pre_checkin_data[a].day_id&&(e.gatePassHour=e.pre_checkin_data[a].pre_checkin_time,e.checkinStarted=e.pre_checkin_data[a].checkin_started)})},e.gatekeeperInfo=function(){i.gatekeeperInfo(e.currentval.event_code).then(function(t){1==t.result&&(e.img=t.gate_pass_logo,e.pre_checkin_data=t.pre_checkin_data,e.preCheckinTime(),$("#loading").hide(),$("#container").fadeIn())})},e.gatekeeperInfo(),e.logoChange=function(){e.imageSrc=e.img},e.setDayName=function(){angular.forEach(e.dates,function(t){angular.forEach(e.eventDaysInfo,function(a,o){t==e.eventDaysInfo[o].date&&(e.days[t]=e.eventDaysInfo[o])})})},e.setDayName();var h=localStorage.getItem("gatetab");e.tabsid=!1;for(var p=0;p<e.eventDaysInfo.length;p++)e.eventDaysInfo[p].dayID==h&&(e.seltab=h,e.gettb=h,e.isDayActive=e.eventDaysInfo[p].isDayActive,e.tabsid=!0,e.movebutton=p,e.day_title=e.eventDaysInfo[p].dayTitle);0==e.tabsid&&(e.seltab=e.eventDaysInfo[0].dayID,e.isDayActive=e.eventDaysInfo[0].isDayActive,e.gettb=e.eventDaysInfo[0].dayID,e.day_title=e.eventDaysInfo[0].dayTitle),d(function(){if(e.ddbt=e.movebutton+1,e.ddbt>3){e.forl=e.ddbt-3;for(var t=0;t<e.forl;t++)$(".slider").diyslider("move","forth"),e.dbutton--}},100),e.gatecodedownlode=function(){i.getgatekeepercode(e.currentval.event_code).then(function(t){1==t.result&&(e.gatecodeDownload=t)})},e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},e.inc=0,e.gatecodedownlode=function(){i.getgatekeepercode(e.currentval.event_code).then(function(t){1==t.result&&(e.gatecodeDownload=t,$("#gatepass-download").modal("show"))})},e.selecttab=function(t){e.day_title=t.dayTitle,e.EndList=!1,localStorage.setItem("gatetab",t.dayID),e.seltab=t.dayID,e.preCheckinTime(),e.isDayActive=t.isDayActive,e.gatekeeperList=[],e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},0==e.params.offset&&e.gatekeeperPeopleinformation()},e.gatekeeperList=[],e.EndList=!1,e.blockScroll=!1,e.searchCall=!1,e.gatekeeperPeopleinformation=function(){0==e.EndList&&0==e.searchCall&&0==e.blockScroll&&(e.blockScroll=!0,e.searchCall=!1,i.gatekeeperPeopleinfo(e.params).then(function(t){1==t.result&&(e.gatekeeperList=e.gatekeeperList.concat(t.gate_keeper_data),e.EndList=t.end,e.blockScroll=!1,e.totalAppUsers=t.event_users,e.checkInUsers=t.checked_in_user,e.notCheckInUsers=t.not_checked_in_user)}))},e.gatekeeperPeopleinformation(),e.paginationGk=function(){void 0!=e.searchPeople&&e.searchPeople.length>0&&!e.EndList&&void 0!=e.params?e.getSearchPeople():e.EndList||void 0==e.params||(e.params.day_id=e.seltab,e.params.offset=e.params.limit,e.params.limit=e.params.limit+50,e.gatekeeperPeopleinformation())},e.creategatepass=function(){localStorage.setItem("creategatepass",!0)},e.$watch("searchPeople",function(t,a){void 0!=t&&null!=t&&t.length>0?(e.searchParam={},e.searchParam.q=e.searchPeople,e.searchParam.event_code=e.currentval.event_code,e.searchParam.ticket_code="",e.searchParam.on=null,e.searchParam.limit=50,e.searchParam.offset=0,e.searchParam.day_id=e.seltab,e.gatekeeperList=[],e.reachEnd=!1,e.searchCall=!0,e.getSearchPeople()):void 0!=t&&""!=t&&null!=t||void 0==a||(e.EndList=!1,e.gatekeeperList=[],e.searchCall=!1,e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},e.gatekeeperPeopleinformation())},!0),e.getSearchPeople=function(){0==e.reachEnd&&void 0!=e.searchParam&&0==e.blockScroll&&(e.blockScroll=!0,e.searchCall=!0,i.getPeoplesearchInfo(e.searchParam).then(function(t){if(1==t.result&&(e.gatekeeperList=e.gatekeeperList.concat(t.search_data),e.blockScroll=!1,e.searchCall=!1,e.reachEnd=t.end,0==t.end)){var a=e.gatekeeperList.length;e.searchParam.offset=a,e.searchParam.limit=a+50}}))},e.checkIn=function(t){$("#loading").show(),o({method:"POST",url:a.url+"/checkin/",data:{yara_user_code:t.yara_user_code,event_code:e.currentval.event_code,day_id:e.seltab}}).then(function(t){e.checkIntime=t.data,1==t.data.result?(e.gatekeeperList=[],e.EndList=!1,e.params={event_code:e.currentval.event_code,day_id:e.seltab,offset:0,limit:50},0==e.params.offset&&e.gatekeeperPeopleinformation(1)):0==e.checkIntime.result?(e.checkIntime.error=e.checkIntime.message,$("#Check-in").modal("show")):e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.checkIntime={},(t.status==-1||null==t.data)&&0==s.online?e.checkIntime.error=i.errorMsg[0]:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.GK=e,e.resetImg=function(){e.GKlogoform.cmpylogo.$setValidity("minsizeval",!0),e.GKlogoform.cmpylogo.$setValidity("minDimension",!0),e.GKlogoform.cmpylogo.$setValidity("ratioval",!0),e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})};var y=[];e.saveGKtime=function(){angular.forEach(e.GK.TimeSel,function(e,t){var a={day_id:t,pre_checkin_time:e};y.push(a)}),e.setupStep="step2"},e.saveEntryTime=function(){$("#loading").show(),o({method:"POST",url:a.url+"/gate_pass/pre_checkin_time/",data:{pre_checkin_time:e.gatePassHour,event_code:e.currentval.event_code,day_id:e.seltab}}).then(function(t){e.checkIntime=t.data,1==t.data.result?($("#gatepass-manage-time").modal("hide"),e.gatekeeperInfo()):0==e.checkIntime.result?e.checkIntime.error=e.checkIntime.message:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()},function(t){e.checkIntime={},(t.status==-1||null==t.data)&&0==s.online?e.checkIntime.error=i.errorMsg[0]:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.GKsetupDone=function(){e.errormsg1=!1;var t=new FormData;t.append("event_code",e.currentval.event_code),t.append("pre_checkin_times",JSON.stringify(y)),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,a){t.append("logo",e.file)}),0==e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length&&t.append("logo",""),o({method:"POST",url:a.url+"/gate_pass/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.cdata=t.data,1==e.cdata.result?(e.currentval.gate_keeper=1,localStorage.setItem("selEventsData",angular.toJson(e.currentval)),window.location="/event/gatekeeper"):0==e.cdata.result?(e.errormsg1=!0,e.cdata.error=e.cdata.message):(e.errormsg1=!0,e.cdata.error=i.errorMsg[1])},function(t){e.cdata={},e.errormsg1=!0,t.status!=-1&&null!=t.data||0!=s.online?e.cdata.error=i.errorMsg[1]:e.cdata.error=i.errorMsg[0]})},e.isCroping=!1,e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=i.dataURItoBlob(t);"cmpylogo"==e.cropType&&(e.imageSrc=t,
angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc",""),e.isCroping=!1},e.resetCropImg=function(){"cmpylogo"==e.cropType&&(e.imageSrc="",angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,t){e.setType(4)})),e.isCroping=!1,$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.imageSrc="",e.cmpylogo.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){e.lodinghide=!1;var o=e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(t,a){e.isCroping=!0,a!=o-1?t.setType(4):t.file.size>5242880?(e.GKlogoform.cmpylogo.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc="",e.isCroping=!1):(e.GKlogoform.cmpylogo.$setValidity("minsizeval",!0),l.readAsDataUrl(t.file,e).then(function(a){i.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.GKlogoform.cmpylogo.$setValidity("minDimension",!0),e.isCroping=!0,1024==o&&1024==r?(e.imageSrc=a,e.isCroping=!1):(e.cropType="cmpylogo",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.GKlogoform.cmpylogo.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))}),d(function(){e.lodinghide=!0},2e3)}),e.$on("$dropletFileDeleted",function(){e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.updateLogo=function(){$("#loading").show();var t=new FormData;t.append("event_code",e.currentval.event_code),angular.forEach(e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID),function(e,a){t.append("logo",e.file)}),0==e.cmpylogo.getFiles(e.cmpylogo.FILE_TYPES.VALID).length&&t.append("logo",""),o({method:"POST",url:a.url+"/gate_pass/logo/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){1==t.data.result?($("#gatepass-add-logo").modal("hide"),e.gatekeeperInfo()):0==t.data.result&&(e.errormsg1=!0),$("#loading").hide(),$("#container").fadeIn()},function(t){e.cdata={},e.errormsg1=!0,t.status!=-1&&null!=t.data||0!=s.online?e.cdata.error=i.errorMsg[1]:e.cdata.error=i.errorMsg[0]})},0==s.online&&alert("You are not connected to internet")}]),app.controller("CollaboratorVisitPassController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$rootScope","$anchorScroll",function(e,t,a,o,r,n,i,l,s,c){var d=localStorage.getItem("selectedEventId");void 0!==d&&null!==d||(window.location="/collaborator-dashboard"),localStorage.removeItem("camImage"),void 0==localStorage.getItem("creategatepass")&&(window.location="/collaborator-dashboard"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.validateMail=function(){return!!/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/.test(e.email)},e.checkAccount=function(){e.emailvalid=e.validateMail(),e.emailvalid&&($("#loading").show(),o({method:"POST",url:a.url+"/gate_pass_check/",data:{event_code:e.currentval.event_code,email:e.email}}).then(function(t){1==t.data.result?t.data.gate_pass_check_date.redirect?(localStorage.setItem("printGatepass",angular.toJson(t.data.gate_pass_check_date)),window.location="/collaborator/create-gatepass"):0==t.data.gate_pass_check_date.redirect&&($("#loading").hide(),$("#container").fadeIn(),e.pdfUrl=t.data.gate_pass_check_date.gate_pass_url,$("#myModal-download").modal("show")):0==t.data.result&&(e.gatepass.error=t.data.message,e.gatepass.errormsg=!0,$("#loading").hide(),$("#container").fadeIn())},function(t){e.checkIntime={},(t.status==-1||null==t.data)&&0==s.online?e.checkIntime.error=i.errorMsg[0]:e.checkIntime.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()}))},e.closeModal=function(){e.email="",$("#myModal-download").modal("hide"),window.location="/collaborator/gatekeeper"},e.cancelVg=function(){localStorage.removeItem("creategatepass")},e.vistorGatepass=function(){localStorage.removeItem("printGatepass"),window.location="/collaborator/create-gatepass"},0==s.online&&alert("You are not connected to internet")}]),app.controller("CollaboratorGatepassController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$rootScope","$anchorScroll","$timeout","$window",function(e,t,a,o,r,n,i,l,s,c,d,m){var p=localStorage.getItem("selectedEventId");void 0!==p&&null!==p||(window.location="/collaborator-dashboard"),void 0==localStorage.getItem("creategatepass")&&(window.location="/collaborator-dashboard"),e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.specPeople=e.currentval.sp_people;var u={group_tittle:"Delegates",id:10,single_entity_tittle:"Delegate"};e.specPeople=e.specPeople.concat(u),e.visitPass=!0,null!=localStorage.getItem("printGatepass")&&(e.visitPass=!1,e.gatePassinfo=angular.fromJson(localStorage.getItem("printGatepass")),e.full_name=e.gatePassinfo.full_name,e.designation=e.gatePassinfo.designation,e.company_name=e.gatePassinfo.company_name,e.imageSrc=e.gatePassinfo.profile_picture,e.email=e.gatePassinfo.email),e.ticketSel=function(t){e.selectTicketval=t;for(var a=0;a<e.ticketsdata.length&&e.ticketsdata.ticket_code!=t;a++);},e.emailFormat=/^[a-z0-9._]+@[a-z0-9]+\.[a-z.]{2,63}$/,e.allTickets=function(){$("#loading").show(),i.getTickets(e.currentval.event_code).then(function(t){1==t.result&&(e.ticketsdata=t.tickets,$("#loading").hide(),$("#container").fadeIn(),0==e.visitPass&&e.ticketSel(e.gatePassinfo.ticket_code))})},e.allTickets(),e.selectDelType=function(t){e.selectedDelval=t;for(var a=0;a<e.specPeople.length&&e.specPeople.id!=t;a++);},0==e.visitPass&&e.selectDelType(e.gatePassinfo.delegate_type),e.checkImage=function(){$("#take-picture").modal("hide"),void 0!=localStorage.getItem("camImage")&&(e.imageSrc=localStorage.getItem("camImage"),e.iswebCamimg=!0)},e.removeCamImg=function(){e.imageSrc=null,e.iswebCamimg=!1,localStorage.removeItem("camImage")},e.cancelcreategatepass=function(){localStorage.removeItem("creategatepass")},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=i.dataURItoBlob(t);"floorPic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"floorPic"==e.cropType&&(e.imageSrc="",angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletReady",function(){e.floorPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.$on("$dropletFileAdded",function(t,a){var o=e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(t,a){console.log("test",t.file.size),a!=o-1?t.setType(4):t.file.size>5242880?(e.gatepassForm.floorPic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.gatepassForm.floorPic.$setValidity("minsizeval",!0),l.readAsDataUrl(t.file,e).then(function(a){i.getImgDimensions(a,function(o,r){o>=512&&r>=512?(e.gatepassForm.floorPic.$setValidity("minDimension",!0),512==o&&512==r?e.imageSrc=a:(e.cropType="floorPic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",2.4),$("#crop-image").modal("show"))):(e.gatepassForm.floorPic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),e.scrollToError=function(){d(function(){e.submitted&&void 0==e.selectedDelval?t.scrollJquery("spdel"):e.submitted&&void 0==e.selectTicketval&&t.scrollJquery("selticket")},100)},e.generateGatePass=function(){$("#loading").show();var t=new FormData;if(t.append("delegate_type",e.selectedDelval),t.append("ticket_code",e.selectTicketval),t.append("company_name",e.company_name),t.append("full_name",e.full_name),t.append("designation",e.designation),1==e.visitPass||null==e.gatePassinfo.profile_picture)if(e.iswebCamimg)t.append("profile_picture",i.dataURItoBlob(e.imageSrc));else{angular.forEach(e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID),function(e,a){t.append("profile_picture",e.file)});var r=e.floorPic.getFiles(e.floorPic.FILE_TYPES.VALID).length;0==r&&t.append("profile_picture","")}else t.append("profile_picture",e.gatePassinfo.profile_picture);1==e.visitPass?t.append("yara_user_code",""):t.append("yara_user_code",e.gatePassinfo.yara_user_code),t.append("email",e.email),o({method:"POST",url:a.url+"/gate_pass/custom/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,$("#loading").hide(),$("#container").fadeIn(),0==e.data.result?(e.errorstatus=!0,e.errormsg=e.data.message):1==e.data.result&&(localStorage.removeItem("printGatepass"),localStorage.removeItem("creategatepass"),e.pdfUrl=e.data.gate_pass_url,console.log(e.pdfUrl),$("#myModal-download").modal("show"))},function(t){e.errorstatus=!0,e.shownav=!1,(t.status==-1||null==t.data)&&0==s.online?e.errormsg=i.errorMsg[0]:e.errormsg=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()})},e.closeModal=function(){$("#myModal-download").modal("hide"),window.location="/collaborator/gatekeeper"},e.takePicture=!1,e.showCam=function(){},e.hideCamera=function(){e.takePicture=!1,$("#captureImg").hide()},e.checkWebcamneeded=function(){console.log("reach here"),console.log(s.browser),"Safari"!=s.browser?(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?e.takePicture=!0:(d(function(){$("#cam-notsupport").show()},100),e.iswebcamWork=!1,console.log("3"+e.iswebcamWork))):d(function(){$("#cam-notsupport").show()},100)},0==s.online&&alert("You are not connected to internet")}]),app.controller("CollaboratorAdSpaceController",["$scope","APPService","YaraBaseUrl","$http","$filter","$location","GetDataService","fileReader","$document","$timeout","$rootScope",function(e,t,a,o,r,n,i,l,s,c,m){e.dashboardsUrl=i.dashboardUrl(),e.timeformat=localStorage.getItem("is_time_format_24"),"true"==e.timeformat?e.is_time_format_24=!0:e.is_time_format_24=!1;var p=localStorage.getItem("selectedEventId");if(void 0!==p&&null!==p||(window.location="/collaborator-dashboard"),"/collaborator/create-adspace"==window.location.pathname){"yes"==localStorage.getItem("adspaceRedirection")&&(window.location="/collaborator-dashboard",localStorage.removeItem("adspaceRedirection"))}e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),document.title="YARA - "+e.currentval.short_name+" - Adspace",e.setOffset=function(e,t){return i.userOffsetTime(e,t)},e.checkdate=function(e,t,a){return i.startend(e,t,a)},e.currentLocalTime=function(){i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(t){1==t.result&&(e.timeNow=e.setOffset(t.local_time_now,0),e.timeNowTmzone=t.local_time_now,e.localTimeNow=new Date,e.lesstime(e.setOffset(e.currentval.days[0].endTime,e.currentval.eo)))})},e.currentLocalTime(),e.lesstime=function(t){var a=new Date(e.timeNow),o=t,r=Math.abs(a-o),n=Math.round(r/864e5);if(e.threetimediff=!1,0==n){var i=o.getTime()-a.getTime(),l=Math.floor(i%864e5/36e5),s=Math.round(i%864e5%36e5/6e4);l<=1&&s<=30&&(e.threetimediff=!0)}},e.isactiveDecipher=function(){e.showDecipher=!1;var t=((new Date).getTime()-e.localTimeNow.getTime())/1e3;t/=60,e.setOffset(e.timeNowTmzone,Math.abs(Math.round(t)))>e.setOffset(e.currentval.end_date,e.currentval.eo+360)&&(e.showDecipher=!0)},e.isSlotAvilabile=function(t){var a=!0,o=((new Date).getTime()-e.localTimeNow.getTime())/1e3;return o/=60,e.setOffset(e.timeNowTmzone,Math.abs(Math.round(o)))>=e.setOffset(t,e.currentval.eo)&&(a=!1),a};var u=e.setOffset(e.currentval.start_date,e.currentval.eo),g=e.setOffset(e.currentval.end_date,e.currentval.eo),f=r("date")(u,"yyyy-MM-dd"),v=r("date")(g,"yyyy-MM-dd");if(e.dayscount=t.dateDiffInDays(new Date(f),new Date(v)),e.dates=t.Dateslist(f,e.dayscount),e.selectedval=[],e.s=t,e.days={},e.eventDaysInfo=[],angular.forEach(e.currentval.days,function(t,a){var o={dayID:e.currentval.days[a].dayID,dayTitle:e.currentval.days[a].dayTitle,dstOffset:e.currentval.days[a].dstOffset,isDayActive:e.currentval.days[a].is_day_active,endTime:e.setOffset(e.currentval.days[a].endTime,e.currentval.eo),startTime:e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),date:r("date")(e.setOffset(e.currentval.days[a].startTime,e.currentval.eo),"yyyy-MM-dd")};e.eventDaysInfo.push(o)}),"/collaborator/create-adspace"!=window.location.pathname)if(void 0!=localStorage.getItem("dcode")){for(var h=localStorage.getItem("dcode"),y=e.eventDaysInfo.length-1;y>=0;y--)if(e.eventDaysInfo[y].dayID==Number(h)){e.seltab=e.eventDaysInfo[y].dayID,e.seldayInfo=e.eventDaysInfo[y],e.expday=e.eventDaysInfo[y].isDayActive;break}}else e.seltab=e.eventDaysInfo[0].dayID,e.expday=e.eventDaysInfo[0].isDayActive,e.seldayInfo=e.eventDaysInfo[0];if("Admin"==i.getPrivilege()?e.admincheck=!0:e.admincheck=!1,e.selectedDay="",e.subtitle="",e.datetitle="",e.listBtnTitle=[],i.getAdBtnTitle().then(function(t){e.listBtnTitle=t.objects,e.btnLinkTitle=e.listBtnTitle[0].tittle}),e.ForwordStore=function(){localStorage.setItem("ecode",e.currentval.event_code),localStorage.setItem("dcode",e.seldayInfo.dayID),sessionStorage.setItem("redirectFromAd",angular.toJson(e.currentval)),window.location="/store-adspace-buy"},e.getSlot=function(t){$("#loading").show(),i.eventLocalTz({tz:e.currentval.event_timezone}).then(function(a){1==a.result&&(e.timeNow=e.setOffset(a.local_time_now,0),e.timeNowTmzone=a.local_time_now,e.localTimeNow=new Date,i.getAdspace({event_code:e.currentval.event_code,day_id:t}).then(function(t){if(1==t.result&&(e.reachSlotlimit=!1,e.timeSlotData=t.ad_slots,e.eventOffset=t.eo,e.maxSlots=t.max_slots,e.slotInterval=t.slot_interval_in_minutes,e.adspaceSlots=t.add_purchased_count,e.allocatedSlotsCount=t.current_add_count,$("#loading").hide(),$("#container").fadeIn(),e.isactiveDecipher(),e.deliverdAds=[],e.nonDeliverdAds=[],e.adSlots=e.timeSlotData,angular.forEach(e.timeSlotData,function(t,a){1==e.timeSlotData[a].is_used&&(e.timeSlotData[a].ads.is_pushed?e.deliverdAds.push(e.timeSlotData[a]):e.nonDeliverdAds.push(e.timeSlotData[a]))}),t.add_purchased_count>0)){0==t.add_purchased_count-t.current_add_count&&(e.reachSlotlimit=!0)}}))})},"/collaborator/create-adspace"==window.location.pathname){var h=localStorage.getItem("dcode");console.log(Number(h)),console.log(e.eventDaysInfo);for(var y=e.eventDaysInfo.length-1;y>=0;y--)if(e.eventDaysInfo[y].dayID==Number(h)){e.seltab=e.eventDaysInfo[y].dayID,e.seldayInfo=e.eventDaysInfo[y],e.expday=e.eventDaysInfo[y].isDayActive;break}e.getSlot(h)}e.buyAds=function(){e.maxSlots!=e.allocatedSlotsCount&&e.ForwordStore()},e.getAdspace=function(){$("#loading").show(),i.getAdspace({event_code:e.currentval.event_code,day_id:d}).then(function(t){1==t.result&&($("#loading").hide(),$("#container").fadeIn(),e.addsList=t.adds)})},e.SelDate="",e.subtitle="",e.selectDate=function(t){e.SelDate=t,e.subtitle="",$(".subtitle").text("Select Time Slot"),e.getSlot(t)},e.ADselecttab=function(t,a){localStorage.setItem("dcode",t.dayID),e.seltab=t.dayID,e.expday=t.isDayActive,e.seldayInfo=t,e.getSlot(t.dayID),e.lesstime(t.endTime)},e.f_Delivery="all",e.viewAds=function(t){e.f_Delivery=t,1==t?e.timeSlotData=e.deliverdAds:0==t?e.timeSlotData=e.nonDeliverdAds:"all"==t&&(e.timeSlotData=e.adSlots,console.log(e.timeSlotData,"fdhty"))};var _=sessionStorage.getItem("dcode"),S=sessionStorage.getItem("Adtime");if(""!=_&&void 0!=_&&null!=_)e.selectedDay=_,e.SelDate=_,e.getSlot(_),e.subtitle=S,$(".subtitle").text(e.subtitle),sessionStorage.setItem("dcode",""),sessionStorage.setItem("Adtime","");else{var I=localStorage.getItem("dcode");if("/collaborator/adspace"==window.location.pathname&&null!=I){e.seltab=I,e.seldayid=I;for(var y=0;y<e.eventDaysInfo.length;y++)e.eventDaysInfo[y].dayID==I&&(e.expday=e.eventDaysInfo[y].isDayActive,e.movebutton=y);e.getSlot(I),c(function(){if(e.ddbt=e.movebutton+1,e.ddbt>3){e.forl=e.ddbt-3;for(var t=0;t<e.forl;t++)$(".slider").diyslider("move","forth"),e.dbutton--}},100)}else e.getSlot(e.seltab)}if(e.createSlot=function(e,t,a){localStorage.setItem("dcode",e),localStorage.setItem("Adtime",t),localStorage.removeItem("adspaceRedirection"),void 0!=a?localStorage.setItem("slotInfo",JSON.stringify(a)):localStorage.removeItem("slotInfo"),window.location="create-adspace"},e.revokeAdObj="",e.revokeAd=function(t){e.revokeAdObj=t},e.DelAdspace=function(){$("#loading").show(),o({method:"POST",url:a.url+"/add_edit/",data:{opp:"delete",add_code:e.revokeAdObj.ads.add_code,day_id:e.seltab,old_slot:e.revokeAdObj.slot_no,new_slot:""}}).then(function(t){e.data2=t.data,null==e.data2.result||void 0==e.data2.result?(e.errormsg2=!0,e.data2.error=i.errorMsg[1]):0==e.data2.result?(e.errormsg2=!0,e.data2.error=e.data2.message):(e.errormsg2=!0,e.data2.error=e.data2.message,e.getSlot(e.seltab),$("#adspace-delete").modal("hide")),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data2={},e.errormsg2=!0,(t.status==-1||null==t.data)&&0==m.online?e.data2.error=i.errorMsg[0]:e.data2.error=i.errorMsg[1],$("#adspace-delete").modal("hide"),$("#loading").hide(),$("#container").fadeIn()})},e.editAdObj="",e.editAd=function(t){e.currentLocalTime(),e.editAdObj=t},e.EditAdspace=function(){$("#loading").show(),o({method:"POST",url:a.url+"/add_edit/",data:{opp:"edit",add_code:e.editAdObj.ads.add_code,day_id:e.seltab,old_slot:e.editAdObj.slot_no,new_slot:e.subtitle.slot_no}}).then(function(t){e.data2=t.data,null==e.data2.result||void 0==e.data2.result?(e.errormsg2=!0,e.data2.error=i.errorMsg[1]):0==e.data2.result?(e.errormsg2=!0,e.data2.error=e.data2.message):(e.errormsg2=!0,e.data2.error=e.data2.message,e.getSlot(e.seltab),$("#adspace-change").modal("hide")),$("#loading").hide(),$("#container").fadeIn()},function(t){e.data2={},e.errormsg2=!0,(t.status==-1||null==t.data)&&0==m.online?e.data2.error=i.errorMsg[0]:e.data2.error=i.errorMsg[1],$("#adspace-delete").modal("hide"),$("#loading").hide(),$("#container").fadeIn()})},e.urlchange=function(){/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,253}(:[0-9]{1,5})?(\/.*)?$/.test(e.weburl)?e.urlrequired=!1:e.urlrequired=!0},e.CreateAD=function(){e.errormsg=!1,$("#loading").show();var t=new FormData;t.append("event_code",e.currentval.event_code),angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,a){t.append("image",e.file)}),0==e.adPic.getFiles(e.adPic.FILE_TYPES.VALID).length&&t.append("image",""),t.append("tittle",e.title),t.append("url",e.weburl),t.append("day",localStorage.getItem("dcode")),1==e.custom?(t.append("display_time",moment(e.setOffset(e.subtitle.display_time,e.eventOffset)).format("YYYY-MM-DD HH:mm")),t.append("slot_no",e.subtitle.slot_no)):(t.append("display_time",""),t.append("slot_no",0)),t.append("button_tittle",e.btnLinkTitle),e.data={},o({method:"POST",url:a.url+"/add/",data:t,transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(t){e.data=t.data,null==e.data.result||void 0==e.data.result?(e.errormsg=!0,e.data.error=i.errorMsg[1],$("#loading").hide(),$("#container").fadeIn()):0==e.data.result?(e.errormsg=!0,e.data.error=e.data.message,$("#loading").hide(),$("#container").fadeIn()):1==e.data.result&&(e.errormsg=!0,localStorage.setItem("adspaceRedirection","yes"),e.submitted=!1,e.title="",e.weburl="",e.SelDate="",e.subtitle="",$(".subtitle").text("Select Time Slot"),angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,t){e.setType(4)}),e.imageSrc="",window.location="/collaborator/adspace")},function(t){e.data={},e.errormsg=!0,t.status!=-1&&null!=t.data||0!=m.online?e.data.error=i.errorMsg[1]:e.data.error=i.errorMsg[0],$("#loading").hide()})},e.$on("$dropletReady",function(){e.adPic.allowedExtensions(["png","jpg","jpeg"])}),e.$on("$dropletInvalid",function(){$("#myModal-invalid").modal("show")}),e.changeSubtype=function(t){if($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show(),""==t)e.subtitle=t,$(".subtitle").text("Select Type");else{e.subtitle=t,console.log(t);var a="";a=1==e.is_time_format_24?r("date")(e.setOffset(t.display_time,e.currentval.eo),"HH:mm"):r("date")(e.setOffset(t.display_time,e.currentval.eo),"hh:mm a"),$(".subtitle").text(a)}},void 0!=localStorage.getItem("slotInfo")&&"/collaborator/create-adspace"==window.location.pathname){$(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtitle").show();var w=angular.fromJson(localStorage.getItem("slotInfo"));e.subtitle=w;var b;b=1==e.is_time_format_24?r("date")(e.setOffset(w.display_time,e.currentval.eo),"HH:mm"):r("date")(e.setOffset(w.display_time,e.currentval.eo),"hh:mm a"),c(function(){$(".subtitle").text(b)},100)}$(document).on("click",".subtype_dropdown .primary_nav_wrap ul li",function(){$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret02"),$(".subtype_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),s.on("click",function(e){var t=$(".subtype_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".subtitlesearch").css("display")||($(".subtype_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".subtype_dropdown img").removeClass(),$(".subtype_dropdown img").addClass("caret01"))}),e.changeBtnLink=function(t){$(".btnLink_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),""==t?(e.btnLinkTitle=t,$(".subtitle").text("Select Title")):e.btnLinkTitle=t},$(document).on("click",".btnLink_dropdown .primary_nav_wrap ul li",function(){$(".btnLink_dropdown img").removeClass(),$(".btnLink_dropdown img").addClass("caret02"),$(".btnLink_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),s.on("click",function(e){var t=$(".btnLink_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||($(".btnLink_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".btnLink_dropdown img").removeClass(),$(".btnLink_dropdown img").addClass("caret01"))}),e.changeDate=function(t){$(".date_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".datetitle").show(),""==t?(e.datetitle=t,$(".datetitle").text("Select Day")):(e.getTimeSlot(t),e.datetitle=t,$(".datetitle").text(e.days[t].day_name),e.subtitle="",$(".subtitle").text("Select Time Slot"))},$(document).on("click",".date_dropdown .primary_nav_wrap ul li",function(){$(".date_dropdown img").removeClass(),$(".date_dropdown img").addClass("caret02"),$(".date_dropdown .primary_nav_wrap ul li ul").css({display:"list-item",color:"#000","z-index":100})}),s.on("click",function(e){var t=$(".date_dropdown .primary_nav_wrap ul li");t===e.target||t.has(e.target).length||"none"==$(".datetitle").css("display")||($(".date_dropdown .primary_nav_wrap ul li ul").hide({display:"none",color:"none",background:"#fff","z-index":100}),$(".date_dropdown img").removeClass(),$(".date_dropdown img").addClass("caret01"))}),e.errorscroll=function(){e.createForm.adPic.$setValidity("minsizeval",!0),e.createForm.adPic.$setValidity("minDimension",!0),e.createForm.adPic.$setValidity("ratioval",!0),void 0==e.title||""==e.title||null==e.title||e.imageSrc||c(function(){t.scrollJquery("errorimg")},100)},e.setCropImg=function(){var t=$(".image-editor").cropit("export"),a=i.dataURItoBlob(t);"adPic"==e.cropType&&(e.imageSrc=t,angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,t){e.file=a})),$("#crop-image").modal("hide"),$(".image-editor").cropit("imageSrc","")},e.resetCropImg=function(){"adPic"==e.cropType&&(e.imageSrc="",angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(e,t){e.setType(4)})),$(".image-editor").cropit("imageSrc","")},e.$on("$dropletFileAdded",function(t,a){var o=e.adPic.getFiles(e.adPic.FILE_TYPES.VALID).length;o>0&&angular.forEach(e.adPic.getFiles(e.adPic.FILE_TYPES.VALID),function(t,a){a!=o-1?t.setType(4):t.file.size>5242880?(e.createForm.adPic.$setValidity("minsizeval",!1),t.setType(4),e.imageSrc=""):(e.createForm.adPic.$setValidity("minsizeval",!0),l.readAsDataUrl(t.file,e).then(function(a){i.getImgDimensions(a,function(o,r){o>=1024&&r>=1024?(e.createForm.adPic.$setValidity("minDimension",!0),1024==o&&1024==r?e.imageSrc=a:(e.cropType="adPic",$(".image-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:a}}),$(".image-editor").cropit("imageSrc",a),$(".image-editor").cropit("previewSize",{width:250,height:250}),$(".image-editor").cropit("exportZoom",4.096),$("#crop-image").modal("show"))):(e.createForm.adPic.$setValidity("minDimension",!1),t.setType(4),e.imageSrc=""),e.$apply()})}))})}),e.$on("$dropletFileDeleted",function(){e.adPic.getFiles(e.adPic.FILE_TYPES.VALID).length<=0&&(e.imageSrc="")}),e.$on("$dropletError",function(){}),0==m.online&&alert("You are not connected to internet")}]),app.controller("CollaboratorShowCaseController",["$scope","fileReader","YaraBaseUrl","$http","$location","$filter","APPService","GetDataService","$rootScope",function(e,t,a,o,r,n,i,l,s){e.dashboardsUrl=l.dashboardUrl(),e.headerTitle="ShowCase";var c=localStorage.getItem("selectedEventId");if(void 0===c||null===c)window.location="/collaborator-dashboard";else{e.selevntdata=localStorage.getItem("selEventsData"),e.currentval=angular.fromJson(e.selevntdata),e.is_time_format_24=localStorage.getItem("is_time_format_24"),document.title="YARA - "+e.currentval.short_name+" - ShowCase",e.selectedPermission=angular.fromJson(localStorage.getItem("selectedPermission")),e.exhbitorMange=!1,e.sponserMange=!1;for(var d=e.selectedPermission.length-1;d>=0;d--)"Exhibitors"==e.selectedPermission[d].name&&(e.exhbitorMange=!0),"Sponsors"==e.selectedPermission[d].name&&(e.sponserMange=!0)}e.setOffset=function(e,t){return l.userOffsetTime(e,t)},e.locationHref=window.location.pathname,"Admin"==l.getPrivilege()?e.privilege=!0:e.privilege=!1,e.SwtichTab=function(t){e.current=t,e.search="","All"==t?(e.getSponsor(),e.getExhibitor()):"sponsor"==t?e.getSponsor():e.getExhibitor(),$anchorScroll()},e.service=i,e.userActivites=function(t){e.listActivites=t,$("#showcase-Activity").modal("show")},e.ShowCase_revoke=function(t,a,o){e.Runame=t,e.Rtype=a,e.Rpermission=o?"revoke":"enable",console.log(e.Runame,e.Rpermission,e.Rtype),e.ShowCase_Permission(e.Runame,e.Rpermission,e.Rtype)},e.ShowCase_Permission=function(t,r,n){var i=2;"sp"==n&&(i=1),"enable"==r?o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"enable",showcase_type:i,showcase:!0}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&("sp"==n?e.getSponsor():e.getExhibitor())}):"revoke"==r&&o({method:"POST",url:a.url+"/showcase_permission/",data:{event_code:e.currentval.event_code,showcase_code:t,opp:"revoke",showcase_type:i,showcase:!0}}).then(function(t){e.ddata=t.data,1==e.ddata.result&&($("#showcase-delete").modal("hide"),"sp"==n?e.getSponsor():e.getExhibitor())})},e.getSponsor=function(){$("#loading").show(),l.getSponsors(e.currentval.event_code).then(function(t){1==t.result&&(e.SPdata=t.data,$("#loading").hide(),$("#container").fadeIn())})},e.getExhibitor=function(){$("#loading").show(),l.getExhibitors(e.currentval.event_code).then(function(t){1==t.result&&(e.EXdata=t.data,$("#loading").hide(),$("#container").fadeIn())})},e.getSponsor(),e.getExhibitor(),e.resend=function(t,r,n){e.resendemail=t,e.showcasecode=r,e.showcasetype=n,$("#loading").show(),o({method:"POST",url:a.url+"/showcase_resend_invitation/",data:{event_code:e.currentval.event_code,showcase_code:e.showcasecode,email:e.resendemail,showcase_type:e.showcasetype}}).then(function(t){e.data=t.data,1==e.data.result?(console.log("send mail"),$("#showcase-mail").modal("show"),$("#loading").hide()):0==e.data.result&&(console.log("error"),e.errormsg=!0,e.showerror=t.data.message,$("#loading").hide())})},0==s.online&&alert("You are not connected to internet")}]),app.controller("StoreAccessCtrl",["$scope","GetDataService","$rootScope",function(e,t,a){"Admin"==t.getPrivilege(2)?e.admincheck=!0:e.admincheck=!1,0==a.online&&alert("You are not connected to internet")}]),app.controller("HappyhelpDashboardCtrl",["$scope","fileReader","$timeout","$location","$filter","GetDataService","$http","YaraBaseUrl","APPService","$rootScope",function(e,t,a,o,r,n,i,l,s,c){e.getUser=function(){n.getCurrtUser().then(function(t){1==t.result&&(e.currtuser=t.user_data,localStorage.setItem("selEventsData",JSON.stringify(e.currtuser.user_type)),null==e.currtuser.tz_offset&&(window.location="/settings"))})},e.getUser(),e.Logout=function(){n.Signout().then(function(e){1==e.result&&(localStorage.clear(),window.location="/sign-in")})}}]),app.controller("InfoController",["$scope","YaraBaseUrl","$http","$location","GetDataService","$rootScope","$timeout",function(e,t,a,o,r,n,i){e.errorInfo=angular.fromJson(localStorage.getItem("infoPageErrors")),e.gotoPrevpage=function(){console.log(document.referrer),window.location=document.referrer},0==n.online&&alert("You are not connected to internet")}]),app.controller("PaymentSuccessController",["$scope","YaraBaseUrl","$http","$location","GetDataService","$rootScope","$timeout",function(e,t,a,o,r,n,i){e.continueDashboard=function(){var e=angular.fromJson(localStorage.getItem("paymentInfo"));"top_up"==e.redirect_to?r.getEvent(e.event_code).then(function(t){if(1==t.result){console.log(t);var a=t.events,o=a[0];console.log(o),localStorage.setItem("selEventsData",angular.toJson(o)),localStorage.setItem("selectedEventId",e.event_code),window.location="/event/people"}}):"ad"==e.redirect_to?r.getEvent(e.event_code).then(function(t){if(1==t.result){console.log(t);var a=t.events,o=a[0];console.log(o),localStorage.setItem("selEventsData",angular.toJson(o)),localStorage.setItem("selectedEventId",e.event_code),localStorage.setItem("dcode",e.day_id),window.location="/event/adspace"}}):window.location="/packages"},0==n.online&&alert("You are not connected to internet")}]);