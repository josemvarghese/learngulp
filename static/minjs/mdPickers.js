!function(){"use strict";function e(e,t,n,a){var r=this;this.VIEW_HOURS=1,this.VIEW_MINUTES=2,this.currentDate=n,this.currentView=this.VIEW_HOURS,this.currentMoment=moment(r.currentDate),this.clockHours=parseInt(this.currentMoment.format("h")),this.clockMinutes=parseInt(this.currentMoment.minutes()),e.$watch(function(){return r.clockHours},function(e,t){angular.isDefined(t)&&("AM"==r.currentMoment.format("A")?r.currentMoment.hour(r.clockHours):r.currentMoment.hour(r.clockHours<12?r.clockHours+12:r.clockHours),t!=r.clockHours&&(r.currentView=r.VIEW_MINUTES))}),e.$watch(function(){return r.clockMinutes},function(e,t){angular.isDefined(t)&&(r.currentMoment.minutes(e<60?e:0),t!=r.clockMinutes&&(r.currentView=r.VIEW_HOURS))}),e.$mdMedia=a,this.setAM=function(){"PM"==r.currentMoment.format("A")&&r.currentMoment.hour(r.currentMoment.hour()-12)},this.setPM=function(){"AM"==r.currentMoment.format("A")&&r.currentMoment.hour(r.currentMoment.hour()+12)},this.cancel=function(){t.cancel()},this.confirm=function(){t.hide(this.currentMoment.toDate())}}function t(e){this.ngModel,this.STEP_DEG=30;var t=this;this.steps=[],this.selected=0,this.CLOCK_TYPES={hours:{range:12},minutes:{range:60}},this.setTimeByDeg=function(e){e=e>=360?0:e;var n=0;switch(t.type){case"hours":n=12;break;case"minutes":n=60}t.setTime(Math.round(n/360*e))},this.getPointerStyle=function(){var e=1;switch(t.type){case"hours":e=12;break;case"minutes":e=60}var n=Math.round(t.selected*(360/e))-180;return{"-webkit-transform":"rotate("+n+"deg)","-ms-transform":"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}},this.setTime=function(e){this.selected=e,t.ngModel.$setViewValue(e),t.ngModel.$render()},this.init=function(e,n){switch(t.type=n,n){case"hours":for(var a=1;a<=12;a++)t.steps.push(a);break;case"minutes":for(var a=5;a<=55;a+=5)t.steps.push(a);t.steps.push(0)}t.ngModel=e,t.selected=t.ngModel.$modelValue||0}}function n(e,t,n,a,r,i){var c=this;this.currentDate=n,this.currentMoment=moment(c.currentDate),this.selectingYear=!1,this.minDate=a?moment(a).subtract(1,"days"):void 0,e.$mdMedia=r,this.yearItems={currentIndex_:0,PAGE_SIZE:5,START:1900,getItemAtIndex:function(e){return this.currentIndex_<e&&(this.currentIndex_=e),this.START+e},getLength:function(){return this.currentIndex_+Math.floor(this.PAGE_SIZE/2)}},e.year=this.currentMoment.year(),this.selectYear=function(t){c.currentMoment.year(t),e.year=t,c.selectingYear=!1,c.animate()},this.showYear=function(){c.yearTopIndex=c.currentMoment.year()-c.yearItems.START+Math.floor(c.yearItems.PAGE_SIZE/2),c.yearItems.currentIndex_=c.currentMoment.year()-c.yearItems.START+1,c.selectingYear=!0},this.showCalendar=function(){c.selectingYear=!1},this.cancel=function(){t.cancel()},this.confirm=function(){t.hide(this.currentMoment.toDate())},this.animate=function(){c.animating=!0,i(angular.noop).then(function(){c.animating=!1})}}function a(e){var t=this;this.currentMoment,this.weekDays=moment.weekdaysMin(),this.minDate=e.mindate,this.getDaysInMonth=function(){for(var e=t.currentMoment.daysInMonth(),n=moment(t.currentMoment).date(1).day(),a=[],r=1;r<=n+e;r++)a.push(r>n&&r-n);return a},this.selectDate=function(e){t.currentMoment.date(e)},this.nextMonth=function(){t.currentMoment.add(1,"months")},this.prevMonth=function(){t.currentMoment.subtract(1,"months")},this.init=function(e){t.currentMoment=e},this.isDisabledMonth=function(){var e=moment(this.currentMoment);return!!this.minDate&&!this.minDate.isBefore(e,"month")},this.isDisabled=function(e){var t=moment(this.currentMoment);return t.date(e),!!this.minDate&&!this.minDate.isBefore(t,"day")}}var r=angular.module("mdPickers",["ngMaterial","ngAnimate","ngAria"]);r.directive("mdpClock",["$animate","$timeout",function(e,n){return{restrict:"E",require:["mdpClock","ngModel"],scope:{type:"@?"},replace:!0,template:'<div class="mdp-clock"><div class="mdp-clock-container"><md-toolbar class="mdp-clock-center md-primary"></md-toolbar><md-toolbar ng-style="clock.getPointerStyle()" class="mdp-pointer md-primary"><span class="mdp-clock-selected md-button md-raised md-primary"></span></md-toolbar><md-button ng-class="{ \'md-primary\': clock.selected == step }" class="md-icon-button md-raised mdp-clock-deg{{ ::(clock.STEP_DEG * ($index + 1)) }}" ng-repeat="step in clock.steps" ng-click="clock.setTime(step)">{{ step }}</md-button></div></div>',controller:["$scope",t],controllerAs:"clock",link:function(e,t,a,r){var i=r[0],c=r[1],o=angular.element(t[0].querySelector(".mdp-clock-container"));angular.element(t[0].querySelector(".mdp-pointer"));e.type=e.type||"hours",n(function(){i.init(c,e.type)});var s=function(e){if(e.target==o[0]){var t=e.target.offsetWidth/2-e.offsetX,a=e.offsetY-e.target.offsetHeight/2,r=Math.round(Math.atan2(t,a)*(180/Math.PI));n(function(){i.setTimeByDeg(r+180)})}};o.on("mousedown",function(){o.on("mousemove",s)}),o.on("mouseup mouseout",function(){o.off("mousemove",s)}),o.on("click",s),e.$on("$destroy",function(){o.off("click",s),o.off("mousemove",s)})}}}]),r.provider("$mdpTimePicker",function(){var t="ok",n="cancel";this.setOKButtonLabel=function(e){t=e},this.setCancelButtonLabel=function(e){n=e},this.$get=["$mdDialog",function(a){return function(r,i){return angular.isDate(i)||(i=Date.now()),a.show({controller:["$scope","$mdDialog","currentDate","$mdMedia",e],controllerAs:"timepicker",clickOutsideToClose:!0,template:'<md-dialog aria-label="" class="mdp-timepicker" ng-class="{ \'portrait\': !$mdMedia(\'gt-xs\') }"><md-dialog-content layout-gt-xs="row" layout-wrap><md-toolbar layout-gt-xs="column" layout-xs="row" layout-align="center center" flex class="mdp-timepicker-time md-hue-1 md-primary"><div class="mdp-timepicker-selected-time"><span ng-class="{ \'active\': timepicker.currentView == timepicker.VIEW_HOURS }" ng-click="timepicker.currentView = timepicker.VIEW_HOURS">{{ timepicker.currentMoment.format("h") }}</span>:<span ng-class="{ \'active\': timepicker.currentView == timepicker.VIEW_MINUTES }" ng-click="timepicker.currentView = timepicker.VIEW_MINUTES">{{ timepicker.currentMoment.format("mm") }}</span></div><div layout="column" class="mdp-timepicker-selected-ampm"><span ng-click="timepicker.setAM()" ng-class="{ \'active\': timepicker.currentMoment.format(\'A\') == \'AM\' }">AM</span><span ng-click="timepicker.setPM()" ng-class="{ \'active\': timepicker.currentMoment.format(\'A\') == \'PM\' }">PM</span></div></md-toolbar><div><div class="mdp-clock-switch-container" ng-switch="timepicker.currentView" layout layout-align="center center"><mdp-clock class="mdp-animation-zoom" ng-model="timepicker.clockHours" type="hours" ng-switch-when="1"></mdp-clock><mdp-clock class="mdp-animation-zoom" ng-model="timepicker.clockMinutes" type="minutes" ng-switch-when="2"></mdp-clock></div><md-dialog-actions layout-align="end center" layout="row"><md-button ng-click="timepicker.cancel()" aria-label="'+n+'">'+n+'</md-button><md-button ng-click="timepicker.confirm()" aria-label="'+t+'">'+t+"</md-button></md-dialog-actions></div></md-dialog-content></md-dialog>",targetEvent:r,locals:{currentDate:i}})}}]}),r.provider("$mdpDatePicker",function(){var e="ok",t="cancel";this.setOKButtonLabel=function(t){e=t},this.setCancelButtonLabel=function(e){t=e},this.$get=["$mdDialog",function(a){return function(r,i,c){return angular.isDate(i)||(i=Date.now()),c=Date.parse(c),a.show({controller:["$scope","$mdDialog","currentDate","minDate","$mdMedia","$timeout",n],controllerAs:"datepicker",clickOutsideToClose:!0,template:'<md-dialog aria-label="" class="mdp-datepicker" ng-class="{ \'portrait\': !$mdMedia(\'gt-xs\') }"><md-dialog-content layout="row" layout-wrap><div layout="column" layout-align="start center"><md-toolbar layout-align="start start" flex class="mdp-datepicker-date-wrapper md-hue-1 md-primary" layout="column"><span class="mdp-datepicker-year" ng-click="datepicker.showYear()" ng-class="{ \'active\': datepicker.selectingYear }">{{ datepicker.currentMoment.format(\'YYYY\') }}</span><span class="mdp-datepicker-date" ng-click="datepicker.showCalendar()" ng-class="{ \'active\': !datepicker.selectingYear }">{{ datepicker.currentMoment.format("ddd, MMM DD") }}</span> </md-toolbar></div><div><div class="mdp-datepicker-select-year mdp-animation-zoom" layout="column" ng-if="datepicker.selectingYear"><md-virtual-repeat-container md-auto-shrink md-top-index="datepicker.yearTopIndex"><div flex md-virtual-repeat="item in datepicker.yearItems" md-on-demand class="repeated-year"><span class="md-button" ng-click="datepicker.selectYear(item)" md-ink-ripple ng-class="{ \'md-primary current\': item == year }">{{ item }}</span></div></md-virtual-repeat-container></div><mdp-calendar ng-if="!datepicker.selectingYear" class="mdp-animation-zoom" date="datepicker.currentMoment" minDate="datepicker.minDate"></mdp-calendar><md-dialog-actions layout-align="end center" layout="row"><md-button ng-click="datepicker.cancel()" aria-label="'+t+'">'+t+'</md-button><md-button ng-click="datepicker.confirm()" aria-label="'+e+'">'+e+"</md-button></md-dialog-actions></div></md-dialog-content></md-dialog>",targetEvent:r,locals:{currentDate:i,minDate:c}})}}]}),r.directive("mdpCalendar",["$animate",function(e){return{restrict:"E",scope:{date:"=",mindate:"="},template:'<div class="mdp-calendar"><div layout="row" layout-align="space-between center"><md-button aria-label="previous month" class="md-icon-button" ng-disabled="calendar.isDisabledMonth()" ng-click="calendar.prevMonth()"><md-icon md-font-set="material-icons"> chevron_left </md-icon></md-button><div class="mdp-calendar-monthyear" ng-show="!calendar.animating">{{ calendar.currentMoment.format("MMMM YYYY") }}</div><md-button aria-label="next month" class="md-icon-button" ng-click="calendar.nextMonth()"><md-icon md-font-set="material-icons"> chevron_right </md-icon></md-button></div><div layout="row" layout-align="space-around center" class="mdp-calendar-week-days" ng-show="!calendar.animating"><div layout layout-align="center center" ng-repeat="d in calendar.weekDays track by $index">{{ d }}</div></div><div layout="row" layout-wrap class="mdp-calendar-days" ng-class="{ \'mdp-animate-next\': calendar.animating }" ng-show="!calendar.animating"><div layout layout-align="center center" ng-repeat-start="n in calendar.getDaysInMonth() track by $index" ng-class="{ \'mdp-day-placeholder\': n === false }"><md-button class="md-icon-button md-raised" aria-label="seleziona giorno" ng-if="n !== false" ng-disabled="calendar.isDisabled(n)" ng-class="{\'md-accent\': calendar.currentMoment.date() == n}" ng-click="calendar.selectDate(n)">{{ n }}</md-button></div><div flex="100" ng-if="($index + 1) % 7 == 0" ng-repeat-end></div></div></div>',controller:["$scope",a],controllerAs:"calendar",link:function(t,n,a,r){var i=[n[0].querySelector(".mdp-calendar-week-days"),n[0].querySelector(".mdp-calendar-days"),n[0].querySelector(".mdp-calendar-monthyear")];i=i.map(function(e){return angular.element(e)}),r.init(t.date),t.$watch(function(){return t.date.format("YYYYMM")},function(t,n){var a=null;if(t>n?a="mdp-animate-next":t<n&&(a="mdp-animate-prev"),a)for(var r in i)i[r].addClass(a),e.removeClass(i[r],a)})}}}])}();